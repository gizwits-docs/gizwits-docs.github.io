
<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta charset="utf-8">

  <title>Gizwits Open API - 机智云</title>

  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta name="Description" content="Gizwits Open API-机智云">
  <meta name="keywords" content="Gizwits Open API docs 文档中心 Gizwits">

  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">

  <link rel="stylesheet" href="/css/pure.min.css">
  <link rel="stylesheet" href="/css/documentation.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
</head>
  <body>
    <div class="header">
  <div class="container pure-g">
    <span class="brand pure-u-5-24">
      <a href="http://www.gizwits.com" class="logo">
        <img src="/images/logo.png" alt="logo"> 
      </a>
      <a class="text" href="/">文档中心</a>
    </span>

    <span class="menu pure-u-14-24">
      <ul class="levelA-wrapper">
        
          
            <li class="levelA"><a href="/zh-cn/overview/overview.html">平台概述</a></li>
          
        
          
            <li class="levelA">
              快速入门 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/quickstart/5分钟了解机智云.html">5分钟了解机智云</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/quickstart/设备快速接入.html">设备快速接入机智云</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      App快速接入机智云 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/quickstart/准备工作.html">App开发准备工作</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/quickstart/AndroidAppFrame.html">Android App 快速开发</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/quickstart/iOSAPP快速入门.html">iOS App 快速开发</a></li>
                        
                      </ul>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              APP开发 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB has-submenu">
                      App 开源框架 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/iosframe.html">iOS 开源框架使用说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/iOS消息推送.html">iOS 消息推送</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/iOS第三方登陆与换肤.html">iOS 第三方登录与换肤</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/Android开源框架使用指南.html">Android 开源框架使用说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/Android消息推送.html">Android 消息推送</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/Android第三方登录与换肤.html">Android 第三方登录与换肤</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/AppDev/iOSSDKA2.html">iOS SDK</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/AppDev/AndroidSDKA2.html">Android SDK</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/AppDev/APICloudWifiSDK.html">APICloud SDK</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              微信开发 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/WechatDev/了解微信应用开发.html">了解微信应用开发</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/WechatDev/微信应用开发教程.html">微信应用开发教程</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              设备开发 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/deviceDev/gagent_info.html">GAgent详解</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      MCU开发框架使用说明 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/DevSDK/代码自动生成工具.html">GoKit3.0代码自动生成工具</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/GoKit3 DEV SDK Common版移植说明.html">GoKit3.0 DEV SDK Common版移植说明</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      Gokit3.0介绍 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3/Gokit3开发套件简介.html">Gokit3.0系列开发套件简介</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3/GoKit3硬件手册.html">Gokit3.0硬件手册</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      WiFi SOC方案 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit3S使用说明书.html">GoKit3.0(S)使用说明书</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit3S开发套件介绍.html">Gokit3.0(S)开发套件介绍</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit3S二次开发.html">GoKit3.0(S)开发环境搭建</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit3S程序详解.html">Gokit3.0(S)源码详解</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      Gokit3.0语音开发 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3Voice/GoKit3V使用说明书.html">GoKit3.0(V)使用说明书</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3Voice/GoKit3V二次开发指南.html">Gokit3.0(V)开发指南</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3Voice/GoKit3V词条.html">GoKit3.0(V)词条管理</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3Voice/GoKit3V程序详解.html">Gokit3.0(V)源码详解</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      调试与烧写 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/串口工具使用文档.html">串口工具使用文档</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/HF-LPB100串口烧写说明.html">HF-LPB100串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/debug/HF-LPT120.html">HF-LPT120串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/MXCHIP串口烧写说明.html">MXCHIP串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/ESP8266串口烧写说明.html">ESP8266串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/产测工具使用文档.html">产测工具使用文档</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/日志抓取教程文档.html">日志抓取教程文档</a></li>
                        
                      </ul>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              云平台 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/ent_dev.html">企业应用开发</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/noti1.0.html">消息代理服务</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/enterprise_api.html">企业API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/WebsocketAPI.html">WebSocketAPI</a></li>
                  
                
              </ul>
            </li>
          
        
      </ul>
    </span>
    
    
    <span class="pure-u-2-24"><a href="https://gizwits.kf5.com" style="color: #faeb00;">返回旧版</a></span>
  
    <span class="pure-u-3-24">
      <i class="fa fa-globe" aria-hidden="true"></i> 
      
        <button class="lang-switch" data-lang="en-us">English</button>
      
    </span>

  </div>
</div>
    <div class="body">
  
  <div class="container clearfix">
    <div class="navigation">
      <div class="navigation-inner">
        <div class="nav-title">目录</div>
        <div class="nav"></div>
      </div>
    </div>
    <div class="markdown-body" data-spy="scroll" data-target=".navigation">
      <div class="heading">
        <div class="title">Gizwits Open API</div>
        <a class="edit-link" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> 文档编辑</a>
      </div>
      <h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>机智云 Open API 主要帮助开发者通过 HTTP 的方式维护用户、用户与设备之间的绑定关系，以及获取设备数据、发送控制指令给设备。</p>
<p>调用 API 需要获取 appid，product_key 和 token。appid 和 product_key 可以在产品信息页面获取到，token 通过用户注册和登录获取到。</p>
<p>下文中的参数统一用 {appid} 来表示，请将你自己的 appid 整个替换掉 {appid} （包括大括号）。</p>
<h1 id="访问地址"><a href="#访问地址" class="headerlink" title="访问地址"></a>访问地址</h1><p><a href="http://api.gizwits.com" target="_blank" rel="external">http://api.gizwits.com</a></p>
<h1 id="SDK"><a href="#SDK" class="headerlink" title="SDK"></a>SDK</h1><ul>
<li>python sdk: <a href="https://github.com/gizwits/gservice_sdk_py" target="_blank" rel="external">https://github.com/gizwits/gservice_sdk_py</a></li>
</ul>
<h1 id="用户信息-app-users"><a href="#用户信息-app-users" class="headerlink" title="用户信息 [/app/users]"></a>用户信息 [/app/users]</h1><h2 id="创建匿名用户-POST"><a href="#创建匿名用户-POST" class="headerlink" title="创建匿名用户 [POST]"></a>创建匿名用户 [POST]</h2><p>如果您想让您的用户不需要显示注册和登录就能使用机智云的功能，就可以通过匿名注册的方式来为该用户创建一个匿名用户。phone_id 可以是手机的唯一识别码。</p>
<p>或者您已经有了自己的用户系统，不希望用户再次注册一次机智云帐号，您也可以使用该接口，为您的每一个用户创建一个对应的机智云匿名帐号。这时，phone_id 可以是用户在您的系统中的唯一识别码。如在与微信应用做对接时，phone_id 可以设置成微信用户的 openid。</p>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;phone_id&quot;: &quot;apiary&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 201 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{ 
    &quot;uid&quot;: &quot;akkdlfeiow&quot;, 
    &quot;token&quot;: &quot;akdlfkad&quot;,
    &quot;expire_at&quot;: 13894002020
}
</code></pre></li>
</ul>
</li>
</ul>
<ul>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --data-binary &quot;{
    \&quot;phone_id\&quot;: \&quot;apiary\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/users&apos;
</code></pre></li>
</ul>
<h2 id="使用用户名和密码创建用户-POST"><a href="#使用用户名和密码创建用户-POST" class="headerlink" title="使用用户名和密码创建用户 [POST]"></a>使用用户名和密码创建用户 [POST]</h2><ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;username&quot;: &quot;bob&quot;,
    &quot;password&quot;: &quot;123456&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 201 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{ 
    &quot;uid&quot;: &quot;akkdlfeiow&quot;, 
    &quot;token&quot;: &quot;akdlfkad&quot;,
    &quot;expire_at&quot;: 13894002020
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --data-binary &quot;{
    \&quot;username\&quot;: \&quot;bob\&quot;,
    \&quot;password\&quot;: \&quot;123456\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/users&apos;
</code></pre></li>
</ul>
<h2 id="使用邮箱创建用户-POST"><a href="#使用邮箱创建用户-POST" class="headerlink" title="使用邮箱创建用户 [POST]"></a>使用邮箱创建用户 [POST]</h2><p>用户通过邮箱注册机智云帐号，注册成功后会收到一封邮件通知。</p>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;email&quot;: &quot;bob@bob.com&quot;,
    &quot;password&quot;: &quot;123456&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 201 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{ 
    &quot;uid&quot;: &quot;akkdlfeiow&quot;, 
    &quot;token&quot;: &quot;akdlfkad&quot;,
    &quot;expire_at&quot;: 13894002020
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --data-binary &quot;{
    \&quot;email\&quot;: \&quot;bob@bob.com\&quot;,
    \&quot;password\&quot;: \&quot;123456\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/users&apos;
</code></pre></li>
</ul>
<h2 id="使用手机号创建用户-POST"><a href="#使用手机号创建用户-POST" class="headerlink" title="使用手机号创建用户 [POST]"></a>使用手机号创建用户 [POST]</h2><p>如果希望用户使用手机号注册机智云帐号，机智云提供短信验证码接口，您需要先调用获取验证码接口获取验证码，然后再进行注册。</p>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;phone&quot;: &quot;123456&quot;,
    &quot;password&quot;: &quot;123456&quot;,
    &quot;code&quot;: &quot;abc&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 201 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{ 
    &quot;uid&quot;: &quot;akkdlfeiow&quot;, 
    &quot;token&quot;: &quot;akdlfkad&quot;,
    &quot;expire_at&quot;: 13894002020
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --data-binary &quot;{
    \&quot;phone\&quot;: \&quot;123456\&quot;,
    \&quot;password\&quot;: \&quot;123456\&quot;,
    \&quot;code\&quot;: \&quot;abc\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/users&apos;
</code></pre></li>
</ul>
<h2 id="使用第三方账号（百度-新浪-QQ）创建用户-POST"><a href="#使用第三方账号（百度-新浪-QQ）创建用户-POST" class="headerlink" title="使用第三方账号（百度/新浪/QQ）创建用户 [POST]"></a>使用第三方账号（百度/新浪/QQ）创建用户 [POST]</h2><p>机智云目前支持使用百度、新浪和QQ创建用户，但是需要您在客户端实现 OAuth 授权，获得用户的 uid 和 token，机智云会验证 uid 和 token 的合法性，验证通过就会创建一个机智云帐号。</p>
<h2 id="关于-QQ-登录"><a href="#关于-QQ-登录" class="headerlink" title="关于 QQ 登录"></a>关于 QQ 登录</h2><p>使用 QQ 登录，需要提供您的机智云 APP ID 和 QQ 应用 APP ID 发送给我们的客服，我们客服将会在后台将二者进行关联。</p>
<p>手机客户端使用 QQ SDK 获取到用户的 openid 和 access_token，将 openid 和 access_token 作为 uid 和 token POST 到该接口:</p>
<pre><code>{
    &quot;authData&quot;: {
        &quot;src&quot;: &quot;qq&quot;,
        &quot;uid&quot;: opendid,
        &quot;token&quot;: access_token
    }
}
</code></pre><ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
</code></pre></li>
<li><p>Body</p>
<pre><code>{   
    &quot;authData&quot;: {
        &quot;src&quot;: &quot;baidu|sina|qq&quot;,
        &quot;uid&quot;: &quot;2346677&quot;,
        &quot;token&quot;:&quot;pnktnjyb996sj4p156gjtp4im&quot;
    }
}
</code></pre></li>
</ul>
</li>
<li><p>Response 201 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{ 
    &quot;uid&quot;: &quot;akkdlfeiow&quot;, 
    &quot;token&quot;: &quot;akdlfkad&quot;,
    &quot;expire_at&quot;: 13894002020
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --data-binary &quot;{   
    \&quot;authData\&quot;: {
        \&quot;src\&quot;: \&quot;baidu\&quot;,
        \&quot;uid\&quot;: \&quot;2346677\&quot;,
        \&quot;token\&quot;:\&quot;pnktnjyb996sj4p156gjtp4im\&quot;
    }
}&quot; \
&apos;http://api.gizwits.com/app/users&apos;
</code></pre></li>
</ul>
<h2 id="匿名用户设置用户名和密码-PUT"><a href="#匿名用户设置用户名和密码-PUT" class="headerlink" title="匿名用户设置用户名和密码 [PUT]"></a>匿名用户设置用户名和密码 [PUT]</h2><p>假设您的机智云应用帮用户创建了一个匿名用户，他不需要注册就可以体验您的应用，并且绑定了设备，他体验满意之后，希望有一个自己的机智云帐号，但是又不想重复绑定设备。这时您可以调用该接口，为匿名用户设置用户名和密码，这样他就不再是一个匿名用户了。</p>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;username&quot;: &quot;bob&quot;,
    &quot;password&quot;: &quot;abda2&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{
    &quot;updatedAt&quot;: &quot;2011-11-07T21:25:10.623Z&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request PUT \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-User-token: {token}&quot; \
     --data-binary &quot;{
    \&quot;username\&quot;: \&quot;bob\&quot;,
    \&quot;password\&quot;: \&quot;abda2\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/users&apos;
</code></pre></li>
</ul>
<h2 id="匿名用户设置手机号和密码-PUT"><a href="#匿名用户设置手机号和密码-PUT" class="headerlink" title="匿名用户设置手机号和密码 [PUT]"></a>匿名用户设置手机号和密码 [PUT]</h2><p>与匿名用户设置用户名和密码类似，该接口可以为匿名用户设置手机号和密码，但是需要先调用一次获取短信验证码的接口。</p>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;phone&quot;: &quot;1328830223&quot;,
    &quot;password&quot;: &quot;123456&quot;,
    &quot;code&quot;: &quot;123&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{
    &quot;updatedAt&quot;: &quot;2011-11-07T21:25:10.623Z&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request PUT \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-User-token: {token}&quot; \
     --data-binary &quot;{
    \&quot;phone\&quot;: \&quot;1328830223\&quot;,
    \&quot;password\&quot;: \&quot;123456\&quot;,
    \&quot;code\&quot;: \&quot;123\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/users&apos;
</code></pre></li>
</ul>
<h2 id="修改密码-PUT"><a href="#修改密码-PUT" class="headerlink" title="修改密码 [PUT]"></a>修改密码 [PUT]</h2><ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;old_pwd&quot;: &quot;123456&quot;,
    &quot;new_pwd&quot;: &quot;123456&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{ 
    &quot;updatedAt&quot;: &quot;2011-11-07T21:25:10.623Z&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request PUT \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-User-token: {token}&quot; \
     --data-binary &quot;{
    \&quot;old_pwd\&quot;: \&quot;123456\&quot;,
    \&quot;new_pwd\&quot;: \&quot;123456\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/users&apos;
</code></pre></li>
</ul>
<h2 id="修改-email-PUT"><a href="#修改-email-PUT" class="headerlink" title="修改 email [PUT]"></a>修改 email [PUT]</h2><ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;email&quot;: &quot;bob@bob.com&quot;,
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{
    &quot;updatedAt&quot;: &quot;2011-11-07T21:25:10.623Z&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request PUT \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-User-token: {token}&quot; \
     --data-binary &quot;{
    \&quot;email\&quot;: \&quot;bob@bob.com\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/users&apos;
</code></pre></li>
</ul>
<h2 id="修改手机号-PUT"><a href="#修改手机号-PUT" class="headerlink" title="修改手机号 [PUT]"></a>修改手机号 [PUT]</h2><p>修改手机号需要先调用一次获取短信验证码的接口，给新手机号发送一条短信验证码。</p>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;phone&quot;: &quot;1328830223&quot;,
    &quot;code&quot;: &quot;abc&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{
    &quot;updatedAt&quot;: &quot;2011-11-07T21:25:10.623Z&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request PUT \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-User-token: {token}&quot; \
     --data-binary &quot;{
    \&quot;phone\&quot;: \&quot;1328830223\&quot;,
    \&quot;code\&quot;: \&quot;abc\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/users&apos;
</code></pre></li>
</ul>
<h1 id="用户登录-app-login"><a href="#用户登录-app-login" class="headerlink" title="用户登录 [/app/login]"></a>用户登录 [/app/login]</h1><p>可以使用用户名/邮箱/手机号登录，一律填写到 username 字段。</p>
<h2 id="用户登录-POST"><a href="#用户登录-POST" class="headerlink" title="用户登录 [POST]"></a>用户登录 [POST]</h2><ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;username&quot;: &quot;bob&quot;,
    &quot;password&quot;: &quot;123456&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{ 
    &quot;uid&quot;: &quot;akkdlfeiow&quot;, 
    &quot;token&quot;: &quot;akdlfkad&quot;,
    &quot;expire_at&quot;: 13894002020
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --data-binary &quot;{
    \&quot;username\&quot;: \&quot;bob\&quot;,
    \&quot;password\&quot;: \&quot;123456\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/login&apos;
</code></pre></li>
</ul>
<h1 id="获取-App-Token-app-request-token"><a href="#获取-App-Token-app-request-token" class="headerlink" title="获取 App Token [/app/request_token]"></a>获取 App Token [/app/request_token]</h1><h2 id="获取-App-Token-POST"><a href="#获取-App-Token-POST" class="headerlink" title="获取 App Token [POST]"></a>获取 App Token [POST]</h2><ul>
<li>请使用 <em>https</em> 调用本接口</li>
<li>signature 的算法: signature = MD5(appid+appsecret) 32位小写</li>
</ul>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-Application-Auth: {signature}
</code></pre></li>
</ul>
</li>
</ul>
<ul>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{
    &quot;token&quot;: &quot;XxXXXxxxx&quot;,
    &quot;expired_at&quot;: 123333333,
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --insecure \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-Application-Auth: {signature}&quot; \
  &apos;https://api.gizwits.com/app/request_token&apos;
</code></pre></li>
</ul>
<h1 id="图片验证码-app-verify-codes"><a href="#图片验证码-app-verify-codes" class="headerlink" title="图片验证码 [/app/verify/codes]"></a>图片验证码 [/app/verify/codes]</h1><h2 id="获取图片验证码-GET"><a href="#获取图片验证码-GET" class="headerlink" title="获取图片验证码 [GET]"></a>获取图片验证码 [GET]</h2><ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-Application-Token: {token}
</code></pre></li>
</ul>
</li>
</ul>
<ul>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{
    &quot;captcha_url&quot;: &quot;http://xxxxx&quot;,
    &quot;captcha_id&quot;: &quot;XXXXXXXxxxxxxx&quot;,
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-Application-Token: {token}&quot; \
  &apos;http://api.gizwits.com/app/verify/codes&apos;
</code></pre></li>
</ul>
<h2 id="发送手机短信验证码-POST"><a href="#发送手机短信验证码-POST" class="headerlink" title="发送手机短信验证码 [POST]"></a>发送手机短信验证码 [POST]</h2><ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-Application-Token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;captcha_id&quot;: &quot;XXXXXXXxxxxxxx&quot;,
    &quot;captcha_code&quot;: &quot;123123&quot;,
    &quot;phone&quot;: &quot;123123123&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 201 (application/json)</p>
</li>
<li><p>请求示例</p>
<pre><code>Try curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-Application-Token: {token}&quot; \
     --data-binary &quot;{
    \&quot;captcha_id\&quot;: \&quot;XXXXXXXxxxxxxx\&quot;,
    \&quot;captcha_code\&quot;: \&quot;123123\&quot;,
    \&quot;phone\&quot;: \&quot;123123123\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/verify/codes&apos;
</code></pre></li>
</ul>
<h2 id="校验短信验证码-PUT"><a href="#校验短信验证码-PUT" class="headerlink" title="校验短信验证码 [PUT]"></a>校验短信验证码 [PUT]</h2><ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-Application-Token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;sms_code&quot;: &quot;123xx&quot;,
    &quot;phone&quot;: &quot;123123123&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request PUT \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-Application-Token: {token}&quot; \
     --data-binary &quot;{
    \&quot;sms_code\&quot;: \&quot;123xx\&quot;,
    \&quot;phone\&quot;: \&quot;123123123\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/verify/codes&apos;
</code></pre></li>
</ul>
<h1 id="重置密码-app-reset-password"><a href="#重置密码-app-reset-password" class="headerlink" title="重置密码 [/app/reset_password]"></a>重置密码 [/app/reset_password]</h1><h2 id="使用邮箱重置密码-POST"><a href="#使用邮箱重置密码-POST" class="headerlink" title="使用邮箱重置密码 [POST]"></a>使用邮箱重置密码 [POST]</h2><p>请求成功后用户会收到一封重置密码的邮件, 用户根据邮件的链接进行密码重置。</p>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;email&quot;: &quot;bob@bob.com&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --data-binary &quot;{
    \&quot;email\&quot;: \&quot;bob@bob.com\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/reset_password&apos;
</code></pre></li>
</ul>
<h2 id="使用手机号重置密码-POST"><a href="#使用手机号重置密码-POST" class="headerlink" title="使用手机号重置密码 [POST]"></a>使用手机号重置密码 [POST]</h2><p>使用手机号重置密码需要先调用一次获取短信验证码的接口。</p>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;phone&quot;: &quot;13232433&quot;,
    &quot;code&quot;: &quot;13232&apos;,
    &quot;new_pwd&quot;: &quot;1323200&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --data-binary &quot;{
    \&quot;phone\&quot;: \&quot;13232433\&quot;,
    \&quot;code\&quot;: \&quot;13232\&apos;,
    \&quot;new_pwd\&quot;: \&quot;1323200\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/reset_password&apos;
</code></pre></li>
</ul>
<h1 id="获取设备最近上传数据-app-devdata-did-latest"><a href="#获取设备最近上传数据-app-devdata-did-latest" class="headerlink" title="获取设备最近上传数据 [/app/devdata/{did}/latest]"></a>获取设备最近上传数据 [/app/devdata/{did}/latest]</h1><h2 id="获取设备最近上传数据点-GET"><a href="#获取设备最近上传数据点-GET" class="headerlink" title="获取设备最近上传数据点 [GET]"></a>获取设备最近上传数据点 [GET]</h2><p>获取设备最近一次上传的数据，包含所有数据点的键值对。</p>
<ul>
<li><p>参数列表</p>
<ul>
<li>did (required, string, <code>gdGn7PzAYf4VrhnVag5x8D</code>)</li>
</ul>
</li>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{
    &quot;did&quot;: &quot;gdGn7PzAYf4VrhnVag5x8D&quot;,
    &quot;updated_at&quot;: 148293984328,
    &quot;attr&quot;: {
      &quot;temp&quot;: 10,
      &quot;humi&quot;: 20
    }
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
  &apos;http://api.gizwits.com/app/devdata/gdGn7PzAYf4VrhnVag5x8D/latest&apos;
</code></pre></li>
</ul>
<h1 id="绑定设备-app-bind-mac"><a href="#绑定设备-app-bind-mac" class="headerlink" title="绑定设备 [/app/bind_mac]"></a>绑定设备 [/app/bind_mac]</h1><h2 id="绑定设备-POST"><a href="#绑定设备-POST" class="headerlink" title="绑定设备 [POST]"></a>绑定设备 [POST]</h2><p>X-Gizwits-Timestamp 与服务器相差不能超过 5 分钟<br>X-Gizwits-Signature = MD5(product_secret + X-Gizwits-Timestamp).lower()</p>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
X-Gizwits-Timestamp: {req_ts}
X-Gizwits-Signature: {sig}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
   &quot;product_key&quot;: &quot;xxx&quot;,
   &quot;mac&quot;: &quot;xxx&quot;,
   &quot;remark&quot;: &quot;xxx&quot;,
   &quot;dev_alias&quot;: &quot;xxx&quot;
}
</code></pre></li>
</ul>
</li>
</ul>
<ul>
<li><p>Response 201 (application/json)</p>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-User-token: {token}&quot; \
     --header &quot;X-Gizwits-Timestamp: {req_ts}&quot; \
     --header &quot;X-Gizwits-Signature: {sig}&quot; \
     --data-binary &quot;{
   \&quot;product_key\&quot;: \&quot;xxx\&quot;,
   \&quot;mac\&quot;: \&quot;xxx\&quot;,
   \&quot;remark\&quot;: \&quot;xxx\&quot;,
   \&quot;dev_alias\&quot;: \&quot;xxx\&quot;
}&quot; \
&apos;http://api.gizwits.com/app/bind_mac&apos;
</code></pre></li>
</ul>
<h1 id="绑定关系-app-bindings"><a href="#绑定关系-app-bindings" class="headerlink" title="绑定关系 [/app/bindings]"></a>绑定关系 [/app/bindings]</h1><h2 id="获取绑定列表-GET"><a href="#获取绑定列表-GET" class="headerlink" title="获取绑定列表 [GET]"></a>获取绑定列表 [GET]</h2><ul>
<li>参数列表<ul>
<li>limit (optional, number, <code>20</code>)</li>
<li>skip (optional, number, <code>0</code>)</li>
</ul>
</li>
</ul>
<p>limit 和 skip 表示分页参数。limit 为一次性返回的最多条数，skip 为跳过多少条数据。</p>
<p>如每页 10 条数据，获取第一页数据：limit=10, skip=0；获取第二页数据：limit=10, skip=10.</p>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{
    &quot;devices&quot;: [{
        &quot;product_key&quot;: &quot;akdlfkad&quot;,
        &quot;did&quot;: &quot;abcada&quot;,
        &quot;mac&quot;: &quot;1122334455667788&quot;,
        &quot;is_online&quot;: false,
        &quot;passcode&quot;: &quot;123456&quot;,
        &quot;host&quot;: &quot;m2m.gizwits.com&quot;,
        &quot;port&quot;: 3128,
        &quot;remark&quot;: &quot;&quot;,
        &quot;is_disabled&quot;: false,
        &quot;type&quot;: &quot;normal&quot;,
        &quot;dev_alias&quot;: &quot;dev1&quot;
    },{
        &quot;product_key&quot;: &quot;akdlfkad&quot;,
        &quot;did&quot;: &quot;abcada&quot;,
        &quot;mac&quot;: &quot;1122334455667788&quot;,
        &quot;is_online&quot;: false,
        &quot;passcode&quot;: &quot;123456&quot;,
        &quot;host&quot;: &quot;m2m.gizwits.com&quot;,
        &quot;port&quot;: 3128,
        &quot;remark&quot;: &quot;&quot;,
        &quot;is_disabled&quot;: false,
        &quot;type&quot;: &quot;center_control&quot;,
        &quot;dev_alias&quot;: &quot;dev2&quot;
    }]
}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-User-token: {token}&quot; \
  &apos;http://api.gizwits.com/app/bindings?show_disabled=1&amp;limit=20&amp;skip=0&apos;
</code></pre></li>
</ul>
<h2 id="绑定设备-通过-did-passcode-POST"><a href="#绑定设备-通过-did-passcode-POST" class="headerlink" title="绑定设备: 通过 did + passcode [POST]"></a>绑定设备: 通过 did + passcode [POST]</h2><p>使用该接口适合知道 did 和 passcode 的情况。</p>
<p>dev_alias 设备别名，用于当前用户对该设备起一个别名，仅该用户可见。<br>remark 用于设置备注信息。</p>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;devices&quot;: [{
        &quot;did&quot;: &quot;gdGn7PzAYf4VrhnVag5x8D&quot;,
        &quot;passcode&quot;: &quot;gokit&quot;,
        &quot;remark&quot;: &quot;&quot;，      
        &quot;dev_alias&quot;: &quot;my_dev&quot;
    }]
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<pre><code>{
     &quot;success&quot;: [&apos;abc&apos;, &apos;add&apos;],
     &quot;failed&quot;: [&apos;adad&apos;, &apos;ee&apos;]
}
</code></pre></li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-User-token: {token}&quot; \
     --data-binary &quot;{
    \&quot;devices\&quot;: [{
        \&quot;did\&quot;: \&quot;gdGn7PzAYf4VrhnVag5x8D\&quot;,
        \&quot;passcode\&quot;: \&quot;gokit\&quot;,
        \&quot;remark\&quot;: \&quot;\&quot;,
        \&quot;dev_alias\&quot;: \&quot;\&quot;
    }]
}&quot; \
&apos;http://api.gizwits.com/app/bindings&apos;
</code></pre></li>
</ul>
<h2 id="解除绑定-DELETE"><a href="#解除绑定-DELETE" class="headerlink" title="解除绑定 [DELETE]"></a>解除绑定 [DELETE]</h2><ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;devices&quot;: [{
        &quot;did&quot;: &quot;gdGn7PzAYf4VrhnVag5x8D&quot;
    }]
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<pre><code>{
     &quot;success&quot;: [&apos;abc&apos;, &apos;add&apos;],
     &quot;failed&quot;: [&apos;adad&apos;, &apos;ee&apos;]
}
</code></pre></li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request DELETE \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-User-token: {token}&quot; \
     --data-binary &quot;{
    \&quot;devices\&quot;: [{
        \&quot;did\&quot;: \&quot;gdGn7PzAYf4VrhnVag5x8D\&quot;
    }]
}&quot; \
&apos;http://api.gizwits.com/app/bindings&apos;
</code></pre></li>
</ul>
<h1 id="远程控制设备-app-control-did"><a href="#远程控制设备-app-control-did" class="headerlink" title="远程控制设备 [/app/control/{did}]"></a>远程控制设备 [/app/control/{did}]</h1><p>远程控制设备可以通过两种方式，一种是设置数据点，一种是发送原始控制指令。<br>推荐使用设置数据点的方式，通过这种方式控制设备，系统内部自动会生成原始控制指令发送给设备，使用起来更简单。</p>
<ul>
<li>参数列表<ul>
<li>did (required, string, <code>did</code>)</li>
</ul>
</li>
</ul>
<h2 id="设置数据点-POST"><a href="#设置数据点-POST" class="headerlink" title="设置数据点 [POST]"></a>设置数据点 [POST]</h2><ul>
<li>只能设置可写类型的数据点</li>
<li>bool 类型的数据点设置为 true/false</li>
<li>enum 类型的数据点设置为枚举的字符串</li>
<li>uint8/uint16/uint32 类型的数据点设置为数字</li>
<li>binary 类型的数据设置为 hex 类型字符串，如发送一串十六进制数据 0x01, 0x02, 0x03, 就写成 “010203”;<br>如果 binary 类型本身为字符串，如 “hello world!”，需将字符串每个字符的 ASCII 转成十六进制再发送，本例为 “68656c6c6f20776f726c6421”;<br><strong>注意 binary 类型定义了多少长度，就需要发多少长度的数据</strong>。</li>
</ul>
<ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;attrs&quot;: {
      &quot;temp&quot;: 10
    }
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{}
</code></pre></li>
</ul>
</li>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;attrs&quot;: {
      &quot;temp&quot;: 10,
      &quot;humi&quot;: 50
    }
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-User-token: {token}&quot; \
     --data-binary &quot;{
    \&quot;attrs\&quot;: {
        \&quot;temp\&quot;: 10
    }
}&quot; \
&apos;http://api.gizwits.com/app/control/did&apos;
</code></pre></li>
</ul>
<h2 id="发送原始控制指令-POST"><a href="#发送原始控制指令-POST" class="headerlink" title="发送原始控制指令 [POST]"></a>发送原始控制指令 [POST]</h2><ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
    &quot;raw&quot;: [&lt;byte&gt;, &lt;byte&gt;, ...]
}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{}
</code></pre></li>
</ul>
</li>
<li><p>请求示例</p>
<pre><code>curl --include \
     --request POST \
     --header &quot;Content-Type: application/json&quot; \
     --header &quot;X-Gizwits-Application-Id: {appid}&quot; \
     --header &quot;X-Gizwits-User-token: {token}&quot; \
     --data-binary &quot;{
    \&quot;raw\&quot;: [0, 1, 2, 3]
}&quot; \
&apos;http://api.gizwits.com/app/control/did&apos;
</code></pre></li>
</ul>
<h1 id="定时任务-app-scheduler-limit-skip"><a href="#定时任务-app-scheduler-limit-skip" class="headerlink" title="定时任务 [/app/scheduler{?limit,skip}]"></a>定时任务 [/app/scheduler{?limit,skip}]</h1><p>定时任务分为一次性定时任务和可重复执行定时任务。一次性定时任务在设定好的日期和时间执行；可重复执行定时任务可以设置按星期重复，如每周一执行，工作日执行等，在重复的星期的设定时间执行。</p>
<p>执行日期通过 date 参数进行设置，格式为：”2015-01-01”。</p>
<p>执行时间通过 time 参数进行设置，格式为：”10:10”, <em>注意：该时间为 UTC 时间！</em></p>
<p>重复类型通过 repeat 参数进行设置，不重复设置为 “none”；重复设置为 “mon”, “tue”, “wed”, “thu”, “fri”, “sat”, “sun” 的组合，组合之间用逗号分隔，如每周一和周二重复为 “mon,tue”。</p>
<p>一次定时任务可以给多个已绑定的设备发送控制指令，只有设定的所有控制指令都发送成功，本次定时任务才算执行成功。任务内容通过 task 设定，为一个列表，列表内的内容为每个具体的任务。具体的任务需要提供设备 did, product_key 和要设置的数据点键值对 attrs。如：</p>
<pre><code>{
  &quot;did&quot;: &quot;did1&quot;,
  &quot;product_key&quot;: &quot;xxx&quot;,
  &quot;attrs&quot;: {
    &quot;attr1&quot;: val,
    &quot;attr2&quot;: val
  }
}
</code></pre><p>对于执行失败的定时任务，可以设置重复次数和重复策略。重复次数的范围为 0 ～ 60 次。置重复策略分为全部重试和部分重试。全部重试，将在重试的时候发送所有设定的控制指令；部分重试，只对还未发送成功指令进行发送。</p>
<p>重复次数通过 retry_count 来设置。</p>
<p>重复策略通过 retry_task 来设置，全部重试为 “all”，部分重试为 “failed”。</p>
<h2 id="创建定时任务-POST"><a href="#创建定时任务-POST" class="headerlink" title="创建定时任务 [POST]"></a>创建定时任务 [POST]</h2><ul>
<li><p>Request (application/json)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
<li><p>Body</p>
<pre><code>{
  &quot;date&quot;: &quot;2015-01-01&quot;,
  &quot;time&quot;: &quot;12:00&quot;,
  &quot;repeat&quot;: &quot;none&quot;,
  &quot;task&quot;: [
    {
      &quot;did&quot;: &quot;did1&quot;,
      &quot;product_key&quot;: &quot;xxx&quot;,
      &quot;attrs&quot;: {
        &quot;attr1&quot;: val,
        &quot;attr2&quot;: val
      }
    },
    {
      &quot;did&quot;: &quot;did2&quot;,
      &quot;product_key&quot;: &quot;xxx&quot;,
      &quot;attrs&quot;: {
        &quot;attr1&quot;: val,
        &quot;attr2&quot;: val
      }
    }
  ],
  &quot;retry_count&quot;: 3,
  &quot;retry_task&quot;: &quot;all&quot;
}
</code></pre></li>
</ul>
</li>
<li><p>Response 201 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{
  &quot;id&quot;: &quot;adkle&quot;
}
</code></pre></li>
</ul>
</li>
</ul>
<h2 id="获取定时任务-GET"><a href="#获取定时任务-GET" class="headerlink" title="获取定时任务 [GET]"></a>获取定时任务 [GET]</h2><ul>
<li><p>参数列表</p>
<ul>
<li>limit (optional, number, <code>20</code>)</li>
<li>skip (optional, number, <code>0</code>)</li>
</ul>
</li>
<li><p>Request (application/text)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>[
  {
    &quot;id&quot;: &quot;abckaldkl&quot;,
    &quot;created_at&quot;: &quot;2015-01-01T12:00:00&quot;,
    &quot;date&quot;: &quot;2015-01-01&quot;,
    &quot;time&quot;: &quot;12:00&quot;,
    &quot;repeat&quot;: &quot;none&quot;,
    &quot;task&quot;: [
      {
        &quot;did&quot;: &quot;did1&quot;,
        &quot;product_key&quot;: &quot;xxx&quot;,
        &quot;attrs&quot;: {
          &quot;attr1&quot;: 1,
          &quot;attr2&quot;: 1
        }
      },
      {
        &quot;did&quot;: &quot;did2&quot;,
        &quot;product_key&quot;: &quot;xxx&quot;,
        &quot;attrs&quot;: {
          &quot;attr1&quot;: 1,
          &quot;attr2&quot;: 2
        }
      }
    ],
    &quot;retry_count&quot;: 3,
    &quot;retry_task&quot;: &quot;all&quot;
  },
  {
    &quot;id&quot;: &quot;abckaldkl&quot;,
    &quot;created_at&quot;: &quot;2015-01-01T12:00:00&quot;,
    &quot;date&quot;: &quot;2015-01-01&quot;,
    &quot;time&quot;: &quot;12:00&quot;,
    &quot;repeat&quot;: &quot;none&quot;,
    &quot;task&quot;: [
      {
        &quot;did&quot;: &quot;did1&quot;,
        &quot;product_key&quot;: &quot;xxx&quot;,
        &quot;attrs&quot;: {
          &quot;attr1&quot;: &quot;val&quot;,
          &quot;attr2&quot;: &quot;val&quot;
        }
      },
      {
        &quot;did&quot;: &quot;did2&quot;,
        &quot;product_key&quot;: &quot;xxx&quot;,
        &quot;attrs&quot;: {
          &quot;attr1&quot;: &quot;val&quot;,
          &quot;attr2&quot;: &quot;val&quot;
        }
      }
    ],
    &quot;retry_count&quot;: 3,
    &quot;retry_task&quot;: &quot;all&quot;
  }
]
</code></pre></li>
</ul>
</li>
</ul>
<h1 id="删除定时任务-app-scheduler-id"><a href="#删除定时任务-app-scheduler-id" class="headerlink" title="删除定时任务 [/app/scheduler/{id}]"></a>删除定时任务 [/app/scheduler/{id}]</h1><ul>
<li>参数列表<ul>
<li>id (required, string, <code>sid1</code>)</li>
</ul>
</li>
</ul>
<h2 id="删除定时任务-DELETE"><a href="#删除定时任务-DELETE" class="headerlink" title="删除定时任务 [DELETE]"></a>删除定时任务 [DELETE]</h2><ul>
<li><p>Request (application/text)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
</li>
</ul>
<h1 id="定时任务执行日志-app-scheduler-id-logs"><a href="#定时任务执行日志-app-scheduler-id-logs" class="headerlink" title="定时任务执行日志 [/app/scheduler/{id}/logs]"></a>定时任务执行日志 [/app/scheduler/{id}/logs]</h1><ul>
<li>参数列表<ul>
<li>id (required, string, <code>sid1</code>)</li>
</ul>
</li>
</ul>
<h2 id="获取最近一次定时任务执行日志-GET"><a href="#获取最近一次定时任务执行日志-GET" class="headerlink" title="获取最近一次定时任务执行日志 [GET]"></a>获取最近一次定时任务执行日志 [GET]</h2><ul>
<li><p>Request (application/text)</p>
<ul>
<li><p>Header</p>
<pre><code>X-Gizwits-Application-Id: {appid}
X-Gizwits-User-token: {token}
</code></pre></li>
</ul>
</li>
<li><p>Response 200 (application/json)</p>
<ul>
<li><p>Body</p>
<pre><code>{
  &quot;datetime&quot;: &quot;2015-01-02T12:00:00&quot;,
  &quot;status&quot;: &quot;succeed|failed&quot;,
  &quot;detail&quot;: {
    &quot;did1&quot;: true,
    &quot;did2&quot;: false
  }
}
</code></pre></li>
</ul>
</li>
</ul>
<h1 id="错误代码"><a href="#错误代码" class="headerlink" title="错误代码"></a>错误代码</h1><table>
<thead>
<tr>
<th>status</th>
<th style="text-align:center">code</th>
<th>message</th>
</tr>
</thead>
<tbody>
<tr>
<td>400</td>
<td style="text-align:center">9001</td>
<td>mac already registered!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9002</td>
<td>product_key invalid</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9003</td>
<td>appid invalid</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9004</td>
<td>token invalid</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9005</td>
<td>user not exist</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9006</td>
<td>token expired</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9007</td>
<td>m2m_id invalid</td>
</tr>
<tr>
<td>500</td>
<td style="text-align:center">9008</td>
<td>server error</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9009</td>
<td>code expired</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9010</td>
<td>code invalid</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9011</td>
<td>sandbox scale quota exhausted!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9012</td>
<td>production scale quota exhausted!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9013</td>
<td>product has no request scale!</td>
</tr>
<tr>
<td>404</td>
<td style="text-align:center">9014</td>
<td>device not found!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9015</td>
<td>form invalid!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9016</td>
<td>did or passcode invalid!</td>
</tr>
<tr>
<td>401</td>
<td style="text-align:center">9017</td>
<td>device not bound!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9018</td>
<td>phone unavailable!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9019</td>
<td>username unavailable!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9020</td>
<td>username or password error!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9021</td>
<td>send command failed!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9022</td>
<td>email unavailable!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9023</td>
<td>device is disabled!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9024</td>
<td>fail to notify m2m!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9025</td>
<td>attr invalid!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9026</td>
<td>user invalid!</td>
</tr>
<tr>
<td>404</td>
<td style="text-align:center">9027</td>
<td>firmware not found!</td>
</tr>
<tr>
<td>404</td>
<td style="text-align:center">9028</td>
<td>JD product info not found!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9029</td>
<td>datapoint data not found!</td>
</tr>
<tr>
<td>404</td>
<td style="text-align:center">9030</td>
<td>scheduler not found!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9031</td>
<td>qq oauth key invalid!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9032</td>
<td>ota upgrade service OK, but in idle or disable!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9033</td>
<td>bt firmware unverified, except verify device!</td>
</tr>
<tr>
<td>404</td>
<td style="text-align:center">9034</td>
<td>bt firmware is OK, but nothing to upgrade!</td>
</tr>
<tr>
<td>500</td>
<td style="text-align:center">9035</td>
<td>Save kairosdb error!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9036</td>
<td>event not defined!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9037</td>
<td>send sms failed!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9038</td>
<td>X-Gizwits-Application-Auth invalid!</td>
</tr>
<tr>
<td>403</td>
<td style="text-align:center">9039</td>
<td>Not allowed to call deprecated API!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9040</td>
<td>bad qrcode content!</td>
</tr>
<tr>
<td>429</td>
<td style="text-align:center">9041</td>
<td>request was throttled</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9042</td>
<td>device offline!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9043</td>
<td>‘X-Gizwits-Timestamp invalid!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9044</td>
<td>X-Gizwits-Signature invalid!</td>
</tr>
<tr>
<td>400</td>
<td style="text-align:center">9045</td>
<td>API deprecated!</td>
</tr>
<tr>
<td>xxx</td>
<td style="text-align:center">9999</td>
<td>reserved</td>
</tr>
</tbody>
</table>

    </div>
    
    <div class="widget-wrapper">
  <span class="widget">
    <a href="https://github.com/gizwits-docs/gizwits-docs/issues" target="_blank" title="问题反馈">
      <span>问题反馈</span>
    </a>
    <a href="#" title="返回顶部"><i class="fa fa-angle-up fa-2x" aria-hidden="true"></i></a>
  </span>
</div>
  </div>
</div>

    <div class="footer">
  <div class="container">
    <p>
      <span><a href="http://www.gizwits.com" target="_blank">机智云首页</a></span>
      <span><a href="http://www.gizwits.com/about-us" target="_blank">关于我们</a></span>
      <span><a href="http://www.gizwits.com/about-us#contact-us" target="_blank">联系我们</a></span>
      <span><a href="http://www.gizwits.com/talent/social" target="_blank">加入我们</a></span>
    </p>
    <p>&#169;2011-2016; Gizwits IoT Technology Co., Ltd. 粤ICP备11090211号</p>
  </div>
</div>
    <script src="/js/spin.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.hashchange.min.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/scrollspy.js"></script>
<script src="/js/documentation.js"></script>


<script type="text/javascript" src="http://webchat.7moor.com/javascripts/7moorInit.js?accessId=b01e0430-943a-11e6-8ad7-636675d9e71f&autoShow=true" async='async'></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3787e6b3b29a084fde41f22828d89b7d";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </body>
</html>