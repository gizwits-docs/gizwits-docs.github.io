
<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta charset="utf-8">

  <title>Gizwits Open API（新） - 机智云</title>

  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta name="Description" content="Gizwits Open API（新）-机智云">
  <meta name="keywords" content="Gizwits Open API（新） docs 文档中心 Gizwits">

  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">

  <link rel="stylesheet" href="/css/pure.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/documentation.css">
</head>
  <body>
    <div class="header">
  <div class="container pure-g">
    <span class="brand pure-u-5-24">

      <a href="http://www.gizwits.com" class="logo">
        <img src="/images/logo.png" alt="logo"> 
      </a>
      <a class="text" href="/">文档中心</a>
    </span>
    
    <div class="mobile-header"v>
      <span class="title">机智云 文档中心</span>
      <i class="fa fa-caret-square-o-down fa-lg" aria-hidden="true"></i>
    </div>
    

    <span class="menu pure-u-16-24">
      <ul class="levelA-wrapper">
        
          
            <li class="levelA"><a href="/zh-cn/overview/overview.html">平台概述</a></li>
          
        
          
            <li class="levelA">
              快速入门 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/quickstart/5分钟了解机智云.html">5分钟了解机智云</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/quickstart/设备快速接入.html">设备快速接入机智云</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      App快速接入机智云 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/quickstart/准备工作.html">App开发准备工作</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/quickstart/AndroidAppFrame.html">Android App 快速开发</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/quickstart/iOSAPP快速入门.html">iOS App 快速开发</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/quickstart/noun.html">机智云名词定义解释</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              APP开发 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB has-submenu">
                      App 开源框架 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/iosframe.html">iOS 开源框架说明(含源码)</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/iOS消息推送.html">iOS 消息推送</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/iOS第三方登陆与换肤.html">iOS 第三方登录与换肤</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/Android开源框架使用指南.html">Android 开源框架说明（含源码）</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/Android消息推送.html">Android 消息推送</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/Android第三方登录与换肤.html">Android 第三方登录与换肤</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/AppDev/iOSSDKA2.html">iOS SDK</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/AppDev/AndroidSDKA2.html">Android SDK</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/AppDev/APICloudWifiSDK.html">APICloud SDK</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      更多App开发指南 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/SDK数据透传方法解析.html">SDK数据透传方法解析</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      App开发教学视频 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/开源框架视频教程.html">开源框架使用视频教程</a></li>
                        
                      </ul>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              微信开发 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/WechatDev/了解微信应用开发.html">了解微信应用开发</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/WechatDev/WeChatDev.html">微信应用开发教程</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              设备开发 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/deviceDev/gagent_info.html">GAgent详解</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      MCU开发框架使用说明 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/DevSDK/代码自动生成工具.html">GoKit3代码自动生成工具</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/GoKit3 DEV SDK Common版移植说明.html">GoKit3 DEV SDK Common版移植说明</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      Gokit3介绍 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3/Gokit3开发套件简介.html">Gokit3系列开发套件简介</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3/GoKit3硬件手册.html">Gokit3硬件手册</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      Gokit3 SOC方案 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit3S使用说明书.html">GoKit3(S)使用说明书</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit3S开发套件介绍.html">Gokit3(S)开发套件介绍</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit3S二次开发.html">GoKit3(S)开发环境搭建</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit3S程序详解.html">Gokit3(S)源码详解</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      Gokit3语音开发 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3Voice/GoKit3V使用说明书.html">GoKit3(V)使用说明书</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3Voice/GoKit3V二次开发指南.html">Gokit3(V)开发指南</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3Voice/GoKit3V词条.html">GoKit3(V)词条管理</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3Voice/GoKit3V程序详解.html">Gokit3(V)源码详解</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/deviceDev/Gokit2使用指南.html">Gokit2 使用指南</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      调试与烧写 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/串口工具使用文档.html">串口工具使用文档</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/HF-LPB100串口烧写说明.html">HF-LPB100串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/debug/HF-LPT120.html">HF-LPT120串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/MXCHIP串口烧写说明.html">MXCHIP串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/ESP8266串口烧写说明.html">ESP8266串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/产测工具使用文档.html">产测工具使用文档</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/日志抓取教程文档.html">日志抓取教程文档</a></li>
                        
                      </ul>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              云平台 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/ent_dev.html">企业应用开发</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/noti1.0.html">消息代理服务</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/enterprise_api.html">企业API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/openapi_apps.html">Open API 指南</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/WebsocketAPI.html">WebSocketAPI</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/NotificationAPI.html">Notification API</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              用户手册 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/UserManual/OTA使用教程.html">OTA使用教程</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/UserManual/echo.html">接入亚马逊ECho教程</a></li>
                  
                
              </ul>
            </li>
          
        
      </ul>
    </span>
  
    <span class="pure-u-3-24 lang-switch-wrapper">
      <i class="fa fa-globe" aria-hidden="true"></i> 
      
        <button class="lang-switch" data-lang="en-us">English</button>
      
    </span>

  </div>
</div>
    <div class="body">
  
  <div class="container clearfix">
    <div class="navigation">
      <div class="navigation-inner">
        <div class="nav-title">目录</div>
        <div class="nav"></div>
      </div>
    </div>
    <div class="markdown-body" data-spy="scroll" data-target=".navigation">
      <div class="heading">
        <div class="title">Gizwits Open API（新）</div>
        <a class="edit-link" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> 文档编辑</a>
      </div>
      <p>旧版文档可查看：<a href="/zh-cn/Cloud/OpenAPI.html">Open API旧版文档</a></p>
<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><h2 id="什么是机智云-Open-API"><a href="#什么是机智云-Open-API" class="headerlink" title="什么是机智云 Open API ?"></a>什么是机智云 Open API ?</h2><p>机智云是一个开放的物联网设备平台，它为企业和个人开发者提供设备接入、用户账号管理、用户与设备绑定管理、设备远程监控、定时任务以及设备高级数据等服务。</p>
<p>这些数据都是存储在机智云的数据库中的。那么作为开发者，如何去访问这些数据呢？</p>
<p>Open API 就是机智云对外提供这些数据的访问接口！</p>
<h2 id="机智云-Open-API-能完成什么功能"><a href="#机智云-Open-API-能完成什么功能" class="headerlink" title="机智云 Open API 能完成什么功能 ?"></a>机智云 Open API 能完成什么功能 ?</h2><p>根据机智云提供的服务，Open API 提供如下功能:</p>
<ul>
<li>用户管理，比如用户的注册、登录、密码重置等功能</li>
<li>消息中心，比如用户读取、删除系统消息等功</li>
<li>绑定管理，比如用户与设备的绑定、解绑等功能</li>
<li>设备分享，比如用户把自己的绑定设备分享给其他用户，解绑其他用户对自己设备的绑定等</li>
<li>设备远程监控，比如获取设备的当前状态、设备上报的原始数据、设备的上下线记录、设备的远程控制等功能</li>
<li>定时任务管理，设备定时任务的增删改查等</li>
<li>高级数据接口，比如对设备上报的数据按天取最大值、平均值等</li>
<li>系统信息，比如查看当前 Open API 版本，获取所有可能的错误列表等</li>
</ul>
<h2 id="如何调用机智云-Open-API"><a href="#如何调用机智云-Open-API" class="headerlink" title="如何调用机智云 Open API ?"></a>如何调用机智云 Open API ?</h2><p>机智云 Open API 是 RESTful 风格的 HTTP API，您可以使用任何标准的 HTTP 客户端访问机智云 Open API。</p>
<p>各种编程语言一般都有现成的 HTTP 客户端可以使用。</p>
<p>推荐 HTTP 客户端：</p>
<ul>
<li><a href="https://www.getpostman.com/" target="_blank" rel="external">GUI 客户端 PostMan</a></li>
<li>命令行客户端 curl</li>
</ul>
<h2 id="机智云-Open-API-所需要的头部信息"><a href="#机智云-Open-API-所需要的头部信息" class="headerlink" title="机智云 Open API 所需要的头部信息"></a>机智云 Open API 所需要的头部信息</h2><h3 id="X-Gizwits-Application-Id"><a href="#X-Gizwits-Application-Id" class="headerlink" title="X-Gizwits-Application-Id"></a>X-Gizwits-Application-Id</h3><p>X-Gizwits-Application-Id 简称 AppID，是一个应用在机智云平台中的唯一标识，所有 OpenAPI 接口都需要传入这个头部参数。</p>
<p>在开发者中心的产品页面中，点击左边栏的”应用配置”菜单，创建一个应用即可获得一个 AppID:</p>
<p><img src="/assets/zh-cn/cloud/get-appid.png" alt="Get AppID"></p>
<h3 id="X-Gizwits-User-token"><a href="#X-Gizwits-User-token" class="headerlink" title="X-Gizwits-User-token"></a>X-Gizwits-User-token</h3><p>X-Gizwits-User-token 简称 UserToken，它代表着接口调用中的用户上下文。</p>
<p>UserToken 具有有效期，默认为 7 天。</p>
<p>可以通过用户注册或者登录接口获取 UserToken，返回字段中的 token 就是 UserToken，expire_at 表示 UserToken 过期的时间戳：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;uid&quot;: &quot;29db4f0d806e451a84264ba3da64d9de&quot;,</div><div class="line">  &quot;token&quot;: &quot;86a0ee91548f4971832e371811702316&quot;,</div><div class="line">  &quot;expire_at&quot;: 13894002020</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>每次登录可以获取一个新的 UserToken，新旧 UserToken 都可以使用。</p>
<p>因为机智云 Open API 大多数的接口都是与用户相关的，所以一般的接口调用顺序如下：</p>
<ul>
<li>判断本地是否有 UserToken，以及 UserToken 是否过期</li>
<li>如果不存在 UserToken 或者 UserToken 过期，调用用户登录接口，获取并保存 UserToken</li>
<li>使用 UserToken 调用其它接口</li>
</ul>
<h2 id="如何在线调试机智云-Open-API"><a href="#如何在线调试机智云-Open-API" class="headerlink" title="如何在线调试机智云 Open API ?"></a>如何在线调试机智云 Open API ?</h2><p>我们提供了在线 API 调试工具，在每个接口描述中，都会给出对应的调试接口链接。</p>
<p>下面以用户登录为例，说明 API 调试工具的使用：</p>
<ul>
<li>点击 <a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_login" target="_blank" rel="external">用户登录</a> 进入接口调试页面</li>
<li>接口右边有个红色叹号，点击后弹出对话框，提示需要输入的头部信息</li>
<li>该接口需要输入 X-Gizwits-Application-Id，根据前面的说明获取 AppID 并填入，点击 “Authorize” 进行授权</li>
<li>页面自动刷新，并且叹号变成蓝色，表示需要输入的头部信息已填写（已填写并不一定表示值是正确的，如果值错误，会反应在接口返回内容中）</li>
<li>在参数输入框中输入参数值（点击参数右边的 Example Value 黄色框框，可以快速输入示例 JSON）</li>
<li>点击 “试一下” 按钮，即可完成接口调用</li>
<li>接口调用完成，会显示本地调用等效的 curl 语句，请求 URL，响应体，响应码和响应头</li>
</ul>
<h1 id="机智云-Open-API-指南"><a href="#机智云-Open-API-指南" class="headerlink" title="机智云 Open API 指南"></a>机智云 Open API 指南</h1><p>机智云所有接口定义可以在<a href="http://swagger.gizwits.com/doc/index/openapi_apps" target="_blank" rel="external">调试接口</a>页面中查看。</p>
<p>下面对各分类接口的典型调用场景进行说明。</p>
<h2 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h2><h3 id="用户注册"><a href="#用户注册" class="headerlink" title="用户注册"></a>用户注册</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_users" target="_blank" rel="external">调试接口</a></p>
<p>有以下几种方式可以注册用户：</p>
<ul>
<li>匿名注册，通过唯一的 phone_id 创建用户</li>
<li>普通用户，通过 username 和 passowrd 创建用户</li>
<li>手机用户，通过 phone, password 和 code（短信验证码）创建用户，短信验证码的获取参考下面章节</li>
<li>邮箱用户，通过 email 和 password 创建用户</li>
<li>第三方登录用户，目前支持 QQ、百度、新浪微博，如使用 QQ 第三方登录，请查阅下面章节</li>
</ul>
<h3 id="使用-QQ-登录"><a href="#使用-QQ-登录" class="headerlink" title="使用 QQ 登录"></a>使用 QQ 登录</h3><p>TODO</p>
<h3 id="短信验证码"><a href="#短信验证码" class="headerlink" title="短信验证码"></a>短信验证码</h3><p>短信验证码的主要用途有：</p>
<ul>
<li>手机号用户注册</li>
<li>手机号用户重置密码</li>
<li>其他您认为需要短信验证码的敏感操作</li>
</ul>
<p>获取短信验证码有两种方式，一种不需要图片验证码，一种需要图片验证码，您可以根据实际的应用场景选择两种不同的方法。</p>
<h4 id="不需要图片验证码"><a href="#不需要图片验证码" class="headerlink" title="不需要图片验证码"></a>不需要图片验证码</h4><ul>
<li>调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_request_token" target="_blank" rel="external">获取 App Token</a>接口获取 App Token</li>
<li>调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_sms_code" target="_blank" rel="external">获取短信验证码</a>接口发送短信验证码</li>
</ul>
<h4 id="需要图片验证码"><a href="#需要图片验证码" class="headerlink" title="需要图片验证码"></a>需要图片验证码</h4><ul>
<li>调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_request_token" target="_blank" rel="external">获取 App Token</a>接口获取 App Token</li>
<li>调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/get_app_verify_codes" target="_blank" rel="external">获取图片验证码</a>接口，返回的 captcha_url 就是图片验证码的 URL，将图片显示给用户</li>
<li>调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_verify_codes" target="_blank" rel="external">校验图片验证码并发送短信</a>接口，发送短信验证码</li>
</ul>
<h4 id="校验短信验证码"><a href="#校验短信验证码" class="headerlink" title="校验短信验证码"></a>校验短信验证码</h4><p>手机号用户注册和重置密码时，您不需要也不能去验证短信验证码，只需要将用户输入的短信验证码传入对应接口，机智云会自动进行校验。</p>
<p>当您将短信验证码用于其他敏感操作校验时，才需要手动校验。调用 <a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_sms_code" target="_blank" rel="external">校验短信验证码</a> 接口即可完成校验。</p>
<p>短信验证码正确校验后立即失效，默认有效期为 24 小时。</p>
<h3 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a>用户登录</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_login" target="_blank" rel="external">调试接口</a></p>
<p>注意：匿名用户和第三方登录用户调用用户注册接口进行登录。</p>
<h3 id="修改用户信息"><a href="#修改用户信息" class="headerlink" title="修改用户信息"></a>修改用户信息</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/put_app_users" target="_blank" rel="external">调试接口</a></p>
<p>您可以修改以下用户信息：</p>
<ul>
<li>匿名用户转普通/手机/邮箱用户</li>
<li>修改密码</li>
<li>修改手机号</li>
<li>设置用户昵称、性别、生日、地址、备注等信息</li>
</ul>
<h3 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a>获取用户信息</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/get_app_users" target="_blank" rel="external">调试接口</a></p>
<p>该接口可以获取用户详细信息。</p>
<h3 id="重置密码"><a href="#重置密码" class="headerlink" title="重置密码"></a>重置密码</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_reset_password" target="_blank" rel="external">调试接口</a></p>
<p>手机号用户重置密码需要先获取短信验证码。</p>
<h2 id="消息中心"><a href="#消息中心" class="headerlink" title="消息中心"></a>消息中心</h2><h3 id="获取消息列表"><a href="#获取消息列表" class="headerlink" title="获取消息列表"></a>获取消息列表</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/消息中心/get_app_messages" target="_blank" rel="external">调试接口</a></p>
<h3 id="标记已读和删除"><a href="#标记已读和删除" class="headerlink" title="标记已读和删除"></a>标记已读和删除</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/消息中心/put_app_messages_id" target="_blank" rel="external">调试接口</a></p>
<h2 id="绑定管理"><a href="#绑定管理" class="headerlink" title="绑定管理"></a>绑定管理</h2><h3 id="绑定设备"><a href="#绑定设备" class="headerlink" title="绑定设备"></a>绑定设备</h3><p>可以通过一下两种方式绑定设备：</p>
<ul>
<li>通过 product_key 和 MAC 地址绑定设备</li>
<li>通过二维码绑定设备，二维码内容为 product_key 和 MAC 加密后的内容，所以本质上和上面一种方式一样</li>
</ul>
<h4 id="通过-product-key-和-MAC-地址绑定设备"><a href="#通过-product-key-和-MAC-地址绑定设备" class="headerlink" title="通过 product_key 和 MAC 地址绑定设备"></a>通过 product_key 和 MAC 地址绑定设备</h4><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/post_app_bind_mac" target="_blank" rel="external">调试接口</a></p>
<h4 id="通过二维码绑定设备"><a href="#通过二维码绑定设备" class="headerlink" title="通过二维码绑定设备"></a>通过二维码绑定设备</h4><h5 id="二维码生成"><a href="#二维码生成" class="headerlink" title="二维码生成"></a>二维码生成</h5><p>TODO</p>
<h5 id="绑定设备-1"><a href="#绑定设备-1" class="headerlink" title="绑定设备"></a>绑定设备</h5><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/post_app_bind_latest" target="_blank" rel="external">调试接口</a></p>
<p>把扫描到的二维码内容作为 qr_content 的值入。</p>
<h3 id="获取绑定列表"><a href="#获取绑定列表" class="headerlink" title="获取绑定列表"></a>获取绑定列表</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/get_app_bindings" target="_blank" rel="external">调试接口</a></p>
<h3 id="修改绑定信息"><a href="#修改绑定信息" class="headerlink" title="修改绑定信息"></a>修改绑定信息</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/put_app_bindings_did" target="_blank" rel="external">调试接口</a></p>
<p>用户可以对绑定的设备修改别名和备注。</p>
<p>同一个设备被多个用户绑定，每个用户都可以对该设备设置别名和备注，互不冲突。</p>
<h3 id="解除绑定"><a href="#解除绑定" class="headerlink" title="解除绑定"></a>解除绑定</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/delete_app_bindings" target="_blank" rel="external">调试接口</a></p>
<h3 id="Owner-查询与设备绑定的所有-Guest-用户"><a href="#Owner-查询与设备绑定的所有-Guest-用户" class="headerlink" title="Owner 查询与设备绑定的所有 Guest 用户"></a>Owner 查询与设备绑定的所有 Guest 用户</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/get_app_did_bindings" target="_blank" rel="external">调试接口</a></p>
<h3 id="Owner-解除-Guest-用户对设备的绑定"><a href="#Owner-解除-Guest-用户对设备的绑定" class="headerlink" title="Owner 解除 Guest 用户对设备的绑定"></a>Owner 解除 Guest 用户对设备的绑定</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/delete_app_did_bindings" target="_blank" rel="external">调试接口</a></p>
<h2 id="设备分享"><a href="#设备分享" class="headerlink" title="设备分享"></a>设备分享</h2><p>第一个绑定设备的用户对设备具有控制权，称为设备 Owner，Owner 可以将设备分享给其他设备。被分享的用户称为 Guest。</p>
<p>Owner 分享设备之后，可以随时取消分享，或者解绑 Guest 对设备的绑定。</p>
<p>Guest 也可以主动解绑设备。</p>
<p>设备分享的主要有两种方式：</p>
<ul>
<li>普通设备分享</li>
<li>通过二维码分享设备</li>
</ul>
<h3 id="普通设备分享"><a href="#普通设备分享" class="headerlink" title="普通设备分享"></a>普通设备分享</h3><ul>
<li>Owner 选择一个要分享的设备，调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/post_app_sharing" target="_blank" rel="external">创建分享邀请</a>接口创建分享邀请</li>
<li>Guest 将会收到一条设备分享消息</li>
<li>Guest 调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/get_app_sharing" target="_blank" rel="external">查询分享邀请</a>接口，查询分享给自己的邀请</li>
<li>Guest 调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/put_app_sharing_id" target="_blank" rel="external">接受分享邀请</a>接口接受邀请</li>
<li>Owner 和 Guest 都将收到一条设备分享消息</li>
</ul>
<h3 id="通过二维码分享设备"><a href="#通过二维码分享设备" class="headerlink" title="通过二维码分享设备"></a>通过二维码分享设备</h3><ul>
<li>Owner 选择一个要分享的设备，调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/post_app_sharing" target="_blank" rel="external">创建分享邀请</a>接口创建分享邀请</li>
<li>接口返回字段中的 qr_url 表示二维码图片的链接，二维码包含邀请码内容，Owner 将二维码图片展示给 Guest</li>
<li>Guest 扫描二维码，获取邀请码，调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/get_app_sharing_code_code" target="_blank" rel="external">根据邀请码查询分享邀请接口</a>接口，查看分享内容</li>
<li>Guest 调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/post_app_sharing_code_code" target="_blank" rel="external">扫码接受分享邀请</a>接口，接受分享邀请</li>
<li>Owner 和 Guest 都将收到一条设备分享消息</li>
</ul>
<h3 id="Owner-取消设备分享"><a href="#Owner-取消设备分享" class="headerlink" title="Owner 取消设备分享"></a>Owner 取消设备分享</h3><ul>
<li>Owner 调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/get_app_sharing" target="_blank" rel="external">查询分享邀请</a>接口，查询分享出去的邀请</li>
<li>Owner 选择一个要取消的分享邀请，调用<a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/delete_app_sharing_id" target="_blank" rel="external">取消分享邀请</a>接口，取消分享</li>
<li>Guest 用户对设备的绑定被取消，同时，Owner 和 Guest 都将收到一条设备分享消息</li>
</ul>
<h2 id="设备远程监控"><a href="#设备远程监控" class="headerlink" title="设备远程监控"></a>设备远程监控</h2><h3 id="获取设备详情"><a href="#获取设备详情" class="headerlink" title="获取设备详情"></a>获取设备详情</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备远程监控/get_app_devices_did" target="_blank" rel="external">调试接口</a></p>
<h3 id="获取设备最近一次上报的数据"><a href="#获取设备最近一次上报的数据" class="headerlink" title="获取设备最近一次上报的数据"></a>获取设备最近一次上报的数据</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备远程监控/get_app_devdata_did_latest" target="_blank" rel="external">调试接口</a></p>
<p>该接口获取的是 24 小时内，设备最近一次上报的数据点值。</p>
<h3 id="获取设备的通信日志和上下线记录"><a href="#获取设备的通信日志和上下线记录" class="headerlink" title="获取设备的通信日志和上下线记录"></a>获取设备的通信日志和上下线记录</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备远程监控/get_app_devices_did_raw_data" target="_blank" rel="external">调试接口</a></p>
<h3 id="远程控制设备"><a href="#远程控制设备" class="headerlink" title="远程控制设备"></a>远程控制设备</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备远程监控/post_app_control_did" target="_blank" rel="external">调试接口</a></p>
<h2 id="定时任务接口"><a href="#定时任务接口" class="headerlink" title="定时任务接口"></a>定时任务接口</h2><h3 id="创建定时任务"><a href="#创建定时任务" class="headerlink" title="创建定时任务"></a>创建定时任务</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/定时任务管理/post_app_devices_did_scheduler" target="_blank" rel="external">调试接口</a></p>
<p>定时任务分为如下几类：</p>
<ul>
<li>一次性定时任务</li>
<li>按星期重复定时任务</li>
<li>按天重复定时任务</li>
</ul>
<p>每个定时任务都可以设置使能状态，只有开启状态的定时任务才会被执行。</p>
<p>重复执行的定时任务需要设置开始和结束日志。</p>
<p>一个定时任务可以一次性设置多个数据点。</p>
<h3 id="获取定时任务"><a href="#获取定时任务" class="headerlink" title="获取定时任务"></a>获取定时任务</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/定时任务管理/get_app_devices_did_scheduler" target="_blank" rel="external">调试接口</a></p>
<h3 id="修改定时任务"><a href="#修改定时任务" class="headerlink" title="修改定时任务"></a>修改定时任务</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/定时任务管理/put_app_devices_did_scheduler_id" target="_blank" rel="external">调试接口</a></p>
<h3 id="删除定时任务"><a href="#删除定时任务" class="headerlink" title="删除定时任务"></a>删除定时任务</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/定时任务管理/delete_app_devices_did_scheduler_id" target="_blank" rel="external">调试接口</a></p>
<h2 id="高级数据接口"><a href="#高级数据接口" class="headerlink" title="高级数据接口"></a>高级数据接口</h2><h3 id="获取设备聚合数据"><a href="#获取设备聚合数据" class="headerlink" title="获取设备聚合数据"></a>获取设备聚合数据</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/高级数据接口//get_app_devdata_did_agg_data" target="_blank" rel="external">调试接口</a></p>
<p>该接口可以对设备上报的数值型数据点数据进行聚合，可以按小时/天/周/月对数据点数据进行求和/平均值/最大值/最小值进行聚合。</p>
<p>一次可以获取多个数据点的聚合数据。</p>
<p>要使用该接口，必须先请求开通该接口。请求通过的之后上报的数据才会进行聚合运算。</p>
<h2 id="系统信息"><a href="#系统信息" class="headerlink" title="系统信息"></a>系统信息</h2><h3 id="查询-Open-API-版本"><a href="#查询-Open-API-版本" class="headerlink" title="查询 Open API 版本"></a>查询 Open API 版本</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/系统信息/get_status" target="_blank" rel="external">调试接口</a></p>
<h3 id="获取-Open-API-所有的错误码"><a href="#获取-Open-API-所有的错误码" class="headerlink" title="获取 Open API 所有的错误码"></a>获取 Open API 所有的错误码</h3><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/系统信息/get_errors" target="_blank" rel="external">调试接口</a></p>

    </div>
    
    <div class="widget-wrapper">
  <span class="widget">
    <a href="https://github.com/gizwits-docs/gizwits-docs/issues" target="_blank" title="问题反馈">
      <span>问题反馈</span>
    </a>
    <a href="#" title="返回顶部"><i class="fa fa-angle-up fa-2x" aria-hidden="true"></i></a>
  </span>
</div>
  </div>
</div>

    <div class="footer">
  <div class="container">
    <p>
      <span><a href="http://www.gizwits.com" target="_blank">机智云首页</a></span>
      <span><a href="http://www.gizwits.com/about-us" target="_blank">关于我们</a></span>
      <span><a href="http://www.gizwits.com/about-us#contact-us" target="_blank">联系我们</a></span>
      <span><a href="http://www.gizwits.com/talent/social" target="_blank">加入我们</a></span>
    </p>
    <p>&#169;2011-2016; Gizwits IoT Technology Co., Ltd. 粤ICP备11090211号</p>
  </div>
</div>
    <script src="/js/spin.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.hashchange.min.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/scrollspy.js"></script>
<script src="/js/documentation.js"></script>


<script type="text/javascript" src="http://webchat.7moor.com/javascripts/7moorInit.js?accessId=b01e0430-943a-11e6-8ad7-636675d9e71f&autoShow=true" async='async'></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3787e6b3b29a084fde41f22828d89b7d";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </body>
</html>