
<!DOCTYPE html>
<html lang="zh-cn">
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <title>Gizwits Open API（新） - 机智云</title>

  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta name="Description" content="Gizwits Open API（新）-机智云">
  <meta name="keywords" content="Gizwits Open API（新） docs 文档中心 Gizwits">

  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">
  <script src="/js/redirect.js"></script>

  <link rel="stylesheet" href="/css/pure.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/documentation.css?v=db6111caa3d210b6cb1d2dac5119d7c5">
  <link rel="stylesheet" href="/css/share.min.css">
</head>
  <body>
    <div class="header">
  <div class="container pure-g">
    <span class="brand pure-u-5-24">
      <a href="http://www.gizwits.com" class="logo">
      
      <img src="/images/logo.png" alt="logo">
      
      </a>
      <a class="text" href="/">文档中心</a>
    </span>

    <div class="mobile-header" v>
      <span class="title">机智云 文档中心</span>
      <i class="fa fa-caret-square-o-down fa-lg" aria-hidden="true"></i>
    </div>

    <span class="menu pure-u-16-24">
      <span class="header-search-btn" id="header-search-btn">
        <i class="fa fa-search"></i>
      </span>
      <ul class="levelA-wrapper">
        
          
            <li class="levelA"><a href="/zh-cn/overview/overview.html">平台概述</a></li>
          
        
          
            <li class="levelA">
              快速入门 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/quickstart/5分钟了解机智云.html">5分钟了解机智云</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/quickstart/noun.html">机智云名词定义解释</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              应用开发 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/quickstart/准备工作.html">App开发准备工作及向导</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/UserManual/devApp.html">App代码自动生成服务介绍</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      App 开源框架 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/iosframe.html">iOS 开源框架说明(含源码)</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/iOS消息推送.html">iOS 消息推送</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/iOS第三方登陆与换肤.html">iOS 第三方登录与换肤</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/quickstart/iOSAPPFrame.html">iOS开源框架的快速开发实例</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/Android开源框架使用指南.html">Android 开源框架说明（含源码）</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/Android消息推送.html">Android 消息推送</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/Android第三方登录与换肤.html">Android 第三方登录与换肤</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/quickstart/AndroidAppFrame.html">Android开源框架的快速开发实例</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/APICloudFrame.html">APICloud开源框架使用指南(含源码)</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/开源框架视频教程.html">开源框架使用视频教程</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      App 开发 SDK &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/iOSSDKA2.html">iOS SDK</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/AndroidSDKA2.html">Android SDK</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/APICloudWifiSDK.html">APICloud SDK</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/SDK数据透传方法解析.html">SDK数据透传方法解析</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/SDK调试日志抓取教程.html">SDK调试日志抓取教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/sdk_error.html">SDK错误码列表</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/WechatDev/了解微信应用开发.html">了解微信应用开发</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/WechatDev/WeChatDev.html">微信应用开发教程</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      更多教程 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/Cloud/SharingSDK.html">设备分享功能SDK使用流程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/AppDev/third-party.html">第三方登录平台申请流程</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/AppDev/应用开发FAQ.html">应用开发FAQ</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              设备接入 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/deviceDev/设备接入准备工作及向导.html">设备接入准备工作及向导</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      设备快速接入机智云 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/quickstart/UseMCU.html">独立MCU接入方案</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/UseSOC.html">ESP8266-SOC接入方案</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/module_source/module_source.html">模块硬件资料</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      GAgent通讯模组使用教程 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/gagent_info.html">GAgent详细介绍</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/串口工具使用文档.html">串口工具使用文档</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/debug/GN511_use.html">GN511使用说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/HF-LPB100串口烧写说明.html">HF-LPB100串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/debug/HF-LPT120.html">HF-LPT120串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/debug/HF-LPT230.html">HF-LPT230串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/MXCHIP串口烧写说明.html">MXCHIP串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/ESP8266串口烧写说明.html">ESP8266串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/debug/ESP-WROOM-02Duart.html">ESP-WROOM-02D串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/debug/G510.html">广和通G510模组烧写方法</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/debug/N102_DTU.html">零零 N102 串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/debug/Air202.html">合宙 Air202 串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/debug/NC3_uart.html">域格 NC3 串口烧写说明</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/debug/NB_Project.html">NB 接入方案</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/通讯模组调试日志抓取教程.html">通讯模组调试日志抓取教程</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      MCU代码自动生成服务介绍 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/DevSDK/代码自动生成工具.html">MCU代码自动生成工具使用教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/GoKit3_DEV_SDK_Common_transplant.html">MCU SDK 通用平台移植教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/STM32CubeMX_transplant.html">STM32CubeMX移植机智云自动生成代码详解</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/approach_to_tailoring_8051.html">8051平台最小资源裁剪说明</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      开源套件Gokit资料 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit2使用指南.html">Gokit2 使用指南</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3/Gokit3开发套件简介.html">Gokit3系列开发套件简介</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3/GoKit3硬件手册.html">Gokit3硬件手册</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit3S使用说明书.html">GoKit3(S)使用说明书</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit3S开发套件介绍.html">Gokit3(S)开发套件介绍</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit3S二次开发.html">GoKit3(S)开发环境搭建</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/WiFiSOC/GoKit-SoC-explanation.html">GoKit-SoC程序详解</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit3Voice/GoKit-MCU-explanation.html">GoKit-MCU程序详解</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/Gokit4/Gokit4_Dev_Assets.html">Gokit4(G) SoC开发环境搭建、开发指南</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      开发套件Arduino资料 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/ArduinoUNO/ArduinoUNOWiFi_intro.html">ArduinoUNOWiFi接入机智云介绍</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/ArduinoUNO/Tutorial.html">ArduinoUnoWiFi 之ESP8266固件烧写教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/ArduinoUNO/ArduinoUnoWiFi_SDK_API.html">ArduinoUnoWiFi SDK之API介绍</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/ArduinoUNO/example.html">Arduino Uno WiFi智能小夜灯</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      更多接入指南 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/ecevideos.html">ECE Demo开发教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/串口工具使用文档.html">串口工具使用文档</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/STICubeGizwits/STICubeGizwits.html">ST I-CUBE-GizWits套件快速接入指南</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/deviceDev/Onboarding.html">Airlink配网排查引导</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/deviceDev/设备接入FAQ.html">设备接入FAQ</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              云API &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/openapi_apps.html">Open API 指南</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/ent_dev.html">企业应用开发</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/enterprise_api.html">企业API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/NotificationAPI.html">SNoti API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/WebsocketAPI.html">WebSocketAPI</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      API使用教程 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/UseOpenAPI.html">使用OpenAPI控制虚拟设备教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/UseSNoti.html">Snoti数据实时同步服务demo使用教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/UseWebsocket.html">使用Websocket 网页控制设备教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/DataAPI.html">使用聚合API教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/LinkageAPI.html">设备联动API使用教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/devgroup_API.html">设备分组API使用教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/UseQRCode.html">APP绑定设备二维码生成教程</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/Cloud/CloudFAQ.html">云端应用FAQ</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              用户手册 &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/zh-cn/UserManual/change.html">个人项目产品转企业项目产品</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      OTA使用教程 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/OTA.html">GAgent OTA教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/MCUOTA.html">MCU OTA教程</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/deviceDev/产测工具使用文档.html">产测工具使用文档</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/UserManual/D3.html">D3 Engine使用教程</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/UserManual/ece.html">ECE雾计算使用教程</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      语音音箱接入教程 &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/echo.html">接入Echo开发教程</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/deviceDev/echo.html">使用Echo音箱控制GoKit</a></li>
                        
                          <li class="levelC"><a href="/zh-cn/UserManual/Google_Home_GoKit.html">使用Google Home音箱控制GoKit</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/UserManual/rtbd.html">实时大数据使用教程</a></li>
                  
                
                  
                    <li class="levelB"><a href="/zh-cn/UserManual/WorldWideConnectSolution.html">全球部署方案</a></li>
                  
                
              </ul>
            </li>
          
        
      </ul>
    </span>

    <span class="pure-u-3-24 lang-switch-wrapper">

      <i class="fa fa-globe" aria-hidden="true"></i>
      
      <a href="/en-us/overview/overview.html" class="lang-switch">English</a>
      
    </span>
  </div>

  <div class="header-search-panel" id="header-search-panel">
    <span class="header-search-close" id="header-search-close"><i class="fa fa-times" aria-hidden="true"></i></span>
    <div class="header-search-input-wrap" id="header-search-input-wrap">
      <input type="text" class="header-search-input" id="header-search-input" placeholder="请输入关键字">
      <span class="header-search-input-icon"><i class="fa fa-search"></i></span>
    </div>

    <div class="header-search-trend" id="header-search-trend">
      <div class="header-search-trend-title">热搜词</div>
      <div class="header-search-trend-items clearfix">
        
        <div class="header-search-trend-item" data-word="APP">APP</div>
        
        <div class="header-search-trend-item" data-word="SDK">SDK</div>
        
        <div class="header-search-trend-item" data-word="Android">Android</div>
        
        <div class="header-search-trend-item" data-word="ios">ios</div>
        
        <div class="header-search-trend-item" data-word="WIFI">WIFI</div>
        
      </div>
    </div>

    <div class="header-search-result hidden" id="header-search-result">
      <div class="header-search-result-head">
        搜索结果 &gt; <span id="header-search-keyword"></span>
      </div>
      <div class="header-search-result-items" id="header-search-result-items">
      </div>
    </div>
  </div>
</div>

    <div class="body">

  <div class="container clearfix">
    <div class="navigation">
      <div class="navigation-inner">
        <div class="nav-title">目录</div>
        <div class="nav"></div>
      </div>
    </div>
    <div class="markdown-body" data-spy="scroll" data-target=".navigation">
      <div class="heading">
        <div class="title">Gizwits Open API（新）</div>
        <a class="edit-link" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> 文档编辑</a>
      </div>
      <ul>
<li>Windows 平台按 Ctrl + F 打开快捷搜索</li>
<li>Mac 平台按 command + F 打开快捷搜索</li>
</ul>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>机智云是一个开放的物联网设备平台，它为企业和个人开发者提供设备接入、用户账号管理、用户与设备绑定管理、设备远程监控、定时任务以及设备高级数据等服务。</p>
<p>这些数据都是存储在机智云的数据库中的。那么作为开发者，如何去访问这些数据呢？</p>
<p>Open API 就是机智云对外提供这些数据的访问接口！</p>
<h1 id="接口列表"><a href="#接口列表" class="headerlink" title="接口列表"></a>接口列表</h1><p>根据机智云提供的服务，Open API 提供如下功能:</p>
<ul>
<li><a href="#用户管理">用户管理</a>：用户的注册、登录、密码重置等功能</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#获取用户信息">get_app_users</a></td>
<td>获取用户信息</td>
</tr>
<tr>
<td><a href="#创建用户">post_app_users</a></td>
<td>创建新用户</td>
</tr>
<tr>
<td><a href="#修改用户信息">put_app_users</a></td>
<td>修改用户信息</td>
</tr>
<tr>
<td><a href="#用户登录">post_app_login</a></td>
<td>用户登录</td>
</tr>
<tr>
<td><a href="#获取APP-Token">post_app_request_token</a></td>
<td>获取APP Token</td>
</tr>
<tr>
<td><a href="#请求重置密码">post_app_reset_password</a></td>
<td>请求重置密码</td>
</tr>
<tr>
<td><a href="#验证码的获取和校验">post_app_sms_code</a></td>
<td>验证码的获取和校验</td>
</tr>
<tr>
<td><a href="#获取图片验证码">get_app_verify_codes</a></td>
<td>获取图片验证码</td>
</tr>
<tr>
<td><a href="#校验图片验证码">post_app_verify_codes</a></td>
<td>校验图片验证码</td>
</tr>
<tr>
<td><a href="#校验短信验证码">put_app_verify_codes</a></td>
<td>校验短信验证码</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#消息中心">消息中心</a>：用户查看消息、标记已读和删除系统消息等功能</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#查询消息列表">get_app_messages</a></td>
<td>查询消息列表</td>
</tr>
<tr>
<td><a href="#标记已读和删除消息">put_app_messages</a></td>
<td>标记消息已读和删除</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#绑定管理">绑定管理</a>：用户与设备的绑定、解绑等功能</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#通过-MAC-地址绑定设备">post_app_bind_mac</a></td>
<td>通过 MAC 地址绑定设备</td>
</tr>
<tr>
<td><a href="#解除设备">delete_app_bindings</a></td>
<td>解除设备</td>
</tr>
<tr>
<td><a href="#获取绑定列表">get_app_bindings</a></td>
<td>获取绑定列表</td>
</tr>
<tr>
<td><a href="#通过二维码绑定设备">post_app_bind_latest</a></td>
<td>通过二维码绑定设备</td>
</tr>
<tr>
<td><a href="#修改绑定信息">put_app_bindings_did</a></td>
<td>修改绑定信息</td>
</tr>
<tr>
<td><a href="#解绑-Guest-用户">get_app_did_bindings</a></td>
<td>解绑 Guest 用户</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#设备远程监控">设备远程监控</a>:获取设备的当前状态、设备上报的原始数据、设备的上下线记录、设备的远程控制等功能</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#获取设备最新状态">get_app_devdata_did_latest</a></td>
<td>获取设备最新状态</td>
</tr>
<tr>
<td><a href="#获取产品数据点定义">get_app_datapoint</a></td>
<td>获取产品数据点定义</td>
</tr>
<tr>
<td><a href="#获取设备详情">get_app_devices_did</a></td>
<td>获取设备详情</td>
</tr>
<tr>
<td><a href="#获取设备的通信日志和上下线记录">get_app_devices_did_raw_data</a></td>
<td>获取设备的通信日志和上下线记录</td>
</tr>
<tr>
<td><a href="#远程控制设备">post_app_control_did</a></td>
<td>远程控制设备</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#设备分享">设备分享</a>:比如用户把自己的绑定设备分享给其他用户，解绑其他用户对自己设备的绑定等</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#查询分享邀请">get_app_sharing</a></td>
<td>查询分享邀请</td>
</tr>
<tr>
<td><a href="#创建分享邀请">post_app_sharing</a></td>
<td>创建分享邀请</td>
</tr>
<tr>
<td><a href="#取消-收回分享">delete_app_sharing_id</a></td>
<td>取消/收回分享</td>
</tr>
<tr>
<td><a href="#接受/拒绝分享">put_app_sharing_id</a></td>
<td>接受/拒绝分享</td>
</tr>
<tr>
<td><a href="#获取二维码分享信息">get_app_sharing_code</a></td>
<td>获取二维码分享信息</td>
</tr>
<tr>
<td><a href="#接受二维码分享邀请">post_app_sharing_code</a></td>
<td>接受二维码分享邀请</td>
</tr>
<tr>
<td><a href="#修改用户备注信息">put_app_sharing_idalias</a></td>
<td>修改用户备注信息</td>
</tr>
<tr>
<td><a href="#owner-权限转移">post_app_sharing_did_transfer</a></td>
<td>owner 权限转移</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#设备分组">设备分组</a>:对多个设备进行分组，发送一次指令就能控制分组下的多个设备</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#查询用户所有的分组">get_app_group</a></td>
<td>查询用户所有的分组</td>
</tr>
<tr>
<td><a href="#创建分组">post_app_group</a></td>
<td>创建分组</td>
</tr>
<tr>
<td><a href="#删除设备分组">delete_app_group_id</a></td>
<td>删除设备分组</td>
</tr>
<tr>
<td><a href="#修改分组信息">put_app_group_id</a></td>
<td>修改分组信息</td>
</tr>
<tr>
<td><a href="#查询分组的设备信息">get_app_group_id_devices</a></td>
<td>查询分组的设备信息</td>
</tr>
<tr>
<td><a href="#将设备列表添加到分组">post_app_group_id_devices</a></td>
<td>将设备列表添加到分组</td>
</tr>
<tr>
<td><a href="#将设备列表从分组移除">delete_app_group_id_devices</a></td>
<td>将设备列表从分组移除</td>
</tr>
<tr>
<td><a href="#对设备分组内的设备统一控制">post_app_group_id_control</a></td>
<td>对设备分组内的设备统一控制</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#设备联动">设备联动</a>:通过创建设备间联动规则，当设备触发规则后，联动控制其他设备。</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#查询规则可用变量">get_app_rules_params</a></td>
<td>查询规则可用变量</td>
</tr>
<tr>
<td><a href="#查询联动规则列表">get_app_rules</a></td>
<td>查询联动规则列表</td>
</tr>
<tr>
<td><a href="#创建联动规则">post_app_rules</a></td>
<td>创建联动规则</td>
</tr>
<tr>
<td><a href="#删除联动规则">delete_app_rules</a></td>
<td>删除联动规则</td>
</tr>
<tr>
<td><a href="#修改联动规则">put_app_rules</a></td>
<td>修改联动规则</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#用户场景">用户场景</a>:用户可通过场景功能预设的一系列设备动作并在需要时触发。</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#查询用户所有的场景">get_app_scene</a></td>
<td>查询用户所有的场景</td>
</tr>
<tr>
<td><a href="#创建场景">post_app_scene</a></td>
<td>创建场景</td>
</tr>
<tr>
<td><a href="#删除场景">delete_app_scene_id</a></td>
<td>删除场景</td>
</tr>
<tr>
<td><a href="#修改场景信息">put_app_scene_id</a></td>
<td>修改场景信息</td>
</tr>
<tr>
<td><a href="#查询场景任务执行状态">get_app_scene_id_task</a></td>
<td>查询场景任务执行状态</td>
</tr>
<tr>
<td><a href="#执行场景任务">post_app_scene_id_task</a></td>
<td>执行场景任务</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#定时任务管理">定时任务管理</a>:设备定时任务的增删改查等</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#获取定时任务">get_app_devices_scheduler</a></td>
<td>获取定时任务</td>
</tr>
<tr>
<td><a href="#创建定时任务">post_app_devices_scheduler</a></td>
<td>创建定时任务</td>
</tr>
<tr>
<td><a href="#删除定时任务">delete_app_devices_scheduler</a></td>
<td>删除定时任务</td>
</tr>
<tr>
<td><a href="#修改定时任务">put_app_devices_scheduler</a></td>
<td>修改定时任务</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#通用定时任务">通用定时任务</a>:可对单个设备、设备分组和场景设置定时任务。</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#获取定时任务-1">get_app_common_scheduler</a></td>
<td>获取定时任务</td>
</tr>
<tr>
<td><a href="#创建定时任务-1">post_app_common_scheduler</a></td>
<td>创建定时任务</td>
</tr>
<tr>
<td><a href="#删除定时任务-1">delete_app_common_scheduler</a></td>
<td>删除定时任务</td>
</tr>
<tr>
<td><a href="#修改定时任务-1">put_app_common_scheduler</a></td>
<td>修改定时任务</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#高级数据接口">高级数据接口</a>:比如对设备上报的数据按天取最大值、平均值等</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#获取设备聚合数据">get_app_bindings</a></td>
<td>获取设备聚合数据</td>
</tr>
</tbody>
</table>
<ul>
<li><a href="#系统信息">系统信息</a>:比如查看当前 Open API 版本，获取所有可能的错误列表等</li>
</ul>
<table>
<thead>
<tr>
<th>API列表</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#get_status">get_status</a></td>
<td>查询服务状态信息</td>
</tr>
<tr>
<td><a href="#get_errors">get_errors</a></td>
<td>错误状态码列表</td>
</tr>
</tbody>
</table>
<h1 id="协议约定"><a href="#协议约定" class="headerlink" title="协议约定"></a>协议约定</h1><h2 id="请求方式"><a href="#请求方式" class="headerlink" title="请求方式"></a>请求方式</h2><p>机智云 Open API 是 RESTful 风格的 HTTP API，您可以使用任何标准的 HTTP 客户端访问机智云 Open API。</p>
<p>推荐 HTTP 客户端：</p>
<ul>
<li><a href="https://www.getpostman.com/" target="_blank" rel="noopener">GUI 客户端 PostMan</a></li>
<li>命令行客户端 curl</li>
</ul>
<h2 id="HTTP头部请求说明"><a href="#HTTP头部请求说明" class="headerlink" title="HTTP头部请求说明"></a>HTTP头部请求说明</h2><h3 id="X-Gizwits-Application-Id"><a href="#X-Gizwits-Application-Id" class="headerlink" title="X-Gizwits-Application-Id"></a>X-Gizwits-Application-Id</h3><p>X-Gizwits-Application-Id 简称 AppID，是一个应用在机智云平台中的唯一标识，所有 OpenAPI 接口都需要传入这个头部参数。</p>
<p>在开发者中心的产品页面中，点击左边栏的”应用配置”菜单，创建一个应用即可获得一个 AppID:</p>
<p><img src="/assets/zh-cn/cloud/get-appid.png" alt="Get AppID"></p>
<h3 id="X-Gizwits-User-token"><a href="#X-Gizwits-User-token" class="headerlink" title="X-Gizwits-User-token"></a>X-Gizwits-User-token</h3><p>X-Gizwits-User-token 简称 UserToken，它代表着接口调用中的用户上下文。</p>
<p>UserToken 具有有效期，默认为 7 天。</p>
<p>可以通过用户注册或者登录接口获取 UserToken，返回字段中的 token 就是 UserToken，expire_at 表示 UserToken 过期的时间戳：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"uid"</span>: <span class="string">"29db4f0d806e451a84264ba3da64d9de"</span>,</span><br><span class="line">  <span class="attr">"token"</span>: <span class="string">"86a0ee91548f4971832e371811702316"</span>,</span><br><span class="line">  <span class="attr">"expire_at"</span>: <span class="number">13894002020</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>每次登录可以获取一个新的 UserToken，新旧 UserToken 都可以使用。</p>
<p>因为机智云 Open API 大多数的接口都是与用户相关的，所以一般的接口调用顺序如下：</p>
<ol>
<li>判断本地是否有 UserToken，以及 UserToken 是否过期</li>
<li>如果不存在 UserToken 或者 UserToken 过期，调用用户登录接口，获取并保存 UserToken</li>
<li>使用 UserToken 调用其它接口</li>
</ol>
<h2 id="加密参数"><a href="#加密参数" class="headerlink" title="加密参数"></a>加密参数</h2><p>统一使用32位加密</p>
<p>lower：小写</p>
<p>UPPER：大写</p>
<p>示例：<br>lower(md5(product_secret + X-Gizwits-Timestamp ))</p>
<p>选择md5，32位[小]进行加密，填入product_secret和X-Gizwits-Timestamp，无需“+”号，如下图所示</p>
<p><img src="/assets/zh-cn/cloud/加密.png" alt="photo"></p>
<h1 id="在线调试-Open-API"><a href="#在线调试-Open-API" class="headerlink" title="在线调试 Open API"></a>在线调试 Open API</h1><p>我们提供了在线 API 调试工具，在每个接口描述中，都会给出对应的调试接口链接。</p>
<p>下面以用户登录为例，说明 API 调试工具的使用：</p>
<ul>
<li>点击 <a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_login" target="_blank" rel="noopener">用户登录</a> 进入接口调试页面</li>
<li>接口右边有个红色叹号，点击后弹出对话框，提示需要输入的头部信息</li>
<li>该接口需要输入 X-Gizwits-Application-Id，根据前面的说明获取 AppID 并填入，点击 “Authorize” 进行授权</li>
<li>页面自动刷新，并且叹号变成蓝色，表示需要输入的头部信息已填写（已填写并不一定表示值是正确的，如果值错误，会反应在接口返回内容中）</li>
<li>在参数输入框中输入参数值（点击参数右边的 Example Value 黄色框框，可以快速输入示例 JSON）</li>
<li>点击 “试一下” 按钮，即可完成接口调用</li>
<li>接口调用完成，会显示本地调用等效的 curl 语句，请求 URL，响应体，响应码和响应头</li>
</ul>
<!--
# 机智云 Open API 指南

机智云所有接口定义可以在[调试接口](http://swagger.gizwits.com/doc/index/openapi_apps)页面中查看。

下面对各分类接口的典型调用场景进行说明。
-->
<h1 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h1><h2 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a><span id="post_app_users">创建用户</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_users" target="_blank" rel="noopener">调试接口</a></p>
<p>有以下几种方式可以创建新用户：</p>
<ul>
<li>匿名注册，通过唯一的 phone_id 创建用户</li>
<li>用户名密码注册，通过 username 和 passowrd 创建用户</li>
<li>手机注册，通过 phone, password 和 code（短信验证码）创建用户，短信验证码的获取参考下面章节</li>
<li>邮箱注册，通过 email 和 password 创建用户</li>
<li>第三方登录用户创建，通过authData内的 src、 uid 和 token 创建用户。目前支持腾讯QQ、新浪微博、百度、微信、Facebook、Twitter、Google+、Amazon</li>
</ul>
<p>第三方登录注意事项：</p>
<ul>
<li>Google 和 amazon 第三方登录，authData 里面的 token 需要带上 “Bearer “ 开头</li>
<li>QQ 和 Twitter 需要在开发者中心填写API_KEY和API_Secret</li>
<li>Facebook、Twitter、Google、Amazon仅可在美东和欧洲环境使用</li>
</ul>
<p>密码强度要求：</p>
<ul>
<li>密码长度不小于 8 位</li>
<li>必须由大写，小写，数字，特殊符号至少 3 种以上字符组合</li>
</ul>
<p>请求地址及地址</p>
<pre><code>POST
http://api.gizwits.com/app/users
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">phone_id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">匿名标识,匿名注册的请求参数</td>
</tr>
<tr>
<td style="text-align:left">username</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">用户名,用户名密码注册的请求参数</td>
</tr>
<tr>
<td style="text-align:left">password</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">密码,用户名密码注册、手机注册、邮箱注册的请求参数</td>
</tr>
<tr>
<td style="text-align:left">email</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">邮件地址,邮箱注册的请求参数</td>
</tr>
<tr>
<td style="text-align:left">phone</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">手机号码,手机号码，手机注册的请求参数</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">验证码,短信验证码，手机注册的请求参数</td>
</tr>
<tr>
<td style="text-align:left">lang</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">语言:en，zh-cn</td>
</tr>
<tr>
<td style="text-align:left">src</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">平台类型:qq,sina,baidu,wechat,twitter,facebook,google, amazon</td>
</tr>
<tr>
<td style="text-align:left">uid</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">第三方登录平台返回的uid</td>
</tr>
<tr>
<td style="text-align:left">token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">第三方登录平台返回的token</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">uid</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户唯一id</td>
</tr>
<tr>
<td style="text-align:left">token</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">expire_at</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">token过期时间（时间戳）</td>
</tr>
</tbody>
</table>
<p>返回例子<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"token"</span>: <span class="string">"f8324047f20144f6914e7be19304f943"</span>,</span><br><span class="line">  <span class="attr">"uid"</span>: <span class="string">"f082f4e235974cfeb6a1b40a6024f47e"</span>,</span><br><span class="line">  <span class="attr">"expire_at"</span>: <span class="number">1504772734</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><span id="get_app_users"></span></p>
<h2 id="获取用户信息"><a href="#获取用户信息" class="headerlink" title="获取用户信息"></a><span id="get_app_users1">获取用户信息</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/get_app_users" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及地址</p>
<pre><code>GET
http://api.gizwits.com/app/users
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">username</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户名</td>
</tr>
<tr>
<td style="text-align:left">phone</td>
<td style="text-align:left">string</td>
<td style="text-align:left">手机号码</td>
</tr>
<tr>
<td style="text-align:left">email</td>
<td style="text-align:left">string</td>
<td style="text-align:left">注册邮箱</td>
</tr>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:left">string</td>
<td style="text-align:left">姓名</td>
</tr>
<tr>
<td style="text-align:left">gender</td>
<td style="text-align:left">string</td>
<td style="text-align:left">性别，M：男, F：女, N：未知</td>
</tr>
<tr>
<td style="text-align:left">birthday</td>
<td style="text-align:left">string</td>
<td style="text-align:left">生日，日期格式：YYYY-MM-DD or MM-DD</td>
</tr>
<tr>
<td style="text-align:left">address</td>
<td style="text-align:left">string</td>
<td style="text-align:left">地址</td>
</tr>
<tr>
<td style="text-align:left">lang</td>
<td style="text-align:left">string</td>
<td style="text-align:left">语言版本en, zh-cn</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:left">备注</td>
</tr>
<tr>
<td style="text-align:left">uid</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户唯一id</td>
</tr>
<tr>
<td style="text-align:left">is_anonymous</td>
<td style="text-align:left">boolean</td>
<td style="text-align:left">是否匿名用户</td>
</tr>
</tbody>
</table>
<p>返回例子<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"username"</span>: <span class="string">"gizwits"</span>,</span><br><span class="line">    <span class="attr">"uid"</span>: <span class="string">"f082f4e235974cfeb6a1b40a6024f47e"</span>,</span><br><span class="line">    <span class="attr">"phone"</span>: <span class="string">"18888888888"</span>,</span><br><span class="line">    <span class="attr">"birthday"</span>: <span class="string">"2017-01-01"</span>,</span><br><span class="line">    <span class="attr">"address"</span>: <span class="string">"guangzhou"</span>,</span><br><span class="line">    <span class="attr">"lang"</span>: <span class="string">"zh-cn"</span>,</span><br><span class="line">    <span class="attr">"remark"</span>: <span class="string">"remark"</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"gizwits"</span>,</span><br><span class="line">    <span class="attr">"is_anonymous"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"gender"</span>: <span class="string">"M"</span>,</span><br><span class="line">    <span class="attr">"email"</span>: <span class="string">"club@gizwits.com"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="修改用户信息"><a href="#修改用户信息" class="headerlink" title="修改用户信息"></a><span id="put_app_users">修改用户信息</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/put_app_users" target="_blank" rel="noopener">调试接口</a></p>
<p>有以下几种不同注册对应的修改方式</p>
<ul>
<li>匿名注册的用户转普通用户: 输入 username, password</li>
<li>匿名注册的用户转手机用户: 输入 phone, password, code (通过获取验证码接口获取)</li>
<li>修改密码: 输入 old_pwd, new_pwd</li>
<li>修改手机号: 输入 phone, code (通过获取验证码接口获取)</li>
<li>修改基本信息：姓名、性别、生日、地址、语言版本、备注</li>
</ul>
<p>请求地址及方式</p>
<pre><code>PUT
http://api.gizwits.com/app/users
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">username</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">用户名，用于匿名转普通用户</td>
</tr>
<tr>
<td style="text-align:left">password</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">密码，用于匿名转普通用户</td>
</tr>
<tr>
<td style="text-align:left">phone</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">手机号码，用于匿名转手机注册用户</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">验证码，用于匿名转手机注册用户</td>
</tr>
<tr>
<td style="text-align:left">old_pwd</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">旧密码，用于修改密码</td>
</tr>
<tr>
<td style="text-align:left">new_pwd</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">新密码，用于修改密码</td>
</tr>
<tr>
<td style="text-align:left">email</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">注册邮箱，用于匿名转邮箱注册用户</td>
</tr>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">姓名</td>
</tr>
<tr>
<td style="text-align:left">gender</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">性别，M：男, F：女, N：未知</td>
</tr>
<tr>
<td style="text-align:left">birthday</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">生日，日期格式：YYYY-MM-DD or MM-DD</td>
</tr>
<tr>
<td style="text-align:left">address</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">地址</td>
</tr>
<tr>
<td style="text-align:left">lang</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">语言版本en, zh-cn</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">备注</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">updatedAt</td>
<td style="text-align:left">string</td>
<td style="text-align:left">修改时间(UTC时间)</td>
</tr>
</tbody>
</table>
<p>返回例子<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"updatedAt"</span>: <span class="string">"2017-01-01T08:32:56.996638"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="用户登录"><a href="#用户登录" class="headerlink" title="用户登录"></a><span id="post_app_login">用户登录</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_login" target="_blank" rel="noopener">调试接口</a></p>
<p>匿名用户和第三方登录用户调用用户创建用户接口进行登录。</p>
<p>请求地址及方式</p>
<pre><code>POST
http://api.gizwits.com/app/login
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">username</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">用户名，可以是用户的 username/email/phone</td>
</tr>
<tr>
<td style="text-align:left">password</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">密码</td>
</tr>
<tr>
<td style="text-align:left">lang</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">语言版本</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">uid</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户唯一id</td>
</tr>
<tr>
<td style="text-align:left">token</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">expire_at</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">token过期时间（时间戳）</td>
</tr>
</tbody>
</table>
<p>返回例子<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"token"</span>: <span class="string">"f8324047f20144f6914e7be19304f943"</span>,</span><br><span class="line">  <span class="attr">"uid"</span>: <span class="string">"f082f4e235974cfeb6a1b40a6024f47e"</span>,</span><br><span class="line">  <span class="attr">"expire_at"</span>: <span class="number">1504772734</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="获取APP-Token"><a href="#获取APP-Token" class="headerlink" title="获取APP Token"></a><span id="post_app_request_token">获取APP Token</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_request_token" target="_blank" rel="noopener">调试接口</a></p>
<p>该接口获取的token参数主要用于调用<a href="#post_app_sms_code">获取短信验证码</a>和<a href="#get_app_verify_codes">获取图片验证码</a>接口时作为请求参数使用。</p>
<p>请求地址及方式</p>
<pre><code>POST  
http://api.gizwits.com/app/request_token
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-Application-Auth</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">MD5_32位加密(appid + appsecret)</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">uid</td>
<td style="text-align:left">string</td>
<td style="text-align:left">用户唯一id</td>
</tr>
<tr>
<td style="text-align:left">expire_at</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">token过期时间（时间戳）</td>
</tr>
</tbody>
</table>
<p>返回例子<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"token"</span>: <span class="string">"f8324047f20144f6914e7be19304f943"</span>,</span><br><span class="line">  <span class="attr">"expire_at"</span>: <span class="number">1504772734</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="请求重置密码"><a href="#请求重置密码" class="headerlink" title="请求重置密码"></a><span id="post_app_reset_password">请求重置密码</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_reset_password" target="_blank" rel="noopener">调试接口</a></p>
<p>只有设置了 email 或者 phone 的用户才可以重置密码。</p>
<ul>
<li>通过 email 重置密码，只需传入 email ，通过邮件发送重置密码链接</li>
<li>通过 phone 重置密码，传入 phone, new_pwd, code (通过调用获取短信验证码接口获取)</li>
</ul>
<p>请求地址及方式</p>
<pre><code>POST
http://api.gizwits.com/app/reset_password
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">email</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">注册邮箱</td>
</tr>
<tr>
<td style="text-align:left">phone</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">注册手机号码</td>
</tr>
<tr>
<td style="text-align:left">new_pwd</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">新密码</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">验证码</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h2 id="验证码的获取和校验"><a href="#验证码的获取和校验" class="headerlink" title="验证码的获取和校验"></a><span id="post_app_sms_code">验证码的获取和校验</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_sms_code" target="_blank" rel="noopener">调试接口</a></p>
<p>短信验证码的主要用途有：</p>
<ul>
<li>手机号用户注册</li>
<li>手机号用户重置密码</li>
<li>其他您认为需要短信验证码的敏感操作</li>
</ul>
<p>接口能实现获取和校验验证码：</p>
<ul>
<li>获取短信验证码只需要传入 phone</li>
<li>验证短信验证码需要传入 phone 和 code</li>
</ul>
<p>关于国外手机号</p>
<ul>
<li>发送短信验证码到国外手机号，需要遵循如下格式：+{国家码}{手机号}。假设一个美国（国家码为 1）的手机号为 4246531234，那么 phone 就应该填写为 “+14246531234”</li>
<li>国家码列表可以通过<a href="https://www.itu.int/dms_pub/itu-t/opb/sp/T-SP-E.164D-11-2011-PDF-E.pdf" target="_blank" rel="noopener">这里</a>获取。</li>
</ul>
<p>短信验证码正确校验后立即失效，默认有效期为 24 小时。</p>
<p>请求地址及方式</p>
<pre><code>POST
http://api.gizwits.com/app/sms_code
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token,通过<a href="#post_app_request_token">获取APP Token</a>接口取得</td>
</tr>
<tr>
<td style="text-align:left">phone</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">手机号码</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">验证码</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h2 id="获取图片验证码"><a href="#获取图片验证码" class="headerlink" title="获取图片验证码"></a><span id="get_app_verify_codes">获取图片验证码</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/get_app_verify_codes" target="_blank" rel="noopener">调试接口</a></p>
<p>返回的 captcha_url 就是图片验证码的 URL，将图片显示给用户</p>
<p>请求地址及方式</p>
<pre><code>GET
http://api.gizwits.com/app/verify/codes
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token,通过<a href="#post_app_request_token">获取APP Token</a>接口取得</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">captcha_url</td>
<td style="text-align:left">string</td>
<td style="text-align:left">图片验证码URL地址</td>
</tr>
<tr>
<td style="text-align:left">captcha_id</td>
<td style="text-align:left">string</td>
<td style="text-align:left">图片验证码id</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"captcha_url"</span>: <span class="string">"http://api.gizwits.com/captcha/image/22d9cdc8edb13fd19f770afbed45351831403b5d/"</span>,</span><br><span class="line">  <span class="attr">"captcha_id"</span>: <span class="string">"22d9cdc8edb13fd19f770afbed45351831403b5d"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="校验图片验证码并发送验证码"><a href="#校验图片验证码并发送验证码" class="headerlink" title="校验图片验证码并发送验证码"></a>校验图片验证码并发送验证码</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_verify_codes" target="_blank" rel="noopener">调试接口</a></p>
<p>对<a href="#get_app_verify_codes">获取图片验证码</a>接口的图片验证码进行校验，校验通过将发送短信验证码</p>
<p>请求地址及方式</p>
<pre><code>POST
http://api.gizwits.com/app/verify/codes
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token,通过<a href="#post_app_request_token">获取APP Token</a>接口取得</td>
</tr>
<tr>
<td style="text-align:left">captcha_id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">图片验证码id</td>
</tr>
<tr>
<td style="text-align:left">captcha_code</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">图片验证码的值</td>
</tr>
<tr>
<td style="text-align:left">phone</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">手机号码</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h2 id="校验短信验证码"><a href="#校验短信验证码" class="headerlink" title="校验短信验证码"></a><span id="put_app_verify_codes">校验短信验证码</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/put_app_verify_codes" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/verify/codes
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token,通过<a href="#post_app_request_token">获取APP Token</a>接口取得</td>
</tr>
<tr>
<td style="text-align:left">phone</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">手机号码</td>
</tr>
<tr>
<td style="text-align:left">sms_code</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">验证码</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h1 id="消息中心"><a href="#消息中心" class="headerlink" title="消息中心"></a>消息中心</h1><h2 id="查询消息列表"><a href="#查询消息列表" class="headerlink" title="查询消息列表"></a><span id="post_app_users">查询消息列表</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/消息中心/get_app_messages" target="_blank" rel="noopener">调试接口</a></p>
<p>获取用户的消息，如分享信息、D3规则推送的消息</p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/messages?type=1&amp;limit=20&amp;skip=0
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">消息类型，1：设备分享消息</td>
</tr>
<tr>
<td style="text-align:left">limit</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">返回的结果条数</td>
</tr>
<tr>
<td style="text-align:left">skip</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">表示跳过的条数，间接表示页数。</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">total</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">消息总数</td>
</tr>
<tr>
<td style="text-align:left">limit</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">返回的结果条数</td>
</tr>
<tr>
<td style="text-align:left">skip</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">跳过的条数</td>
</tr>
<tr>
<td style="text-align:left">previous</td>
<td style="text-align:left">string</td>
<td style="text-align:left">上一页的请求地址</td>
</tr>
<tr>
<td style="text-align:left">next</td>
<td style="text-align:left">string</td>
<td style="text-align:left">下一页的请求地址</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:left">消息id编号</td>
</tr>
<tr>
<td style="text-align:left">created_at</td>
<td style="text-align:left">string</td>
<td style="text-align:left">消息创建时间（UTC时间）</td>
</tr>
<tr>
<td style="text-align:left">updated_at</td>
<td style="text-align:left">string</td>
<td style="text-align:left">消息更新时间（UTC时间）</td>
</tr>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">消息类型，1：设备分享消息</td>
</tr>
<tr>
<td style="text-align:left">status</td>
<td style="text-align:left">integer</td>
<td style="text-align:left">消息状态，0 未读，1 已读，2 删除</td>
</tr>
<tr>
<td style="text-align:left">content</td>
<td style="text-align:left">string</td>
<td style="text-align:left">信息内容</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"meta"</span>: &#123;</span><br><span class="line">    <span class="attr">"total"</span>: <span class="number">50</span>,</span><br><span class="line">    <span class="attr">"limit"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"skip"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"previous"</span>: <span class="string">"/app/messages?skip=5&amp;type=1&amp;limit=1"</span>,</span><br><span class="line">    <span class="attr">"next"</span>: <span class="string">"/app/messages?skip=7&amp;type=1&amp;limit=1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"objects"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"status"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"created_at"</span>: <span class="string">"2017-09-11T11:41:23Z"</span>,</span><br><span class="line">        <span class="attr">"updated_at"</span>: <span class="string">"2017-09-11T11:41:23Z"</span>,</span><br><span class="line">        <span class="attr">"content"</span>: <span class="string">"您给 188****888 共享了设备 微信宠物屋!"</span>,</span><br><span class="line">        <span class="attr">"type"</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">"id"</span>: <span class="string">"59b676638c7d500018a9ed98"</span></span><br><span class="line">     &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="标记已读和删除消息"><a href="#标记已读和删除消息" class="headerlink" title="标记已读和删除消息"></a><span id="put_app_messages_id">标记已读和删除消息</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/消息中心/put_app_messages_id" target="_blank" rel="noopener">调试接口</a></p>
<p>将用户信息标记为已读和删除消息</p>
<p>请求地址及方式</p>
<pre><code>PUT
https://api.gizwits.com/app/messages/{id}?status=1
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">消息id编号</td>
</tr>
<tr>
<td style="text-align:left">status</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">消息状态：1：已读，2：删除</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h1 id="绑定管理"><a href="#绑定管理" class="headerlink" title="绑定管理"></a>绑定管理</h1><p>当设备与用户之间绑定后，设备与用户之间就会存在对应的“绑定角色”关系。</p>
<p>绑定角色分为4种类，首绑用户: special ；拥有者: owner ；访客: guest ；普通用户: normal</p>
<h4 id="角色场景说明："><a href="#角色场景说明：" class="headerlink" title="角色场景说明："></a>角色场景说明：</h4><ul>
<li>当设备没有分享过且设备没有任何用户绑定过。A用户绑定该设备，A用户成为 special ， B用户再绑定该设备，B用户成为normal 。</li>
<li>设当前A用户为 special ，B用户为 normal 。当A用户解除绑定，B用户成为 special ，A用户与该设备之间没有“绑定角色”关系。</li>
<li>设当前A用户为 special ，B用户为 normal 。产品开启了<a href="#设备分享">设备分享</a>，A用户将设备分享给C用户，无论C用户是否接受，A用户成为 owner，B用户变成 guest。</li>
<li>当开启分享功能且设备没有任何用户绑定。A用户绑定该设备，A用户成为 owner ，其他用户无法再绑定该设备。</li>
<li>设当前A用户为 owner ，C用户未绑定过该设备 。A用户将设备分享给C用户，且C用户接受分享。A用户成仍是 owner，C用户为 guest。</li>
<li>设当前A用户为 owner ，B用户为 guest 。A用户将设备解除绑定，A用户和B用户与该设备之间没有“绑定角色”关系。</li>
<li>除 owner 用户，其他用户无法分享设备，一个设备只有一个owner</li>
</ul>
<h2 id="绑定设备"><a href="#绑定设备" class="headerlink" title="绑定设备"></a>绑定设备</h2><p>可以通过一下两种方式绑定设备：</p>
<ul>
<li>通过 product_key 和 MAC 地址绑定设备</li>
<li>通过二维码绑定设备，二维码内容为 product_key 和 MAC 加密后的内容，所以本质上和上面一种方式一样</li>
</ul>
<h2 id="通过-MAC-地址绑定设备"><a href="#通过-MAC-地址绑定设备" class="headerlink" title="通过 MAC 地址绑定设备"></a><span id="post_app_bind_mac">通过 MAC 地址绑定设备</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#!/绑定管理/post_app_bind_mac" target="_blank" rel="noopener">调试接口</a></p>
<p>将用户与设备进行绑定</p>
<p>请求地址及方式</p>
<pre><code>POST
http://api.gizwits.com/app/bind_mac
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-Timestamp</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">请求时间戳，与服务器相差不能超过 5 分钟</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-Signature</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">签名，计算方法为 lower(md5(product_secret + X-Gizwits-Timestamp ))</td>
</tr>
<tr>
<td style="text-align:left">product_key</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">产品product_key</td>
</tr>
<tr>
<td style="text-align:left">mac</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">设备mac地址</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">备注</td>
</tr>
<tr>
<td style="text-align:left">dev_alias</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">设备别名</td>
</tr>
<tr>
<td style="text-align:left">set_owner</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">是否设置成 owner，只对开启了设备分享功能的产品有效；0（默认值）：不设置成owner，1：设置成owner</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_key</td>
<td>string</td>
<td>产品product_key</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>设备id</td>
</tr>
<tr>
<td>mac</td>
<td>string</td>
<td>设备mac地址</td>
</tr>
<tr>
<td>is_online</td>
<td>boolean</td>
<td>是否在线</td>
</tr>
<tr>
<td>passcode</td>
<td>string</td>
<td>设备  passcode</td>
</tr>
<tr>
<td>host</td>
<td>string</td>
<td>连接服务器的域名</td>
</tr>
<tr>
<td>port</td>
<td>integer</td>
<td>M2M 的 mqtt 端口号</td>
</tr>
<tr>
<td>port_s</td>
<td>integer</td>
<td>M2M 的 mqtt SSL 端口号</td>
</tr>
<tr>
<td>ws_port</td>
<td>integer</td>
<td>websocket 端口号</td>
</tr>
<tr>
<td>wss_port</td>
<td>integer</td>
<td>websocket SSL 端口号</td>
</tr>
<tr>
<td>remark</td>
<td>string</td>
<td>设备备注</td>
</tr>
<tr>
<td>is_disabled</td>
<td>boolean</td>
<td>是否注销</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>设备类型，单品设备:normal,中控设备:center_control,中控子设备:sub_dev</td>
</tr>
<tr>
<td>dev_alias</td>
<td>string</td>
<td>设备别名</td>
</tr>
<tr>
<td>dev_label</td>
<td>Array[string]</td>
<td>设备标签列表，目前用于语音 API 批量设备控制</td>
</tr>
<tr>
<td>role</td>
<td>string</td>
<td>绑定角色， 特殊用户:special,拥有者:owner,访客:guest,普通用户:normal</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"product_key"</span>: <span class="string">"4214bf2d79694a259232431b6f2ef46b"</span>,</span><br><span class="line">    <span class="attr">"did"</span>: <span class="string">"gKufzxZwYeyd3Skbsb6mza"</span>,</span><br><span class="line">    <span class="attr">"mac"</span>: <span class="string">"accf2350d446"</span>,</span><br><span class="line">    <span class="attr">"is_online"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"passcode"</span>: <span class="string">"JHHOOIWJBA"</span>,</span><br><span class="line">    <span class="attr">"host"</span>: <span class="string">"m2m.gizwits.com"</span>,</span><br><span class="line">    <span class="attr">"port"</span>: <span class="number">1883</span>,</span><br><span class="line">    <span class="attr">"port_s"</span>: <span class="number">8883</span>,</span><br><span class="line">    <span class="attr">"ws_port"</span>: <span class="number">8080</span>,</span><br><span class="line">    <span class="attr">"wss_port"</span>: <span class="number">8880</span>,</span><br><span class="line">    <span class="attr">"remark"</span>: <span class="string">"备注信息"</span>,</span><br><span class="line">    <span class="attr">"is_disabled"</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"normal"</span>,</span><br><span class="line">    <span class="attr">"dev_alias"</span>: <span class="string">"设备别名"</span>,</span><br><span class="line">    <span class="attr">"dev_label"</span>: [],</span><br><span class="line">    <span class="attr">"role"</span>: <span class="string">"special"</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="解绑设备"><a href="#解绑设备" class="headerlink" title="解绑设备"></a><span id="delete_app_bindings">解绑设备</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#!/绑定管理/delete_app_bindings" target="_blank" rel="noopener">调试接口</a></p>
<p>用户已绑定的设备进行解绑</p>
<p>请求地址及方式</p>
<pre><code>DELETE
https://api.gizwits.com/app/bindings
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">devices</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">需要解绑的设备数组</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">设备ID</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>success</td>
<td>Array[string]</td>
<td>解绑成功的设备</td>
</tr>
<tr>
<td>failed</td>
<td>Array[string]</td>
<td>解绑失败的设备</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"failed"</span>: [],</span><br><span class="line">    <span class="attr">"success"</span>: [</span><br><span class="line">        <span class="string">"xAAcCYawLFD9JfMysqYf7d"</span>,</span><br><span class="line">        <span class="string">"WCWGkbS4Ttynzwx9brzpEa"</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="获取绑定列表"><a href="#获取绑定列表" class="headerlink" title="获取绑定列表"></a><span id="get_app_bindings">获取绑定列表</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#!/绑定管理/delete_app_bindings" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/bindings
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">limit</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">返回的结果条数</td>
</tr>
<tr>
<td style="text-align:left">skip</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">表示跳过的条数，间接表示页数</td>
</tr>
<tr>
<td style="text-align:left">show_disabled</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">是否显示已注销的设备，1:显示，0:不显示</td>
</tr>
<tr>
<td style="text-align:left">show_proto_ver</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">是否显示设备通信协议版本，1:显示，0:不显示</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>devices</td>
<td>Array</td>
<td>绑定的设备组</td>
</tr>
<tr>
<td>product_key</td>
<td>string</td>
<td>产品product_key</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>设备id</td>
</tr>
<tr>
<td>mac</td>
<td>string</td>
<td>设备mac地址</td>
</tr>
<tr>
<td>is_online</td>
<td>boolean</td>
<td>是否在线</td>
</tr>
<tr>
<td>passcode</td>
<td>string</td>
<td>设备  passcode</td>
</tr>
<tr>
<td>host</td>
<td>string</td>
<td>连接服务器的域名</td>
</tr>
<tr>
<td>port</td>
<td>integer</td>
<td>M2M 的 mqtt 端口号</td>
</tr>
<tr>
<td>port_s</td>
<td>integer</td>
<td>M2M 的 mqtt SSL 端口号</td>
</tr>
<tr>
<td>ws_port</td>
<td>integer</td>
<td>websocket 端口号</td>
</tr>
<tr>
<td>wss_port</td>
<td>integer</td>
<td>websocket SSL 端口号</td>
</tr>
<tr>
<td>remark</td>
<td>string</td>
<td>设备备注</td>
</tr>
<tr>
<td>is_disabled</td>
<td>boolean</td>
<td>是否注销</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>设备类型，单品设备:normal,中控设备:center_control,中控子设备:sub_dev</td>
</tr>
<tr>
<td>dev_alias</td>
<td>string</td>
<td>设备别名</td>
</tr>
<tr>
<td>dev_label</td>
<td>Array[string]</td>
<td>设备标签列表，目前用于语音 API 批量设备控制</td>
</tr>
<tr>
<td>proto_ver</td>
<td>string</td>
<td>协议版本号，’01’, ‘01_01’, ‘03’, ‘04’</td>
</tr>
<tr>
<td>wifi_soft_version</td>
<td>string</td>
<td>wifi版本号</td>
</tr>
<tr>
<td>is_sandbox</td>
<td>boolean</td>
<td>是否连接sandbox环境</td>
</tr>
<tr>
<td>role</td>
<td>string</td>
<td>绑定角色， 首绑用户:special,拥有者:owner,访客:guest,普通用户:normal</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"devices"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">"product_key"</span>: <span class="string">"55af63815cc34788aeeb9451a2454412"</span>,</span><br><span class="line">          <span class="attr">"did"</span>: <span class="string">"7r7u8XPkCRLGVYTYrtjoCB"</span>,</span><br><span class="line">          <span class="attr">"mac"</span>: <span class="string">"virtual:site"</span>,</span><br><span class="line">          <span class="attr">"is_online"</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="attr">"passcode"</span>: <span class="string">"123456"</span>,</span><br><span class="line">          <span class="attr">"host"</span>: <span class="string">"sandbox.gizwits.com"</span>,</span><br><span class="line">          <span class="attr">"port"</span>: <span class="number">1883</span>,</span><br><span class="line">          <span class="attr">"port_s"</span>: <span class="number">8883</span>,</span><br><span class="line">          <span class="attr">"ws_port"</span>: <span class="number">8080</span>,</span><br><span class="line">          <span class="attr">"wss_port"</span>: <span class="number">8880</span>,</span><br><span class="line">          <span class="attr">"remark"</span>: <span class="string">"备注信息"</span>,</span><br><span class="line">          <span class="attr">"is_disabled"</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="attr">"type"</span>: <span class="string">"normal"</span>,</span><br><span class="line">          <span class="attr">"dev_alias"</span>: <span class="string">"设备别名"</span>,</span><br><span class="line">          <span class="attr">"dev_label"</span>: [],</span><br><span class="line">          <span class="attr">"proto_ver"</span>: <span class="string">"04"</span>,</span><br><span class="line">          <span class="attr">"wifi_soft_version"</span>: <span class="literal">null</span>,</span><br><span class="line">          <span class="attr">"is_sandbox"</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">"role"</span>: <span class="string">"special"</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="attr">"product_key"</span>: <span class="string">"4214bf2d79694a259232431b6f22f46b"</span>,</span><br><span class="line">          <span class="attr">"did"</span>: <span class="string">"gKufzxZwYeyd3Skbsb6mza"</span>,</span><br><span class="line">          <span class="attr">"mac"</span>: <span class="string">"accf2350d447"</span>,</span><br><span class="line">          <span class="attr">"is_online"</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="attr">"passcode"</span>: <span class="string">"JHHOOIWJBA"</span>,</span><br><span class="line">          <span class="attr">"host"</span>: <span class="string">"m2m.gizwits.com"</span>,</span><br><span class="line">          <span class="attr">"port"</span>: <span class="number">1883</span>,</span><br><span class="line">          <span class="attr">"port_s"</span>: <span class="number">8883</span>,</span><br><span class="line">          <span class="attr">"ws_port"</span>: <span class="number">8080</span>,</span><br><span class="line">          <span class="attr">"wss_port"</span>: <span class="number">8880</span>,</span><br><span class="line">          <span class="attr">"remark"</span>: <span class="string">"备注信息"</span>,</span><br><span class="line">          <span class="attr">"is_disabled"</span>: <span class="literal">false</span>,</span><br><span class="line">          <span class="attr">"type"</span>: <span class="string">"normal"</span>,</span><br><span class="line">          <span class="attr">"dev_alias"</span>: <span class="string">"设备别名"</span>,</span><br><span class="line">          <span class="attr">"dev_label"</span>: [],</span><br><span class="line">          <span class="attr">"proto_ver"</span>: <span class="string">"04"</span>,</span><br><span class="line">          <span class="attr">"wifi_soft_version"</span>: <span class="string">"04000006"</span>,</span><br><span class="line">          <span class="attr">"is_sandbox"</span>: <span class="literal">true</span>,</span><br><span class="line">          <span class="attr">"role"</span>: <span class="string">"special"</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="通过二维码绑定设备"><a href="#通过二维码绑定设备" class="headerlink" title="通过二维码绑定设备"></a><span id="post_app_bind_latest">通过二维码绑定设备</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/post_app_bind_latest" target="_blank" rel="noopener">调试接口</a></p>
<p>必须是通过机智云的二维码生成服务(<a href="http://docs.gizwits.com/zh-cn/UserManual/UseQRCode.html" target="_blank" rel="noopener">查看教程</a>)生成的二维码才可以调用本接口。</p>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/bind_latest
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">qr_content</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">通过扫描二维码得出的字符串</td>
</tr>
<tr>
<td style="text-align:left">set_owner</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">是否设置成 owner，只对开启了设备分享功能的产品有效；0（默认值）：不设置成owner，1：设置成owner</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h2 id="修改绑定信息"><a href="#修改绑定信息" class="headerlink" title="修改绑定信息"></a>修改绑定信息</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/put_app_bindings_did" target="_blank" rel="noopener">调试接口</a></p>
<p>用户可以对绑定的设备修改别名和备注。</p>
<p>同一个设备被多个用户绑定，每个用户都可以对该设备设置别名和备注，互不冲突。</p>
<p>请求地址及方式</p>
<pre><code>PUT
https://api.gizwits.com/app/bindings/{did}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备ID</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">设备备注</td>
</tr>
<tr>
<td style="text-align:left">dev_alias</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">设备别名</td>
</tr>
<tr>
<td style="text-align:left">dev_label</td>
<td style="text-align:left">Array[string]</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">设备标签列表，目前用于语音 API 批量设备控制</td>
</tr>
</tbody>
</table>
<p>注：body的参数最少填写输入一个</p>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>remark</td>
<td>string</td>
<td>设备备注</td>
</tr>
<tr>
<td>dev_label</td>
<td>Array[string]</td>
<td>设备标签列表，目前用于语音 API 批量设备控制</td>
</tr>
<tr>
<td>dev_alias</td>
<td>string</td>
<td>设备别名</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"remark"</span>: <span class="string">"备注"</span>,</span><br><span class="line">    <span class="attr">"dev_label"</span>: [</span><br><span class="line">        <span class="string">"标签1"</span>,</span><br><span class="line">        <span class="string">"标签2"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"dev_alias"</span>: <span class="string">"设备别名"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="查询设备绑定的Guest用户"><a href="#查询设备绑定的Guest用户" class="headerlink" title="查询设备绑定的Guest用户"></a>查询设备绑定的Guest用户</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/get_app_did_bindings" target="_blank" rel="noopener">调试接口</a></p>
<p>查看接受设备分享邀请的用户信息</p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/{did}/bindings
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备ID</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>username</td>
<td>string</td>
<td>账号username,中间4个字母*替代</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>账号phone,中间4个数字*替代</td>
</tr>
<tr>
<td>created_at</td>
<td>string</td>
<td>Guest 用户接受分享的时间（UTC时间）</td>
</tr>
<tr>
<td>uid</td>
<td>string</td>
<td>Guest用户的UID</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>账号email,@前面4个字符*替代</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">"username"</span>: <span class="string">"2****2"</span>,</span><br><span class="line">        <span class="attr">"phone"</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">"created_at"</span>: <span class="string">"2017-09-19T07:12:32Z"</span>,</span><br><span class="line">        <span class="attr">"uid"</span>: <span class="string">"c0a85d0773e24f15a6853f3148c82313"</span>,</span><br><span class="line">        <span class="attr">"email"</span>: <span class="literal">null</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="解绑-Guest-用户"><a href="#解绑-Guest-用户" class="headerlink" title="解绑 Guest 用户"></a>解绑 Guest 用户</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/delete_app_did_bindings" target="_blank" rel="noopener">调试接口</a></p>
<p>Owner 解除 Guest 用户对设备的绑定关系</p>
<p>请求地址及方式</p>
<pre><code>DELETE
https://api.gizwits.com/app/{did}/bindings
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备ID</td>
</tr>
<tr>
<td style="text-align:left">uid</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">guest 的 uid，不能是自己</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h1 id="设备远程监控"><a href="#设备远程监控" class="headerlink" title="设备远程监控"></a>设备远程监控</h1><h2 id="获取设备最新状态"><a href="#获取设备最新状态" class="headerlink" title="获取设备最新状态"></a>获取设备最新状态</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备远程监控/get_app_devdata_did_latest" target="_blank" rel="noopener">调试接口</a></p>
<p>该接口获取的是 24 小时内，设备最近一次上报的数据点值。</p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/devdata/{did}/latest
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备ID</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>did</td>
<td>string</td>
<td>设备ID</td>
</tr>
<tr>
<td>updated_at</td>
<td>string</td>
<td>最后更新时间</td>
</tr>
<tr>
<td>attr</td>
<td>object</td>
<td>数据点及其值</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"did"</span>: <span class="string">"WCWGkbS42tynzwx9brzpEa"</span>,</span><br><span class="line">  <span class="attr">"updated_at"</span>: <span class="number">1505809000</span>,</span><br><span class="line">  <span class="attr">"attr"</span>: &#123;</span><br><span class="line">    <span class="attr">"alert_full"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"alert_shutdown"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"mode"</span>: <span class="string">"制冷"</span>,</span><br><span class="line">    <span class="attr">"fan_swing"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"switch"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"fan_speed"</span>: <span class="string">"低风"</span>,</span><br><span class="line">    <span class="attr">"fault_roomtemp"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"room_temp"</span>: <span class="number">-10</span>,</span><br><span class="line">    <span class="attr">"set_temp"</span>: <span class="number">16</span>,</span><br><span class="line">    <span class="attr">"off_timing"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"on_timing"</span>: <span class="number">0</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="获取产品数据点定义"><a href="#获取产品数据点定义" class="headerlink" title="获取产品数据点定义"></a>获取产品数据点定义</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备远程监控/get_app_datapoint" target="_blank" rel="noopener">调试接口</a></p>
<p>API 调用限制</p>
<ul>
<li>AppID 和 product_key 关联</li>
</ul>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/datapoint?product_key={product_key}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">product_key</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">产品product_key</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>string</td>
<td>产品名称</td>
</tr>
<tr>
<td>entities</td>
<td>Array</td>
<td>[EntityItem]</td>
</tr>
<tr>
<td>protocolType</td>
<td>string</td>
<td>固定值：standard</td>
</tr>
<tr>
<td>product_key</td>
<td>string</td>
<td>产品product_key</td>
</tr>
<tr>
<td>packetVersion</td>
<td>string</td>
<td>固定值：4</td>
</tr>
<tr>
<td>ui</td>
<td>inline_model_7</td>
<td>手机客户端 UI 定义</td>
</tr>
<tr>
<td>EntityItem</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>id</td>
<td>integer</td>
<td>固定值：0</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>固定值：entity0</td>
</tr>
<tr>
<td>display_name</td>
<td>string</td>
<td>固定值：机智云开发套件</td>
</tr>
<tr>
<td>attrs</td>
<td>Array</td>
<td>[AttrItem]</td>
</tr>
<tr>
<td>inline_model_7</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>object</td>
<td>inline_model_1</td>
<td></td>
</tr>
<tr>
<td>sections</td>
<td>Array</td>
<td>UI 片段列表:[SectionItem]</td>
</tr>
<tr>
<td>AttrItem</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>id</td>
<td>integer</td>
<td>数据点顺序</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>数据点标示名</td>
</tr>
<tr>
<td>display_name</td>
<td>string</td>
<td>数据点显示名</td>
</tr>
<tr>
<td>desc</td>
<td>string</td>
<td>固定值：…..</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>读写类型，W: 读写,R: 只读,N: 报警,E: 故障</td>
</tr>
<tr>
<td>data_type</td>
<td>string</td>
<td>数据类型，bool：布尔;’uint8’,’uint16’,’uint32’：数值型;enum：枚举;binary:扩展型]</td>
</tr>
<tr>
<td>uint_spec</td>
<td>inline_model_4</td>
<td>当 data_type 为 uint8/uint16/uint32 时，有该字段</td>
</tr>
<tr>
<td>enum</td>
<td>Array</td>
<td>当 data_type 为 enum 时，有该字段</td>
</tr>
<tr>
<td>position</td>
<td>inline_model_5</td>
<td>字节与比特位描述</td>
</tr>
<tr>
<td>inline_model_1</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>version</td>
<td>integer</td>
<td>固定值：4</td>
</tr>
<tr>
<td>showEditButton</td>
<td>boolean</td>
<td>固定值：false</td>
</tr>
<tr>
<td>SectionItem</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>elements</td>
<td>Array</td>
<td>[ElementItem]</td>
</tr>
<tr>
<td>inline_model_4</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>min</td>
<td>integer</td>
<td>最少值</td>
</tr>
<tr>
<td>max</td>
<td>integer</td>
<td>最大值</td>
</tr>
<tr>
<td>ratio</td>
<td>number</td>
<td>分辨率k</td>
</tr>
<tr>
<td>addition</td>
<td>integer</td>
<td>增量</td>
</tr>
<tr>
<td>inline_model_5</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>bit_offset</td>
<td>integer</td>
<td>位索引，如果为变长协议，固定为 0</td>
</tr>
<tr>
<td>len</td>
<td>integer</td>
<td>长度</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>单位，’bit’, ‘byte’</td>
</tr>
<tr>
<td>byte_offset</td>
<td>integer</td>
<td>字节索引，如果为变长协议，固定为 0</td>
</tr>
<tr>
<td>ElementItem</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td>数据点显示名</td>
</tr>
<tr>
<td>key</td>
<td>string</td>
<td>entity0.{数据点标示名}</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>‘QBooleanElement’, ‘QFloatElement’, ‘QRadioElement’, ‘QMultilineElement’, ‘QLabelElement’</td>
</tr>
<tr>
<td>keyboardType</td>
<td>string</td>
<td>键盘类型，固定值，”NumbersAndPunctuation”</td>
</tr>
<tr>
<td>maxLength</td>
<td>integer</td>
<td>type 为 QMultilineElement 才有该字段，最大长度，为数据点定义长度的 2 倍</td>
</tr>
<tr>
<td>items</td>
<td>Array</td>
<td>type 为 QRadioElement 才有该字段，枚举值列表</td>
</tr>
<tr>
<td>boolValue</td>
<td>boolean</td>
<td>type 为 QBooleanElement 才有该字段，固定值：false</td>
</tr>
<tr>
<td>bind</td>
<td>string</td>
<td>type 为 QFloatElement 才有该字段，固定值：floatValue:float</td>
</tr>
<tr>
<td>maximumValue</td>
<td>number</td>
<td>type 为 QFloatElement 才有该字段，最大值</td>
</tr>
<tr>
<td>minimumValue</td>
<td>number</td>
<td>type 为 QFloatElement 才有该字段，最少值</td>
</tr>
<tr>
<td>value</td>
<td>integer</td>
<td>type 为 QFloatElement 才有该字段，固定值：0</td>
</tr>
<tr>
<td>object</td>
<td>inline_model_6</td>
<td></td>
</tr>
<tr>
<td>inline_model_6</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>action</td>
<td>string</td>
<td>固定值:entity0</td>
</tr>
<tr>
<td>bind</td>
<td>Array[string]</td>
<td>固定值:entity0.{数据点标示名}</td>
</tr>
<tr>
<td>perm</td>
<td>string</td>
<td>读写类型：W: 读写,R: 只读,N: 报警,E: 故障</td>
</tr>
<tr>
<td>unit_spec</td>
<td>inline_model_2</td>
<td>type 为 QFloatElement 才有该字段</td>
</tr>
<tr>
<td>inline_model_2</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>max</td>
<td>integer</td>
<td>最大值</td>
</tr>
<tr>
<td>step</td>
<td>integer</td>
<td>步进</td>
</tr>
<tr>
<td>min</td>
<td>integer</td>
<td>最小值</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"宠物屋"</span>,</span><br><span class="line">  <span class="attr">"entities"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"id"</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">"display_name"</span>: <span class="string">"机智云开发套件"</span>,</span><br><span class="line">      <span class="attr">"attrs"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">"display_name"</span>: <span class="string">"开启/关闭红色灯"</span>,</span><br><span class="line">          <span class="attr">"name"</span>: <span class="string">"LED_OnOff"</span>,</span><br><span class="line">          <span class="attr">"data_type"</span>: <span class="string">"bool"</span>,</span><br><span class="line">          <span class="attr">"position"</span>: &#123;</span><br><span class="line">            <span class="attr">"bit_offset"</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">"len"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">"unit"</span>: <span class="string">"bit"</span>,</span><br><span class="line">            <span class="attr">"byte_offset"</span>: <span class="number">0</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">"type"</span>: <span class="string">"status_writable"</span>,</span><br><span class="line">          <span class="attr">"id"</span>: <span class="number">0</span>,</span><br><span class="line">          <span class="attr">"desc"</span>: <span class="string">"....."</span></span><br><span class="line">        &#125;</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"entity0"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">"protocolType"</span>: <span class="string">"standard"</span>,</span><br><span class="line">  <span class="attr">"product_key"</span>: <span class="string">"268162799f764b999f834b5a02eb894d"</span>,</span><br><span class="line">  <span class="attr">"packetVersion"</span>: <span class="string">"0x00000004"</span>,</span><br><span class="line">  <span class="attr">"ui"</span>: &#123;</span><br><span class="line">    <span class="attr">"object"</span>: &#123;</span><br><span class="line">      <span class="attr">"version"</span>: <span class="number">4</span>,</span><br><span class="line">      <span class="attr">"showEditButton"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"sections"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"elements"</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">"boolValue"</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">"object"</span>: &#123;</span><br><span class="line">              <span class="attr">"action"</span>: <span class="string">"entity0"</span>,</span><br><span class="line">              <span class="attr">"bind"</span>: [</span><br><span class="line">                <span class="string">"entity0.LED_OnOff"</span></span><br><span class="line">              ],</span><br><span class="line">              <span class="attr">"perm"</span>: <span class="string">"W"</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"type"</span>: <span class="string">"QBooleanElement"</span>,</span><br><span class="line">            <span class="attr">"key"</span>: <span class="string">"entity0.LED_OnOff"</span>,</span><br><span class="line">            <span class="attr">"title"</span>: <span class="string">"开启/关闭红色灯"</span></span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="获取设备详情"><a href="#获取设备详情" class="headerlink" title="获取设备详情"></a>获取设备详情</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备远程监控/get_app_devices_did" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/devices/{did}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备ID</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>product_key</td>
<td>string</td>
<td>产品product_key</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>设备id</td>
</tr>
<tr>
<td>mac</td>
<td>string</td>
<td>设备mac地址</td>
</tr>
<tr>
<td>is_online</td>
<td>boolean</td>
<td>是否在线</td>
</tr>
<tr>
<td>passcode</td>
<td>string</td>
<td>设备  passcode</td>
</tr>
<tr>
<td>host</td>
<td>string</td>
<td>连接服务器的域名</td>
</tr>
<tr>
<td>port</td>
<td>integer</td>
<td>M2M 的 mqtt 端口号</td>
</tr>
<tr>
<td>port_s</td>
<td>integer</td>
<td>M2M 的 mqtt SSL 端口号</td>
</tr>
<tr>
<td>ws_port</td>
<td>integer</td>
<td>websocket 端口号</td>
</tr>
<tr>
<td>wss_port</td>
<td>integer</td>
<td>websocket SSL 端口号</td>
</tr>
<tr>
<td>remark</td>
<td>string</td>
<td>设备备注</td>
</tr>
<tr>
<td>is_disabled</td>
<td>boolean</td>
<td>是否注销</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>设备类型，单品设备:normal,中控设备:center_control,中控子设备:sub_dev</td>
</tr>
<tr>
<td>dev_alias</td>
<td>string</td>
<td>设备别名</td>
</tr>
<tr>
<td>dev_label</td>
<td>Array[string]</td>
<td>设备标签列表，目前用于语音 API 批量设备控制</td>
</tr>
<tr>
<td>role</td>
<td>string</td>
<td>绑定角色， 首绑用户:special,拥有者:owner,访客:guest,普通用户:normal</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"remark"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="attr">"ws_port"</span>: <span class="number">8080</span>,</span><br><span class="line">  <span class="attr">"did"</span>: <span class="string">"gKufzxZwYeyd3Skbsb6mzz"</span>,</span><br><span class="line">  <span class="attr">"port_s"</span>: <span class="number">8883</span>,</span><br><span class="line">  <span class="attr">"is_disabled"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"host"</span>: <span class="string">"m2m.gizwits.com"</span>,</span><br><span class="line">  <span class="attr">"product_key"</span>: <span class="string">"4214bf2d79694a259232431b6f2ef46a"</span>,</span><br><span class="line">  <span class="attr">"port"</span>: <span class="number">1883</span>,</span><br><span class="line">  <span class="attr">"mac"</span>: <span class="string">"accf2350d446"</span>,</span><br><span class="line">  <span class="attr">"role"</span>: <span class="string">"guest"</span>,</span><br><span class="line">  <span class="attr">"is_online"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"passcode"</span>: <span class="string">"JHHOOIWJBY"</span>,</span><br><span class="line">  <span class="attr">"wss_port"</span>: <span class="number">8880</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="获取设备的通信日志和上下线记录"><a href="#获取设备的通信日志和上下线记录" class="headerlink" title="获取设备的通信日志和上下线记录"></a>获取设备的通信日志和上下线记录</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备远程监控/get_app_devices_did_raw_data" target="_blank" rel="noopener">调试接口</a></p>
<p>用于查询最近7天内任意两天的设备通讯日志和上下线记录。</p>
<h4 id="入参的类型（type）"><a href="#入参的类型（type）" class="headerlink" title="入参的类型（type）"></a>入参的类型（type）</h4><ol>
<li>通信日志查询, type 字段为 cmd</li>
<li>上下线记录查询, type 字段为 online</li>
</ol>
<h4 id="返回结果（type）"><a href="#返回结果（type）" class="headerlink" title="返回结果（type）"></a>返回结果（type）</h4><ul>
<li>meta:</li>
</ul>
<ol>
<li>通信日志查询, type 字段为 cmd</li>
<li>上下线记录查询, type 字段为 online</li>
</ol>
<ul>
<li>objects:</li>
</ul>
<ol>
<li>通信数据查询返回数据字段的 type 字段为 app2dev(app 到设备的通信), dev2app(设备到 app 的通信)</li>
<li>上下线查询返回数据的 type 字段为 dev_online(上线), dev_re_online(完成离线流程前再次登陆), dev_offline(离线)</li>
</ol>
<h4 id="结束时间戳end-time"><a href="#结束时间戳end-time" class="headerlink" title="结束时间戳end_time"></a>结束时间戳end_time</h4><ol>
<li>必须小于等于当前系统时间戳</li>
<li>必须大于开始时间戳.</li>
<li>终止时间戳与开始时间戳之差必须小于48小时</li>
</ol>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/devices/{did}/raw_data?type={type}&amp;start_time={start_time}&amp;end_time={end_time}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备ID</td>
</tr>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">类型，cmd:通信日志；online：上下线记录</td>
</tr>
<tr>
<td style="text-align:left">start_time</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">开始时间戳，单位秒</td>
</tr>
<tr>
<td style="text-align:left">end_time</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">结束时间戳，单位秒</td>
</tr>
<tr>
<td style="text-align:left">skip</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">跳过的条数，跳过条目数+返回条目数必须&lt;=5000, 默认为0</td>
</tr>
<tr>
<td style="text-align:left">limit query</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">返回的条数，需&lt;=1000,默认为20</td>
</tr>
<tr>
<td style="text-align:left">sort</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">排序方式，dese：降序；ase：升序。默认降序</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>sort</td>
<td>string</td>
<td>排序方式，dese：降序；ase：升序</td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>返回的条数</td>
</tr>
<tr>
<td>end_time</td>
<td>integer</td>
<td>结束时间戳</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>设备ID</td>
</tr>
<tr>
<td>skip</td>
<td>integer</td>
<td>跳过的条数</td>
</tr>
<tr>
<td>start_time</td>
<td>integer</td>
<td>开始时间戳</td>
</tr>
<tr>
<td>total</td>
<td>integer</td>
<td>查询结果的条数</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>meta的type。查询类型，cmd:通信日志；online：上下线记录</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>objects的type。 类型：app2dev：app 到设备的通信；dev2app：设备到 app 的通信；dev_online：上线；dev_re_online：完成离线流程前再次登陆；dev_offline：离线</td>
</tr>
<tr>
<td>ip</td>
<td>string</td>
<td>上报数据端的IP地址</td>
</tr>
<tr>
<td>payload_bin</td>
<td>string</td>
<td>通讯数据</td>
</tr>
<tr>
<td>timestamp</td>
<td>integer</td>
<td>上报数据的时间</td>
</tr>
<tr>
<td>source</td>
<td>string</td>
<td>app2dev时，才有此字段触发端的类型，d3：有D3规则引擎触发；client：客户端上报数据</td>
</tr>
<tr>
<td>uid</td>
<td>string</td>
<td>app2dev时，才有此字段。用户的User ID</td>
</tr>
<tr>
<td>appid</td>
<td>string</td>
<td>app2dev时，才有此字段。APP ID</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"meta"</span>: &#123;</span><br><span class="line">    <span class="attr">"sort"</span>: <span class="string">"desc"</span>,</span><br><span class="line">    <span class="attr">"limit"</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">"end_time"</span>: <span class="number">1505871861</span>,</span><br><span class="line">    <span class="attr">"did"</span>: <span class="string">"WCWGkbS4Ttynzwx9brzpEa"</span>,</span><br><span class="line">    <span class="attr">"skip"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"start_time"</span>: <span class="number">1505750399</span>,</span><br><span class="line">    <span class="attr">"total"</span>: <span class="number">17</span>,</span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"cmd"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"objects"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"ip"</span>: <span class="string">"10.104.222.219"</span>,</span><br><span class="line">      <span class="attr">"payload_bin"</span>: <span class="string">"000000030b0000910400000010000000"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"dev2app"</span>,</span><br><span class="line">      <span class="attr">"timestamp"</span>: <span class="number">1505871342.875</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"ip"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">      <span class="attr">"payload_bin"</span>: <span class="string">"0000000309000090010200000010"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"app2dev"</span>,</span><br><span class="line">      <span class="attr">"timestamp"</span>: <span class="number">1505871743.564</span>,</span><br><span class="line">      <span class="attr">"source"</span>: <span class="string">"d3"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"uid"</span>: <span class="string">"c0a85d0773e24f15a6853f3148c80a33"</span>,</span><br><span class="line">      <span class="attr">"timestamp"</span>: <span class="number">1505871743.2</span>,</span><br><span class="line">      <span class="attr">"ip"</span>: <span class="string">"183.233.131.216"</span>,</span><br><span class="line">      <span class="attr">"payload_bin"</span>: <span class="string">"000000030400009002"</span>,</span><br><span class="line">      <span class="attr">"source"</span>: <span class="string">"client"</span>,</span><br><span class="line">      <span class="attr">"appid"</span>: <span class="string">"17f5eabb5782434da65fffdc87e605bf"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"app2dev"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="远程控制设备"><a href="#远程控制设备" class="headerlink" title="远程控制设备"></a>远程控制设备</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备远程监控/post_app_control_did" target="_blank" rel="noopener">调试接口</a></p>
<p>通过云端对设备进行控制</p>
<h4 id="原始指令-raw"><a href="#原始指令-raw" class="headerlink" title="原始指令(raw):"></a>原始指令(raw):</h4><p>默认格式为十进制数组，设置 binary_coding 参数可使用 hex 和 base64，<br>如要发送 payload 为二进制 011000010110001001100011 ，每组byte换成一个十进制数组的值得就是：[97,98,99]；<br>如要发送 payload 为16进制 616263 ，每组byte换成一个十进制数组的值得就是：[97,98,99]。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"raw"</span>: [<span class="number">97</span>,<span class="number">98</span>,<span class="number">99</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="数据点方式-attrs"><a href="#数据点方式-attrs" class="headerlink" title="数据点方式(attrs):"></a>数据点方式(attrs):</h4><p>设备产品必须定义了数据点。如要设置扩展类型的字段 binary 为16进制 1234567 ，需要补齐扩展型长度：<br>扩展型默认为hex16 ，设置 binary_coding 参数可使用 base64 。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"attrs"</span>: &#123;</span><br><span class="line">    <span class="attr">"binary"</span>: <span class="string">"1234567000"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/control/{did}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备ID</td>
</tr>
<tr>
<td style="text-align:left">raw</td>
<td style="text-align:left">Array[integer]</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">原始控制指令</td>
</tr>
<tr>
<td style="text-align:left">attrs</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
</tr>
</tbody>
</table>
<p>注：body的参数最少填写输入一个</p>
<p>响应参数</p>
<pre><code>无
</code></pre><h1 id="设备分享"><a href="#设备分享" class="headerlink" title="设备分享"></a>设备分享</h1><p>开启设备分享功能后，<a href="#绑定管理">“绑定角色”</a>就会有 Owner 和 Guest。</p>
<h4 id="设备分享的主要有两种方式："><a href="#设备分享的主要有两种方式：" class="headerlink" title="设备分享的主要有两种方式："></a>设备分享的主要有两种方式：</h4><ul>
<li>普通设备分享</li>
<li>通过二维码分享设备</li>
</ul>
<h4 id="分享使用场景"><a href="#分享使用场景" class="headerlink" title="分享使用场景"></a>分享使用场景</h4><h4 id="普通设备分享"><a href="#普通设备分享" class="headerlink" title="普通设备分享"></a>普通设备分享</h4><ul>
<li>Owner 选择一个要分享的设备，调用<a href="#创建分享邀请">创建分享邀请</a>接口创建分享邀请</li>
<li>Owner 和 Guest 都将收到一条设备分享消息</li>
<li>被分享的用户调用<a href="#查询分享列表">查询分享邀请</a>接口，查询分享给自己的邀请</li>
<li>被分享的用户调用<a href="#接受/拒绝分享">接受分享邀请</a>接口接受邀请，被分享的用户成为 Guest</li>
<li>Owner 和 Guest 都将收到一条设备接受分享消息</li>
</ul>
<h4 id="通过二维码分享设备"><a href="#通过二维码分享设备" class="headerlink" title="通过二维码分享设备"></a>通过二维码分享设备</h4><ul>
<li>Owner 选择一个要分享的设备，调用<a href="#创建分享邀请">创建分享邀请</a>接口创建分享邀请</li>
<li>接口返回字段中的 qr_content 生成二维码信息，Owner 将二维码图片展示给需要分享的用户</li>
<li>用户扫描二维码，获取邀请码，调用<a href="#查询二维码分享信息">查询二维码分享信息</a>接口，查看分享内容</li>
<li>再调用<a href="#接受二维码分享邀请">接受二维码分享邀请</a>接口，接受分享邀请，被分享的用户成为 Guest</li>
<li>Owner 和 Guest 都将收到一条设备分享消息</li>
</ul>
<h4 id="取消设备分享"><a href="#取消设备分享" class="headerlink" title="取消设备分享"></a>取消设备分享</h4><ul>
<li>Owner 调用<a href="#取消/收回分享">取消/收回分享</a>接口，取消分享出去的邀请取消，及收回已经接受的邀请</li>
<li>Guest 用户若还没有接受，Owner 将收到一条设备取消分享消息</li>
<li>Guest 用户对设备的绑定被取消，同时，Owner 和 Guest 都将收到一条设备取消分享消息</li>
</ul>
<h4 id="Owner-权限转移"><a href="#Owner-权限转移" class="headerlink" title="Owner 权限转移"></a>Owner 权限转移</h4><ul>
<li>Owner 调用<a href="#Owner 权限转移">权限转移</a>接口，填写需要转移的设备和需要成为owner用户的ID</li>
<li>原 Owner 用户解绑设备，原 Guest 用户成为新的 Owner</li>
</ul>
<h2 id="创建分享邀请"><a href="#创建分享邀请" class="headerlink" title="创建分享邀请"></a>创建分享邀请</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/post_app_sharing" target="_blank" rel="noopener">调试接口</a></p>
<p>此接口只有设备主账号可以调用</p>
<ul>
<li>如果 type 为普通分享，uid/username/email/phone 四选一，为是被分享者的用户信息；</li>
<li>如果 type 为二维码分享，uid、username、email、phone 设置为空，若设置不会生效；</li>
<li>普通分享24小时过期，二维码分享15分钟过期；</li>
<li>针对二维码分享，客户端收到返回的二维码内容之后，本地生成二维码图片；</li>
</ul>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/sharing
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">分享类型，0：普通分享，1：二维码分享</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">设备ID</td>
</tr>
<tr>
<td style="text-align:left">uid</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">普通分享类型，被分享的用户ID</td>
</tr>
<tr>
<td style="text-align:left">username</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">普通分享类型，被分享的用户名</td>
</tr>
<tr>
<td style="text-align:left">email</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">普通分享类型，被分享的用户邮箱地址</td>
</tr>
<tr>
<td style="text-align:left">phone</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">普通分享类型，被分享的用户手机号码</td>
</tr>
<tr>
<td style="text-align:left">duration</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">持续分享时间，guest 接受分享之后可使用设备的时长，单位：分钟。最小时长 1 分钟，最大时长 1440 分钟</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>分享记录id，针对普通分享才有</td>
</tr>
<tr>
<td>qr_content</td>
<td>integer</td>
<td>二维码图片内容，针对二维码分享才有</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"qr_content"</span>: <span class="string">"type=share&amp;code=60a6cacabe4046f4aa25ac1f79d81a4f"</span>,</span><br><span class="line">    <span class="attr">"id"</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="查询分享邀请"><a href="#查询分享邀请" class="headerlink" title="查询分享邀请"></a>查询分享邀请</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/get_app_sharing" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/sharing?sharing_type={sharing_type}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">sharing_type</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">分享类型，0：我分享的设备，1：分享给我的设备</td>
</tr>
<tr>
<td style="text-align:left">status</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">分享状态，0：未接受分享，1：已接受分享，2：拒绝分享，3：取消分享</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">指定的设备did，只有owner用户可查询指定did的分享信息</td>
</tr>
<tr>
<td style="text-align:left">limit</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">返回的条数，默认20</td>
</tr>
<tr>
<td style="text-align:left">skip</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">跳过的条数，默认0</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>total</td>
<td>integer</td>
<td>总条数</td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>返回的条数</td>
</tr>
<tr>
<td>skip</td>
<td>integer</td>
<td>跳过的条数</td>
</tr>
<tr>
<td>previous</td>
<td>string</td>
<td>上一页的请求地址</td>
</tr>
<tr>
<td>next</td>
<td>string</td>
<td>下一页的请求地址</td>
</tr>
<tr>
<td>id</td>
<td>integer</td>
<td>分享记录id</td>
</tr>
<tr>
<td>type</td>
<td>integer</td>
<td>分享类型，0：普通分享，1：二维码分享</td>
</tr>
<tr>
<td>uid</td>
<td>string</td>
<td>用户ID</td>
</tr>
<tr>
<td>username</td>
<td>string</td>
<td>用户名,中间4个字母*替代</td>
</tr>
<tr>
<td>user_alias</td>
<td>string</td>
<td>用户别名</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>用户邮箱地址,@前面4个字符*替代</td>
</tr>
<tr>
<td>phone</td>
<td>string</td>
<td>用户手机号码,中间4个数字*替代</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>设备id</td>
</tr>
<tr>
<td>product_name</td>
<td>string</td>
<td>产品名称</td>
</tr>
<tr>
<td>dev_alias</td>
<td>string</td>
<td>设备别名</td>
</tr>
<tr>
<td>status</td>
<td>integer</td>
<td>当前分享状态 0：未接受分享，1：已接受分享，2：拒绝分享，3：取消分享</td>
</tr>
<tr>
<td>created_at</td>
<td>string</td>
<td>创建分享时间 （UTC时间）</td>
</tr>
<tr>
<td>updated_at</td>
<td>string</td>
<td>分享状态更新时间 （UTC时间）</td>
</tr>
<tr>
<td>expired_at</td>
<td>string</td>
<td>分享超时时间 （UTC时间）</td>
</tr>
</tbody>
</table>
<p>注：</p>
<ul>
<li>若 sharing_type 为 0，表示以 Owner 身份查询自己发出的分享邀请，返回结果中用户信息为 Guest 的信息</li>
<li>若 sharing_type 为 1，表示以 Guest 身份查询收到的分享邀请，返回结果中的用户信息为 Owner 的信息</li>
</ul>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"meta"</span>: &#123;</span><br><span class="line">    <span class="attr">"previous"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"skip"</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="attr">"total"</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">"limit"</span>: <span class="number">20</span>,</span><br><span class="line">    <span class="attr">"next"</span>: <span class="literal">null</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"objects"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"status"</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">"username"</span>: <span class="string">"G****s"</span>,</span><br><span class="line">      <span class="attr">"uid"</span>: <span class="string">"f082f4e235974cfeb6a1b2346024f47e"</span>,</span><br><span class="line">      <span class="attr">"did"</span>: <span class="string">"gKufzxZwYeyd3Skbsb6mza"</span>,</span><br><span class="line">      <span class="attr">"created_at"</span>: <span class="string">"2017-07-21T09:46:56Z"</span>,</span><br><span class="line">      <span class="attr">"updated_at"</span>: <span class="string">"2017-07-21T09:46:56Z"</span>,</span><br><span class="line">      <span class="attr">"email"</span>: <span class="string">"G****s@gizwits.com"</span>,</span><br><span class="line">      <span class="attr">"phone"</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">"dev_alias"</span>: <span class="string">"设备别名"</span>,</span><br><span class="line">      <span class="attr">"id"</span>: <span class="number">10411</span>,</span><br><span class="line">      <span class="attr">"user_alias"</span>: <span class="string">"gizwits"</span>,</span><br><span class="line">      <span class="attr">"type"</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">"product_name"</span>: <span class="string">"微信宠物屋"</span>,</span><br><span class="line">      <span class="attr">"expired_at"</span>: <span class="string">"2017-07-22T09:46:56Z"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="取消-收回分享"><a href="#取消-收回分享" class="headerlink" title="取消/收回分享"></a>取消/收回分享</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/delete_app_sharing_id" target="_blank" rel="noopener">调试接口</a></p>
<p>二维码分享的设备无法收回</p>
<p>请求地址及方式</p>
<pre><code>DELETE
https://api.gizwits.com/app/sharing/{id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">分享记录id</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>分享记录id</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">10471</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="接受-拒绝分享"><a href="#接受-拒绝分享" class="headerlink" title="接受/拒绝分享"></a>接受/拒绝分享</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/put_app_sharing_id" target="_blank" rel="noopener">调试接口</a></p>
<p>二维码分享的设备无法收回</p>
<p>请求地址及方式</p>
<pre><code>PUT
https://api.gizwits.com/app/sharing/{id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">分享记录id</td>
</tr>
<tr>
<td style="text-align:left">status</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">接受/拒绝分享，1：接受分享，2：拒绝分享</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>integer</td>
<td>分享记录id</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"id"</span>: <span class="number">10471</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="获取二维码分享信息"><a href="#获取二维码分享信息" class="headerlink" title="获取二维码分享信息"></a>获取二维码分享信息</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/get_app_sharing" target="_blank" rel="noopener">调试接口</a></p>
<p>设备拥有者 owner 无法使用此接口</p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/sharing/code/{code}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">二维码分享的qr_content</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>owner</td>
<td>string</td>
<td>设备拥有者信息，手机号/邮箱/用户名/uid</td>
</tr>
<tr>
<td>product_name</td>
<td>string</td>
<td>产品名称</td>
</tr>
<tr>
<td>dev_alias</td>
<td>string</td>
<td>设备别名</td>
</tr>
<tr>
<td>expired_at</td>
<td>string</td>
<td>分享超时时间（UTC时间）</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"owner"</span>: <span class="string">"G****s"</span>,</span><br><span class="line">  <span class="attr">"product_name"</span>: <span class="string">"微信宠物屋"</span>,</span><br><span class="line">  <span class="attr">"dev_alias"</span>: <span class="string">"设备别名"</span>,</span><br><span class="line">  <span class="attr">"expired_at"</span>: <span class="string">"2017-08-21T12:22:58Z"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="接受二维码分享邀请"><a href="#接受二维码分享邀请" class="headerlink" title="接受二维码分享邀请"></a>接受二维码分享邀请</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/post_app_sharing_code_code" target="_blank" rel="noopener">调试接口</a></p>
<p>设备拥有者 owner 无法使用此接口</p>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/sharing/code/{code}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">code</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">二维码分享的qr_content</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h2 id="修改用户备注信息"><a href="#修改用户备注信息" class="headerlink" title="修改用户备注信息"></a>修改用户备注信息</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/put_app_sharing_id_alias" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>PUT
https://api.gizwits.com/app/sharing/{id}/alias?user_alias={user_alias}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">分享记录id</td>
</tr>
<tr>
<td style="text-align:left">user_alias</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h2 id="owner-权限转移"><a href="#owner-权限转移" class="headerlink" title="owner 权限转移"></a>owner 权限转移</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分享/post_app_sharing_did_transfer" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/sharing/1/transfer?uid=1
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left"></td>
<td style="text-align:left">设备ID</td>
</tr>
<tr>
<td style="text-align:left">uid</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">需要成为owner用户的ID</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h1 id="设备分组"><a href="#设备分组" class="headerlink" title="设备分组"></a>设备分组</h1><h4 id="设备分组常用场景："><a href="#设备分组常用场景：" class="headerlink" title="设备分组常用场景："></a>设备分组常用场景：</h4><p>1、将多个设备归类到某一个物理空间，如：房间、客厅。方便管理</p>
<ul>
<li>首先调用<a href="#创建分组">创建分组</a>接口创建分组，输入分组名称</li>
<li>创建成功后对分组内的设备进行批量添加/删除，调用<a href="#将设备列表添加到分组">将设备列表添加到分组</a>接口和<a href="#将设备列表从分组移除">将设备列表从分组移除</a>接口</li>
<li>通过<a href="#查询分组的设备信息">查询分组的设备信息</a>接口可以查看分组下的全部设备</li>
</ul>
<p>2、对相同产品的多个设备进行统一控制，如：走廊的全部灯开关</p>
<ul>
<li>首先调用<a href="#创建分组">创建分组</a>接口创建分组，输入分组名称和产品PK</li>
<li>创建成功后对分组内的设备进行批量添加/删除，调用<a href="#将设备列表添加到分组">将设备列表添加到分组</a>接口和<a href="#将设备列表从分组移除">将设备列表从分组移除</a>接口</li>
<li>通过<a href="#对设备分组内的设备统一控制">对设备分组内的设备统一控制</a>接口对设备发送统一的控制指令，从而进行对设备的批量控制</li>
</ul>
<h2 id="查询用户所有的分组"><a href="#查询用户所有的分组" class="headerlink" title="查询用户所有的分组"></a>查询用户所有的分组</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分组/get_app_group" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/group
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>created_at</td>
<td>string</td>
<td>设备分组创建时间（UTC 时间）</td>
</tr>
<tr>
<td>updated_at</td>
<td>string</td>
<td>设备分组更新时间（UTC 时间）</td>
</tr>
<tr>
<td>product_key</td>
<td>string</td>
<td>产品 product_key，单PK的分组才会有值</td>
</tr>
<tr>
<td>group_name</td>
<td>string</td>
<td>设备分组名称</td>
</tr>
<tr>
<td>verbose_name</td>
<td>string</td>
<td>产品名称，单PK的分组才会有值</td>
</tr>
<tr>
<td>id</td>
<td>string</td>
<td>设备分组 id</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"created_at"</span>: <span class="string">"2017-09-22T09:57:44Z"</span>,</span><br><span class="line">    <span class="attr">"updated_at"</span>: <span class="string">"2017-09-22T09:57:44Z"</span>,</span><br><span class="line">    <span class="attr">"product_key"</span>: <span class="string">"4214b12d79694a259232431b6f2ef46a"</span>,</span><br><span class="line">    <span class="attr">"group_name"</span>: <span class="string">"分组名称1"</span>,</span><br><span class="line">    <span class="attr">"verbose_name"</span>: <span class="string">"微信宠物屋"</span>,</span><br><span class="line">    <span class="attr">"id"</span>: <span class="string">"59c4de98dc348f001a08feba"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"created_at"</span>: <span class="string">"2017-09-22T09:58:18Z"</span>,</span><br><span class="line">    <span class="attr">"updated_at"</span>: <span class="string">"2017-09-22T09:58:18Z"</span>,</span><br><span class="line">    <span class="attr">"product_key"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"group_name"</span>: <span class="string">"分组名称2"</span>,</span><br><span class="line">    <span class="attr">"verbose_name"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"id"</span>: <span class="string">"59c4deba8c7d50001ba06df3"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="创建分组"><a href="#创建分组" class="headerlink" title="创建分组"></a>创建分组</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分组/post_app_group" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/group
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">product_key</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">产品PK，对单个pk分组需要输入此参数</td>
</tr>
<tr>
<td style="text-align:left">group_name</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">设备分组名称</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>设备分组 id</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"id"</span>: <span class="string">"59c4deba8c7d50001ba06df3"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="删除设备分组"><a href="#删除设备分组" class="headerlink" title="删除设备分组"></a>删除设备分组</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分组/delete_app_group_id" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>DELETE
https://api.gizwits.com/app/group/{id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备分组 id</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h2 id="修改分组信息"><a href="#修改分组信息" class="headerlink" title="修改分组信息"></a>修改分组信息</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分组/delete_app_group_id" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>PUT
https://api.gizwits.com/app/group/{id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备分组 id</td>
</tr>
<tr>
<td style="text-align:left">group_name</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">设备分组名称</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h2 id="查询分组的设备信息"><a href="#查询分组的设备信息" class="headerlink" title="查询分组的设备信息"></a>查询分组的设备信息</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分组/get_app_group_id_devices" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/group/{id}/devices
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备分组 ID</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>did</td>
<td>string</td>
<td>该分组下的设备ID</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>设备类型：普通设备：noramal；中控设备：center_control；中控子设备：sub_dev</td>
</tr>
<tr>
<td>verbose_name</td>
<td>string</td>
<td>产品名称，单PK的分组才会有值</td>
</tr>
<tr>
<td>dev_alias</td>
<td>string</td>
<td>设备别名</td>
</tr>
<tr>
<td>product_key</td>
<td>string</td>
<td>产品 product_key，单PK的分组才会有值</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"did"</span>: <span class="string">"WCWGkbS4Ttynzwx9brzpEa"</span>,</span><br><span class="line">    <span class="attr">"type"</span>: <span class="string">"normal"</span>,</span><br><span class="line">    <span class="attr">"verbose_name"</span>: <span class="string">"微信宠物屋"</span>,</span><br><span class="line">    <span class="attr">"dev_alias"</span>: <span class="string">"设备别名"</span>,</span><br><span class="line">    <span class="attr">"product_key"</span>: <span class="string">"4234bf2d79694a259232431b6f2ef46a"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="将设备列表添加到分组"><a href="#将设备列表添加到分组" class="headerlink" title="将设备列表添加到分组"></a>将设备列表添加到分组</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分组/post_app_group" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/group/{id}/devices?show_detail={show_detail}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备分组 ID</td>
</tr>
<tr>
<td style="text-align:left">show_detail</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">返回错误信息，1：添加失败的did返回详细错误信息，0(默认值)：添加失败的did，不返回详细错误信息</td>
</tr>
<tr>
<td style="text-align:left">dids</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">需要添加到分组的设备ID数组</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>failed</td>
<td>Array</td>
<td>添加成功的设备ID 数组</td>
</tr>
<tr>
<td>detail</td>
<td>Array</td>
<td>添加失败原因，show_detail为1时候才会返回此信息</td>
</tr>
<tr>
<td>success</td>
<td>Array</td>
<td>添加失败的设备ID 数组</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>添加的失败的设备ID</td>
</tr>
<tr>
<td>error_message</td>
<td>string</td>
<td>失败错误信息</td>
</tr>
<tr>
<td>error_code</td>
<td>integer</td>
<td>失败错误码</td>
</tr>
<tr>
<td>detail_msg</td>
<td>string</td>
<td>详细错误信息</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"failed"</span>: [</span><br><span class="line">      <span class="string">"WCWGkbS4Ttynz123czpEa"</span></span><br><span class="line">    ],</span><br><span class="line">  <span class="attr">"detail"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"did"</span>: <span class="string">"WCWGkbS123cynzwxrzpEa"</span>,</span><br><span class="line">        <span class="attr">"error_message"</span>: <span class="string">"device not found!"</span>,</span><br><span class="line">        <span class="attr">"error_code"</span>: <span class="number">9014</span>,</span><br><span class="line">        <span class="attr">"detail_msg"</span>: <span class="literal">null</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">  <span class="attr">"success"</span>: [</span><br><span class="line">    <span class="string">"XD3GkbS21tynzwx9brzpEa"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="将设备列表从分组移除"><a href="#将设备列表从分组移除" class="headerlink" title="将设备列表从分组移除"></a>将设备列表从分组移除</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分组/delete_app_group_id_devices" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>DELETE
https://api.gizwits.com/app/group/{id}/devices
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备分组 ID</td>
</tr>
<tr>
<td style="text-align:left">dids</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">需要移出分组的设备ID数组</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>failed</td>
<td>Array</td>
<td>添加成功的设备ID 数组</td>
</tr>
<tr>
<td>success</td>
<td>Array</td>
<td>添加失败的设备ID 数组</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>添加的失败的设备ID</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"failed"</span>: [],</span><br><span class="line">  <span class="attr">"success"</span>: [</span><br><span class="line">    <span class="string">"WCWGkb234tynzwx9brzpEa"</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="对设备分组内的设备统一控制"><a href="#对设备分组内的设备统一控制" class="headerlink" title="对设备分组内的设备统一控制"></a>对设备分组内的设备统一控制</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备分组/post_app_group_id_control" target="_blank" rel="noopener">调试接口</a></p>
<p>通过云端对分组内的所有设备进行控制，该接口只能统一控制单PK分组的设备。</p>
<h4 id="原始指令-raw-1"><a href="#原始指令-raw-1" class="headerlink" title="原始指令(raw):"></a>原始指令(raw):</h4><p>默认格式为十进制数组，设置 binary_coding 参数可使用 hex 和 base64，<br>如要发送 payload 为二进制 011000010110001001100011 ，每组byte换成一个十进制数组的值得就是：[97,98,99]；<br>如要发送 payload 为16进制 616263 ，每组byte换成一个十进制数组的值得就是：[97,98,99]。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"raw"</span>: [<span class="number">97</span>,<span class="number">98</span>,<span class="number">99</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="数据点方式-attrs-1"><a href="#数据点方式-attrs-1" class="headerlink" title="数据点方式(attrs):"></a>数据点方式(attrs):</h4><p>设备产品必须定义了数据点。如要设置扩展类型的字段 binary 为1234567(16进制)，需要补齐扩展型长度；<br>扩展型默认为hex16 ，设置 binary_coding 参数可使用 base64 。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"attrs"</span>: &#123;</span><br><span class="line">    <span class="attr">"boolean"</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"binary"</span>: <span class="string">"1234567000"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/group/{id}/control
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备分组 ID</td>
</tr>
<tr>
<td style="text-align:left">raw</td>
<td style="text-align:left">Array[integer]</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">原始控制指令</td>
</tr>
<tr>
<td style="text-align:left">attrs</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>did</td>
<td>string</td>
<td>分组下的设备ID</td>
</tr>
<tr>
<td>result</td>
<td>boolean</td>
<td>是否控制成功，true：成功；false：失败</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"did"</span>: <span class="string">"WCWGkbS4Tty123x9brzpEa"</span>,</span><br><span class="line">    <span class="attr">"result"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"did"</span>: <span class="string">"gKufzxZw43dd3Skbsb6mzz"</span>,</span><br><span class="line">    <span class="attr">"result"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h1 id="设备联动"><a href="#设备联动" class="headerlink" title="设备联动"></a>设备联动</h1><p>创建设备联动的规则，实现一个或多个设备的状态变化时，自动控制一个或多个设备的状态改变。</p>
<p>联动的设备需要绑定同一个用户，不同产品下的设备需要先进行产品关联。</p>
<p>联动规则创建后，可以随时进行修改，或者删除。</p>
<p><a href="http://docs.gizwits.com/zh-cn/UserManual/LinkageAPI.html" target="_blank" rel="noopener">点击查看详细使用教程</a></p>
<h2 id="查询规则可用变量"><a href="#查询规则可用变量" class="headerlink" title="查询规则可用变量"></a>查询规则可用变量</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备联动/get_app_rules_params" target="_blank" rel="noopener">调试接口</a></p>
<p>通过该接口可以查询appid所绑定的全部产品的数据点。</p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/rules/params?product_key={product_key}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">product_key</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">多个pk用“,”隔开，参数为空时默认选中与appid绑定的所有pk，填入与appid无绑定的pk时该pk无效</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>display_name</td>
<td>string</td>
<td>数据点显示名称</td>
</tr>
<tr>
<td>enum</td>
<td>Array</td>
<td>枚举值</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>数据类型，数值型:int；布尔型:bool；枚举型:enum;扩展型：binary</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>数据点名称</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"4214b435f9694a259232431b6f2ef46a"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"display_name"</span>: <span class="string">"开关"</span>,</span><br><span class="line">      <span class="attr">"enum"</span>: [],</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"bool"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"switch"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"display_name"</span>: <span class="string">"倒计时开机"</span>,</span><br><span class="line">      <span class="attr">"enum"</span>: [],</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"int"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"on_timing"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"display_name"</span>: <span class="string">"倒计时关机"</span>,</span><br><span class="line">      <span class="attr">"enum"</span>: [],</span><br><span class="line">      <span class="attr">"type"</span>: <span class="string">"int"</span>,</span><br><span class="line">      <span class="attr">"name"</span>: <span class="string">"off_timing"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="查询联动规则列表"><a href="#查询联动规则列表" class="headerlink" title="查询联动规则列表"></a>查询联动规则列表</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备联动/get_app_rules" target="_blank" rel="noopener">调试接口</a></p>
<p>通过该接口可以查询appid所绑定的全部产品的数据点。</p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/rules?limit=20&amp;skip=0
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">limit</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">返回的结果条数</td>
</tr>
<tr>
<td style="text-align:left">skip</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">表示跳过的条数，间接表示页数</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>remark</td>
<td>string</td>
<td>联动规则备注</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>联动规则名称</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>设备ID</td>
</tr>
<tr>
<td>interval</td>
<td>integer</td>
<td>最小触发间隔(单位:秒)</td>
</tr>
<tr>
<td>product_key</td>
<td>string</td>
<td>产品PK</td>
</tr>
<tr>
<td>rule_id</td>
<td>integer</td>
<td>联动规则ID</td>
</tr>
<tr>
<td>event</td>
<td>string</td>
<td>触发方式</td>
</tr>
<tr>
<td>event_attr</td>
<td>object</td>
<td>当触发方式为alert(报警)/fault(故障)，[RulesEventAttr]</td>
</tr>
<tr>
<td>input</td>
<td>Array</td>
<td>规则中需要用到的设备数据 [RulesInput]</td>
</tr>
<tr>
<td>condition</td>
<td>Array</td>
<td>条件判断 [RulesCondition]</td>
</tr>
<tr>
<td>output</td>
<td>Array</td>
<td>触发动作 [RulesOutput]</td>
</tr>
<tr>
<td>RulesEventAttr</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>attr_name</td>
<td>string</td>
<td>发生这个报警/故障的数据点</td>
</tr>
<tr>
<td>value</td>
<td>string</td>
<td>报警/故障的发生/取消, 1表示发生, 0表示取消</td>
</tr>
<tr>
<td>RulesOutput</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>被控制的设备id</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>触发类型，devctrl:控制设备；delay：延时</td>
</tr>
<tr>
<td>attrs</td>
<td>object</td>
<td>数据点方式控制设备</td>
</tr>
<tr>
<td>raw</td>
<td>Array</td>
<td>原始控制指令</td>
</tr>
<tr>
<td>delay</td>
<td>integer</td>
<td>延时时长, 单位:秒</td>
</tr>
<tr>
<td>RulesInput</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>规则数据的来源的设备id</td>
</tr>
<tr>
<td>prefix</td>
<td>string</td>
<td>用于在条件及输出中引用这个设备的数据点值的前缀</td>
</tr>
<tr>
<td>product_key</td>
<td>string</td>
<td>规则数据的来源的设备对应的产品PK</td>
</tr>
<tr>
<td>RulesCondition</td>
<td>——————</td>
<td>——————</td>
</tr>
<tr>
<td>opt</td>
<td>string</td>
<td>比较运算符, 可选值有: &gt;, &gt;=, &lt;, &lt;=, ==, != (注:只有数值类型才能比较大小)</td>
</tr>
<tr>
<td>right</td>
<td>string</td>
<td>右比较参数</td>
</tr>
<tr>
<td>left</td>
<td>string</td>
<td>左比较参数</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"rules"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">"remark"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="attr">"name"</span>: <span class="string">"打开开关，三灯100值"</span>,</span><br><span class="line">            <span class="attr">"did"</span>: <span class="string">"WCWGkbS4Ttynzwx9brzpEa"</span>,</span><br><span class="line">            <span class="attr">"interval"</span>: <span class="number">0</span>,</span><br><span class="line">            <span class="attr">"product_key"</span>: <span class="string">"4214bf2d123194a259232431b6f2ef46a"</span>,</span><br><span class="line">            <span class="attr">"event"</span>: <span class="string">"data"</span>,</span><br><span class="line">            <span class="attr">"output"</span>: [</span><br><span class="line">                [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"did"</span>: <span class="string">"WCWGk43ftynzwx9brzpEa"</span>,</span><br><span class="line">                        <span class="attr">"type"</span>: <span class="string">"devctrl"</span>,</span><br><span class="line">                        <span class="attr">"attrs"</span>: &#123;</span><br><span class="line">                            <span class="attr">"LED_R"</span>: <span class="number">100</span>,</span><br><span class="line">                            <span class="attr">"LED_G"</span>: <span class="number">100</span>,</span><br><span class="line">                            <span class="attr">"LED_B"</span>: <span class="number">100</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"did"</span>: <span class="string">"WCWGk43ftynzwx9brzpEa"</span>,</span><br><span class="line">                        <span class="attr">"type"</span>: <span class="string">"devctrl"</span>,</span><br><span class="line">                        <span class="attr">"attrs"</span>: &#123;</span><br><span class="line">                            <span class="attr">"fan_swing"</span>: <span class="number">1</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"input"</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"did"</span>: <span class="string">"WCWGk43ftynzwx9brzpEa"</span>,</span><br><span class="line">                    <span class="attr">"prefix"</span>: <span class="string">"device1"</span>,</span><br><span class="line">                    <span class="attr">"product_key"</span>: <span class="string">"4214bf2d123194a259232431b6f2ef46a"</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">"did"</span>: <span class="string">"WCWGk43ftynzwx9brzpEa"</span>,</span><br><span class="line">                    <span class="attr">"prefix"</span>: <span class="string">"device2"</span>,</span><br><span class="line">                    <span class="attr">"product_key"</span>: <span class="string">"4214bf2d123194a259232431b6f2ef46a"</span></span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"rule_id"</span>: <span class="number">8826</span>,</span><br><span class="line">            <span class="attr">"condition"</span>: [</span><br><span class="line">                [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">"opt"</span>: <span class="string">"=="</span>,</span><br><span class="line">                        <span class="attr">"right"</span>: <span class="string">"1"</span>,</span><br><span class="line">                        <span class="attr">"left"</span>: <span class="string">"device1.switch"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="创建联动规则"><a href="#创建联动规则" class="headerlink" title="创建联动规则"></a>创建联动规则</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备联动/post_app_rules" target="_blank" rel="noopener">调试接口</a></p>
<h3 id="product-key与did"><a href="#product-key与did" class="headerlink" title="product_key与did:"></a>product_key与did:</h3><p>当触发方式为online/offline/alert/fault/data时, 产生这个触发方式的设备由该参数指定, 以下把指定的这个设备称为主设备</p>
<h3 id="event参数"><a href="#event参数" class="headerlink" title="event参数"></a>event参数</h3><p>表示该规则的触发方式,以下是可选值的意义:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">online  : 设备上线</span><br><span class="line">offline : 设备下线</span><br><span class="line">alert   : 设备某个报警数据点发生报警</span><br><span class="line">fault   : 设备某个故障数据点发生故障</span><br><span class="line">data    : 设备上报状态</span><br></pre></td></tr></table></figure></p>
<h3 id="event-attr参数"><a href="#event-attr参数" class="headerlink" title="event_attr参数"></a>event_attr参数</h3><p>表示当触发方式为alert(报警)/fault(故障)时, 发生这个报警/故障的数据点,以及报警/故障的发生/恢复,由该参数指定<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"event_attr"</span>: &#123;</span><br><span class="line">    <span class="string">"attr_name"</span>: <span class="string">"datapoint_alert"</span>,  <span class="comment">//发生这个报警/故障的数据点</span></span><br><span class="line">    <span class="string">"value"</span>: <span class="string">"1"</span> <span class="comment">//报警/故障的发生/取消, 值为1时表示发生, 值为0时表示取消</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="注"><a href="#注" class="headerlink" title="注:"></a>注:</h4><ul>
<li>这里提到的报警/故障的”发生”指的是－设备上一次上报的报警/故障数据点的值为0, 这一次上报的为1, 那么报警/故障发生</li>
<li>这里提到的报警/故障的”恢复”指的是－设备上一次上报的报警/故障数据点的值为1, 这一次上报的为0, 那么报警/故障恢复</li>
<li>其他情况均不属于”发生”和”恢复”</li>
</ul>
<h3 id="input参数"><a href="#input参数" class="headerlink" title="input参数"></a>input参数</h3><p>指定规则中需要用到的设备数据,数组中每一个对象代表一个设备的数据,不需要使用设备数据时可忽略此参数:<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[&#123;</span><br><span class="line">    <span class="string">"product_key"</span>: <span class="string">"pk1"</span>, <span class="comment">//设备所属Product key</span></span><br><span class="line">    <span class="string">"did"</span>: <span class="string">"did1"</span>,        <span class="comment">//设备did</span></span><br><span class="line">    <span class="string">"prefix"</span>: <span class="string">"device1"</span>   <span class="comment">//用于在条件及输出中引用这个设备的数据点值的前缀, 如设置了这个参数为device1时,则device1.datapoint1表示引用这个设备的标识名为datapoint1的数据点</span></span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure></p>
<h3 id="condition参数"><a href="#condition参数" class="headerlink" title="condition参数"></a>condition参数</h3><p>指定触发规则需要满足的条件, 云端处理时将逐组检查数组内的条件, 任意一组条件满足时触发输出<br><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    [&#123;</span><br><span class="line">        <span class="string">"left"</span>: <span class="string">"device1.datapoint1"</span>,<span class="comment">//左比较参数, 参数的值类型需要和右比较参数一致</span></span><br><span class="line">        <span class="string">"opt"</span>: <span class="string">"=="</span>, <span class="comment">//比较运算符, 可选值有: &gt;, &gt;=, &lt;, &lt;=, ==, != (注:只有数值类型才能比较大小)</span></span><br><span class="line">        <span class="string">"right"</span>: <span class="string">"1"</span> <span class="comment">//右比较参数, 参数的值类型需要和左比较参数一致,使用常数时注意,"1"代表数字1,"'1'"或"\"1\""才是字符串"1"</span></span><br><span class="line">    &#125;],</span><br><span class="line">    [&#123;<span class="comment">// 每个数组表示一组条件，当这个组里的所有条件都满足时，这一组条件满足</span></span><br><span class="line">        <span class="string">"left"</span>: <span class="string">"device1.datapoint1"</span>,</span><br><span class="line">        <span class="string">"opt"</span>: <span class="string">"=="</span>,</span><br><span class="line">        <span class="string">"right"</span>: <span class="string">"1"</span></span><br><span class="line">    &#125;,&#123;</span><br><span class="line">        <span class="string">"left"</span>: <span class="string">"device2.datapoint2"</span>,</span><br><span class="line">        <span class="string">"opt"</span>: <span class="string">"&gt;"</span>,</span><br><span class="line">        <span class="string">"right"</span>: <span class="string">"25"</span></span><br><span class="line">    &#125;]</span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>
<h3 id="output参数"><a href="#output参数" class="headerlink" title="output参数"></a>output参数</h3><p>指定当条件满足时, 需要做的事情，可认为云端同时执行各组动作，各组之间互不影响</p>
<h4 id="原始指令-raw-2"><a href="#原始指令-raw-2" class="headerlink" title="原始指令(raw):"></a>原始指令(raw):</h4><p>默认格式为十进制数组<br>如要发送 payload 为二进制 011000010110001001100011 ，每组byte换成一个十进制数组的值得就是：[97,98,99]；<br>如要发送 payload 为16进制 616263 ，每组byte换成一个十进制数组的值得就是：[97,98,99]。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"raw"</span>: [<span class="number">97</span>,<span class="number">98</span>,<span class="number">99</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="数据点方式-attrs-2"><a href="#数据点方式-attrs-2" class="headerlink" title="数据点方式(attrs):"></a>数据点方式(attrs):</h4><p>设备产品必须定义了数据点。如要设置扩展类型的字段 binary 为16进制 1234567，需要补齐扩展型长度：<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"attrs"</span>: &#123;</span><br><span class="line">    <span class="attr">"binary"</span>: <span class="string">"1234567000"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="output参数示例："><a href="#output参数示例：" class="headerlink" title="output参数示例："></a>output参数示例：</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    [&#123; // 每个数组表示一组输出动作，按顺序执行，前面的动作执行失败时，后面不会执行</span><br><span class="line">        <span class="string">"type"</span>: <span class="string">"devctrl"</span>,   // output的类型, devctrl表示控制设备</span><br><span class="line">        <span class="string">"did"</span>: <span class="string">"did1"</span>,       // 指定被控制的设备的did</span><br><span class="line">        <span class="string">"attrs"</span>: &#123;           // key-value形式</span><br><span class="line">            <span class="string">"datapoint1"</span>: <span class="number">1</span>, // 设置datapoint1值为<span class="number">1</span></span><br><span class="line">            <span class="string">"datapoint2"</span>: <span class="number">25</span>,</span><br><span class="line">            <span class="string">"datapoint3"</span>: <span class="string">"黄色"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">        <span class="string">"type"</span>: <span class="string">"delay"</span>, // output的类型, delay表示延时</span><br><span class="line">        <span class="string">"delay"</span>: <span class="number">5</span>       // 延时时长, 单位:秒</span><br><span class="line">    &#125;,&#123;</span><br><span class="line">        <span class="string">"type"</span>: <span class="string">"devctrl"</span>,</span><br><span class="line">        <span class="string">"did"</span>: <span class="string">"QxP6E9qFwwzsqKb2UYf4uw"</span>,</span><br><span class="line">        <span class="string">"raw"</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>] // raw形式</span><br><span class="line">    &#125;],</span><br><span class="line">    [&#123;</span><br><span class="line">        <span class="string">"type"</span>: <span class="string">"devctrl"</span>,</span><br><span class="line">        <span class="string">"did"</span>: <span class="string">"QxP6E9qFwwzsqKb2UYf4uw"</span>,</span><br><span class="line">        <span class="string">"attrs"</span>: &#123;</span><br><span class="line">            <span class="string">"datapoint1"</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="string">"datapoint2"</span>: <span class="number">25</span>,</span><br><span class="line">            <span class="string">"datapoint3"</span>: <span class="string">"黄色"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/rules
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">联动规则备注</td>
</tr>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">联动规则名称</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">设备ID</td>
</tr>
<tr>
<td style="text-align:left">interval</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">最小触发间隔(单位:秒)</td>
</tr>
<tr>
<td style="text-align:left">product_key</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">产品PK</td>
</tr>
<tr>
<td style="text-align:left">event</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">触发方式</td>
</tr>
<tr>
<td style="text-align:left">event_attr</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">当触发方式为alert(报警)/fault(故障)，[RulesEventAttr]</td>
</tr>
<tr>
<td style="text-align:left">input</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">规则中需要用到的设备数据 [RulesInput]</td>
</tr>
<tr>
<td style="text-align:left">condition</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">条件判断 [RulesCondition]</td>
</tr>
<tr>
<td style="text-align:left">output</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">触发动作 [RulesOutput]</td>
</tr>
<tr>
<td style="text-align:left">RulesEventAttr</td>
<td style="text-align:left">——————</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">——————</td>
</tr>
<tr>
<td style="text-align:left">attr_name</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">发生这个报警/故障的数据点</td>
</tr>
<tr>
<td style="text-align:left">value</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">报警/故障的发生/取消, 1表示发生, 0表示取消</td>
</tr>
<tr>
<td style="text-align:left">RulesOutput</td>
<td style="text-align:left">——————</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">——————</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">被控制的设备id</td>
</tr>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">触发类型，devctrl:控制设备；delay：延时</td>
</tr>
<tr>
<td style="text-align:left">attrs</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">数据点方式控制设备</td>
</tr>
<tr>
<td style="text-align:left">raw</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">原始控制指令</td>
</tr>
<tr>
<td style="text-align:left">delay</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">延时时长, 单位:秒</td>
</tr>
<tr>
<td style="text-align:left">RulesInput</td>
<td style="text-align:left">——————</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">——————</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">规则数据的来源的设备id</td>
</tr>
<tr>
<td style="text-align:left">prefix</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">用于在条件及输出中引用这个设备的数据点值的前缀</td>
</tr>
<tr>
<td style="text-align:left">product_key</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">规则数据的来源的设备对应的产品PK</td>
</tr>
<tr>
<td style="text-align:left">RulesCondition</td>
<td style="text-align:left">——————</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">——————</td>
</tr>
<tr>
<td style="text-align:left">opt</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">比较运算符, 可选值有: &gt;, &gt;=, &lt;, &lt;=, ==, != (注:只有数值类型才能比较大小)</td>
</tr>
<tr>
<td style="text-align:left">right</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">右比较参数</td>
</tr>
<tr>
<td style="text-align:left">left</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">左比较参数</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>rule_id</td>
<td>integer</td>
<td>联动规则ID</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"rule_id"</span>: <span class="number">1213</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="删除联动规则"><a href="#删除联动规则" class="headerlink" title="删除联动规则"></a>删除联动规则</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备联动/delete_app_rules_rule_id" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>DELETE
https://api.gizwits.com/app/rules/{rule_id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">rule_id</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">需要删除的联动规则ID</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>rule_id</td>
<td>integer</td>
<td>联动规则ID</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"rule_id"</span>: <span class="number">1234</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="修改联动规则"><a href="#修改联动规则" class="headerlink" title="修改联动规则"></a>修改联动规则</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/设备联动/put_app_rules_rule_id" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>PUT
https://api.gizwits.com/app/rules/{rule_id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">联动规则备注</td>
</tr>
<tr>
<td style="text-align:left">name</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">联动规则名称</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">设备ID</td>
</tr>
<tr>
<td style="text-align:left">interval</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">最小触发间隔(单位:秒)</td>
</tr>
<tr>
<td style="text-align:left">product_key</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">产品PK</td>
</tr>
<tr>
<td style="text-align:left">rule_id</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">联动规则ID</td>
</tr>
<tr>
<td style="text-align:left">event</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">触发方式</td>
</tr>
<tr>
<td style="text-align:left">event_attr</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">当触发方式为alert(报警)/fault(故障)，[RulesEventAttr]</td>
</tr>
<tr>
<td style="text-align:left">input</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">规则中需要用到的设备数据 [RulesInput]</td>
</tr>
<tr>
<td style="text-align:left">condition</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">条件判断 [RulesCondition]</td>
</tr>
<tr>
<td style="text-align:left">output</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">触发动作 [RulesOutput]</td>
</tr>
<tr>
<td style="text-align:left">RulesEventAttr</td>
<td style="text-align:left">——————</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">——————</td>
</tr>
<tr>
<td style="text-align:left">attr_name</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">发生这个报警/故障的数据点</td>
</tr>
<tr>
<td style="text-align:left">value</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">报警/故障的发生/取消, 1表示发生, 0表示取消</td>
</tr>
<tr>
<td style="text-align:left">RulesOutput</td>
<td style="text-align:left">——————</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">——————</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">被控制的设备id</td>
</tr>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">触发类型，devctrl:控制设备；delay：延时</td>
</tr>
<tr>
<td style="text-align:left">attrs</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">数据点方式控制设备</td>
</tr>
<tr>
<td style="text-align:left">raw</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">原始控制指令</td>
</tr>
<tr>
<td style="text-align:left">delay</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">延时时长, 单位:秒</td>
</tr>
<tr>
<td style="text-align:left">RulesInput</td>
<td style="text-align:left">——————</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">——————</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">规则数据的来源的设备id</td>
</tr>
<tr>
<td style="text-align:left">prefix</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">用于在条件及输出中引用这个设备的数据点值的前缀</td>
</tr>
<tr>
<td style="text-align:left">product_key</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">规则数据的来源的设备对应的产品PK</td>
</tr>
<tr>
<td style="text-align:left">RulesCondition</td>
<td style="text-align:left">——————</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">——————</td>
</tr>
<tr>
<td style="text-align:left">opt</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">比较运算符, 可选值有: &gt;, &gt;=, &lt;, &lt;=, ==, != (注:只有数值类型才能比较大小)</td>
</tr>
<tr>
<td style="text-align:left">right</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">右比较参数</td>
</tr>
<tr>
<td style="text-align:left">left</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">左比较参数</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>rule_id</td>
<td>integer</td>
<td>联动规则ID</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"rule_id"</span>: <span class="number">1234</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="用户场景"><a href="#用户场景" class="headerlink" title="用户场景"></a>用户场景</h1><h2 id="查询用户所有的场景"><a href="#查询用户所有的场景" class="headerlink" title="查询用户所有的场景"></a>查询用户所有的场景</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户场景/get_app_scene" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/scene
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>场景 id</td>
</tr>
<tr>
<td>scene_name</td>
<td>string</td>
<td>场景名称</td>
</tr>
<tr>
<td>created_at</td>
<td>string</td>
<td>场景创建时间（UTC 时间）</td>
</tr>
<tr>
<td>updated_at</td>
<td>string</td>
<td>场景更新时间（UTC 时间）</td>
</tr>
<tr>
<td>remark</td>
<td>string</td>
<td>场景备注</td>
</tr>
<tr>
<td>task_type</td>
<td>string</td>
<td>场景任务类型：”delay”: 延时任务，”device”: 控制当个设备任务，”group”: 控制设备分组任务（仅可控制单 product_key 分组)</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>针对单品控制任务，设备 did</td>
</tr>
<tr>
<td>product_key</td>
<td>string</td>
<td>针对非延时任务，产品 product_key</td>
</tr>
<tr>
<td>group_name</td>
<td>string</td>
<td>针对设备分组控制任务，设备分组名称</td>
</tr>
<tr>
<td>raw</td>
<td>string</td>
<td>针对非延时任务，原始控制指令，base64 编码</td>
</tr>
<tr>
<td>attrs</td>
<td>object</td>
<td>针对非延时任务，数据点控制命令，枚举型数据点传序号，扩展型数据点传 base64 编码字符串</td>
</tr>
<tr>
<td>dev_remark</td>
<td>string</td>
<td>针对设备控制任务，设备备注</td>
</tr>
<tr>
<td>time</td>
<td>integer</td>
<td>针对延时任务，延时时间，以秒为单位，最大值： 3600 秒</td>
</tr>
<tr>
<td>group_id</td>
<td>string</td>
<td>针对设备分组控制任务，设备分组 id</td>
</tr>
<tr>
<td>verbose_name</td>
<td>string</td>
<td>针对非延时任务，产品名称</td>
</tr>
<tr>
<td>dev_alias</td>
<td>string</td>
<td>针对设备控制任务，设备别名</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"remark"</span>: <span class="string">"备注"</span>,</span><br><span class="line">    <span class="attr">"tasks"</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">"task_type"</span>: <span class="string">"device"</span>,</span><br><span class="line">        <span class="attr">"did"</span>: <span class="string">"WCWGkbS4Ttynzw123rzpEa"</span>,</span><br><span class="line">        <span class="attr">"product_key"</span>: <span class="string">"4214bf2d79321259232431b6f2ef46a"</span>,</span><br><span class="line">        <span class="attr">"group_name"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"raw"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"attrs"</span>: &#123;</span><br><span class="line">          <span class="attr">"switch"</span>: <span class="literal">true</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"dev_remark"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"time"</span>: <span class="number">0</span>,</span><br><span class="line">        <span class="attr">"group_id"</span>: <span class="string">""</span>,</span><br><span class="line">        <span class="attr">"verbose_name"</span>: <span class="string">"微信宠物屋"</span>,</span><br><span class="line">        <span class="attr">"dev_alias"</span>: <span class="string">""</span></span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"created_at"</span>: <span class="string">"2017-09-25T10:09:07Z"</span>,</span><br><span class="line">    <span class="attr">"updated_at"</span>: <span class="string">"2017-09-25T10:09:07Z"</span>,</span><br><span class="line">    <span class="attr">"scene_name"</span>: <span class="string">"场景名"</span>,</span><br><span class="line">    <span class="attr">"id"</span>: <span class="string">"59c8d5c3234d50001a21c872"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="创建场景"><a href="#创建场景" class="headerlink" title="创建场景"></a>创建场景</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户场景/post_app_scene" target="_blank" rel="noopener">调试接口</a></p>
<h4 id="原始指令-raw-3"><a href="#原始指令-raw-3" class="headerlink" title="原始指令(raw):"></a>原始指令(raw):</h4><p>默认格式为 base64 ，设置 binary_coding 参数可使用 hex，<br>如要发送 payload 为 010203 ，编译后就是： AQID ；</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"raw"</span>: <span class="string">"AQID"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="数据点方式-attrs-3"><a href="#数据点方式-attrs-3" class="headerlink" title="数据点方式(attrs):"></a>数据点方式(attrs):</h4><p>设备产品必须定义了数据点。如要设置扩展类型的字段 binary 为1234567(16进制)，需要补齐扩展型长度；<br>扩展型默认为hex16 ，设置 binary_coding 参数可使用 base64 。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"attrs"</span>: &#123;</span><br><span class="line">    <span class="attr">"boolean"</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"binary"</span>: <span class="string">"1234567000"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/scene
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">scene_name</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">场景名称</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">场景备注</td>
</tr>
<tr>
<td style="text-align:left">task_type</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">场景任务类型： “delay”: 延时任务，”device”: 控制当个设备任务，”group”: 控制设备分组任务（仅可控制单 product_key 分组)</td>
</tr>
<tr>
<td style="text-align:left">time</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">针对延时任务，延时时间，以秒为单位，最大值： 3600 秒</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">针对单品控制任务，设备 did</td>
</tr>
<tr>
<td style="text-align:left">group_id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">针对设备分组控制任务，设备分组 id</td>
</tr>
<tr>
<td style="text-align:left">attrs</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">针对非延时任务，数据点控制命令，枚举型数据点传序号，扩展型数据点传 base64 编码字符串</td>
</tr>
<tr>
<td style="text-align:left">raw</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">针对非延时任务，原始控制指令，base64 编码</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>场景 id</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"id"</span>: <span class="string">"59c8d5c38c7d50001a21c872"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="删除场景"><a href="#删除场景" class="headerlink" title="删除场景"></a>删除场景</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户场景/delete_app_scene_id" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>DELETE
https://api.gizwits.com/app/scene/{id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">场景ID</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h2 id="修改场景信息"><a href="#修改场景信息" class="headerlink" title="修改场景信息"></a>修改场景信息</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户场景/post_app_scene" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>PUT
https://api.gizwits.com/app/scene/{id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">场景ID</td>
</tr>
<tr>
<td style="text-align:left">scene_name</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">场景名称</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">场景备注</td>
</tr>
<tr>
<td style="text-align:left">task_type</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">场景任务类型： “delay”: 延时任务，”device”: 控制当个设备任务，”group”: 控制设备分组任务（仅可控制单 product_key 分组)</td>
</tr>
<tr>
<td style="text-align:left">time</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">针对延时任务，延时时间，以秒为单位，最大值： 3600 秒</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">针对单品控制任务，设备 did</td>
</tr>
<tr>
<td style="text-align:left">group_id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">针对设备分组控制任务，设备分组 id</td>
</tr>
<tr>
<td style="text-align:left">attrs</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">针对非延时任务，数据点控制命令，枚举型数据点传序号，扩展型数据点传 base64 编码字符串</td>
</tr>
<tr>
<td style="text-align:left">raw</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">针对非延时任务，原始控制指令，base64 编码</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h2 id="查询场景任务执行状态"><a href="#查询场景任务执行状态" class="headerlink" title="查询场景任务执行状态"></a>查询场景任务执行状态</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户场景/get_app_scene" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/scene/{id}/task
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">场景ID</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>status</td>
<td>integer</td>
<td>场景任务执行状态,0：进行中;1：执行完成;2：执行失败;3：任务未在执行</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"status"</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="执行场景任务"><a href="#执行场景任务" class="headerlink" title="执行场景任务"></a>执行场景任务</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户场景/get_app_scene" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/scene/{id}/task
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">场景ID</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><ul>
<li>返回成功，场景任务开始执行</li>
</ul>
<h1 id="定时任务管理"><a href="#定时任务管理" class="headerlink" title="定时任务管理"></a>定时任务管理</h1><p>定时任务分为如下几类：</p>
<ul>
<li>一次性定时任务</li>
<li>按星期重复定时任务</li>
<li>按天重复定时任务</li>
</ul>
<p>每个定时任务都可以设置使能状态，只有开启状态的定时任务才会被执行。</p>
<p>定时任务管理下的全部接口均使用 UTC 时间</p>
<p>定时任务管理接口只能对单个设备设置定时任务</p>
<h2 id="获取定时任务"><a href="#获取定时任务" class="headerlink" title="获取定时任务"></a>获取定时任务</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/定时任务管理/get_app_devices_did_scheduler" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/devices/{did}/scheduler?limit=20&amp;skip=0
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">需要设置定时任务的设备id</td>
</tr>
<tr>
<td style="text-align:left">limit</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">返回的结果条数</td>
</tr>
<tr>
<td style="text-align:left">skip</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">表示跳过的条数，间接表示页数。</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>定时任务id</td>
</tr>
<tr>
<td>created_at</td>
<td>string</td>
<td>任务创建时间 UTC 时间</td>
</tr>
<tr>
<td>product_key</td>
<td>string</td>
<td>产品PK</td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>需要设置定时任务的设备id</td>
</tr>
<tr>
<td>raw</td>
<td>string</td>
<td>原始控制指令</td>
</tr>
<tr>
<td>attrs</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>date</td>
<td>string</td>
<td>一次性定时任务的执行时间</td>
</tr>
<tr>
<td>time</td>
<td>string</td>
<td>定时任务执行的时间，精确到分钟，格式xx:xx，如：02:30</td>
</tr>
<tr>
<td>repeat</td>
<td>string</td>
<td>是否重复，”none”,”mon”, “tue”, “wed”, “thu”, “fri”, “sat”, “sun”</td>
</tr>
<tr>
<td>days</td>
<td>Array</td>
<td>重复的日期列表，如[1, 15]表示每月1日和15日重复</td>
</tr>
<tr>
<td>start_date</td>
<td>string</td>
<td>定时任务执行的开始日期，该天0点开始，格式xxxx-xx-xx，如2016-09-01</td>
</tr>
<tr>
<td>end_date</td>
<td>string</td>
<td>定时任务执行的结束日期，该天24点结束，格式xxxx-xx-xx，如2016-10-01</td>
</tr>
<tr>
<td>enabled</td>
<td>boolean</td>
<td>是否启用，若不启用则时间到也不触发，默认启用</td>
</tr>
<tr>
<td>remark</td>
<td>string</td>
<td>任务备注</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"remark"</span>: <span class="string">"备注"</span>,</span><br><span class="line">    <span class="attr">"repeat"</span>: <span class="string">"none"</span>,</span><br><span class="line">    <span class="attr">"end_date"</span>: <span class="string">"2017-09-26"</span>,</span><br><span class="line">    <span class="attr">"did"</span>: <span class="string">"LWHWrRAnzRbxtv9cyuNFSY"</span>,</span><br><span class="line">    <span class="attr">"created_at"</span>: <span class="string">"2017-09-26T06:36:47"</span>,</span><br><span class="line">    <span class="attr">"enabled"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"days"</span>: [],</span><br><span class="line">    <span class="attr">"product_key"</span>: <span class="string">"b6777e0a343b422b8c474254e016b4dc"</span>,</span><br><span class="line">    <span class="attr">"id"</span>: <span class="string">"59c9f57f8c7d50001963992c"</span>,</span><br><span class="line">    <span class="attr">"raw"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"attrs"</span>: &#123;</span><br><span class="line">      <span class="attr">"bool"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"time"</span>: <span class="string">"15:00"</span>,</span><br><span class="line">    <span class="attr">"date"</span>: <span class="string">"2017-09-26"</span>,</span><br><span class="line">    <span class="attr">"start_date"</span>: <span class="string">"2017-09-20"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="创建定时任务"><a href="#创建定时任务" class="headerlink" title="创建定时任务"></a>创建定时任务</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/定时任务管理/post_app_devices_did_scheduler" target="_blank" rel="noopener">调试接口</a></p>
<h3 id="创建一次性定时任务"><a href="#创建一次性定时任务" class="headerlink" title="创建一次性定时任务"></a>创建一次性定时任务</h3><ul>
<li>repeat 设置为 none</li>
<li>date 和 time 必须填写，并且注意 date 和 time 为执行定时任务时的 UTC 时间</li>
</ul>
<h3 id="创建按星期重复定时任务"><a href="#创建按星期重复定时任务" class="headerlink" title="创建按星期重复定时任务"></a>创建按星期重复定时任务</h3><ul>
<li>repeat 为重复星期，多个用逗号分隔；比如每周一执行，设置为 “mon”，每周一、周三执行，设置为 “mon,wed”；</li>
<li>repeat 为重复星期时，可选值为： mon,tue,wed,thu,fri,sat,sun</li>
<li>time 必须填写，并且注意星期和 time 为执行定时任务时的 UTC 时间</li>
<li>可以选填 start_date 和 end_date 表示定时任务开启的日期范围</li>
</ul>
<h3 id="创建按天重复的定时任务"><a href="#创建按天重复的定时任务" class="headerlink" title="创建按天重复的定时任务"></a>创建按天重复的定时任务</h3><ul>
<li>repeat 设置为 day</li>
<li>days 设置为要执行的日期列表；比如每月 1 号执行，设置为 [“1”]；每月 1 号、15 号执行，设置为 [“1”, “15”]</li>
<li>time 必须填写，并且注意 days 和 time 为执行定时任务时的 UTC 时间</li>
<li>可以选填 start_date 和 end_date 表示定时任务开启的日期范围</li>
</ul>
<h4 id="原始指令-raw-4"><a href="#原始指令-raw-4" class="headerlink" title="原始指令(raw):"></a>原始指令(raw):</h4><p>默认格式为 hex16 ，设置 binary_coding 参数可使用 base64 ，<br>如要发送 payload 为二进制 011000010110001001100011 ，每组byte换成16进制就是： 616263 ；</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"raw"</span>: <span class="number">616263</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="数据点方式-attrs-4"><a href="#数据点方式-attrs-4" class="headerlink" title="数据点方式(attrs):"></a>数据点方式(attrs):</h4><p>设备产品必须定义了数据点。如要设置扩展类型的字段 binary 为1234567(16进制)，需要补齐扩展型长度；<br>扩展型默认为hex16 ，设置 binary_coding 参数可使用 base64 。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"attrs"</span>: &#123;</span><br><span class="line">    <span class="attr">"boolean"</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"binary"</span>: <span class="string">"1234567000"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/devices/{did}/scheduler
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">需要设置定时任务的设备id</td>
</tr>
<tr>
<td style="text-align:left">raw</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">原始控制指令</td>
</tr>
<tr>
<td style="text-align:left">attrs</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">一次性定时任务的执行时间</td>
</tr>
<tr>
<td style="text-align:left">time</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的时间，精确到分钟，格式xx:xx，如：02:30</td>
</tr>
<tr>
<td style="text-align:left">repeat</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">是否重复，”none”,”mon”, “tue”, “wed”, “thu”, “fri”, “sat”, “sun”</td>
</tr>
<tr>
<td style="text-align:left">days</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">重复的日期列表，如[1, 15]表示每月1日和15日重复</td>
</tr>
<tr>
<td style="text-align:left">start_date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的开始日期，该天0点开始，格式xxxx-xx-xx，如2016-09-01</td>
</tr>
<tr>
<td style="text-align:left">end_date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的结束日期，该天24点结束，格式xxxx-xx-xx，如2016-10-01</td>
</tr>
<tr>
<td style="text-align:left">enabled</td>
<td style="text-align:left">boolean</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">是否启用，若不启用则时间到也不触发，默认启用</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">任务备注</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>定时任务id</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"id"</span>: <span class="string">"59c9f57f8c7d50001963992c"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="修改定时任务"><a href="#修改定时任务" class="headerlink" title="修改定时任务"></a>修改定时任务</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/定时任务管理/put_app_devices_did_scheduler_id" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>PUT
https://api.gizwits.com/app/devices/{did}/scheduler/{id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">需要设置定时任务的设备id</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">需要修改的定时任务id</td>
</tr>
<tr>
<td style="text-align:left">raw</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">原始控制指令</td>
</tr>
<tr>
<td style="text-align:left">attrs</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">一次性定时任务的执行时间</td>
</tr>
<tr>
<td style="text-align:left">time</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的时间，精确到分钟，格式xx:xx，如：02:30</td>
</tr>
<tr>
<td style="text-align:left">repeat</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">是否重复，”none”,”mon”, “tue”, “wed”, “thu”, “fri”, “sat”, “sun”</td>
</tr>
<tr>
<td style="text-align:left">days</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">重复的日期列表，如[1, 15]表示每月1日和15日重复</td>
</tr>
<tr>
<td style="text-align:left">start_date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的开始日期，该天0点开始，格式xxxx-xx-xx，如2016-09-01</td>
</tr>
<tr>
<td style="text-align:left">end_date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的结束日期，该天24点结束，格式xxxx-xx-xx，如2016-10-01</td>
</tr>
<tr>
<td style="text-align:left">enabled</td>
<td style="text-align:left">boolean</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">是否启用，若不启用则时间到也不触发，默认启用</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">任务备注</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>定时任务id</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"id"</span>: <span class="string">"59c9f57f8c7d50001963992c"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="删除定时任务"><a href="#删除定时任务" class="headerlink" title="删除定时任务"></a>删除定时任务</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/定时任务管理/delete_app_devices_did_scheduler_id" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>DELETE
https://api.gizwits.com/app/devices/{did}/scheduler/{id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">定时任务id</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h1 id="通用定时任务"><a href="#通用定时任务" class="headerlink" title="通用定时任务"></a>通用定时任务</h1><p><strong>通用定时任务</strong> 为 <strong>定时任务管理</strong> 的升级接口，能对场景、分组和单个设备创建定时任务。</p>
<h2 id="获取定时任务-1"><a href="#获取定时任务-1" class="headerlink" title="获取定时任务"></a>获取定时任务</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/通用定时任务/get_app_common_did_scheduler" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/app/common_scheduler?did={did}&amp;group_id={group_id}&amp;scene_id={scene_id}&amp;limit={limit}&amp;skip={skip}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">path</td>
<td style="text-align:left">需要设置定时任务的设备id</td>
</tr>
<tr>
<td style="text-align:left">group_id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">path</td>
<td style="text-align:left">分组id</td>
</tr>
<tr>
<td style="text-align:left">scene_id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">path</td>
<td style="text-align:left">场景id</td>
</tr>
<tr>
<td style="text-align:left">limit</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">返回的结果条数</td>
</tr>
<tr>
<td style="text-align:left">skip</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">表示跳过的条数，间接表示页数。</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>定时任务id</td>
</tr>
<tr>
<td>created_at</td>
<td>string</td>
<td>任务创建时间 UTC 时间</td>
</tr>
<tr>
<td>product_key</td>
<td>string</td>
<td>产品PK</td>
</tr>
<tr>
<td>scene_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>group_id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>did</td>
<td>string</td>
<td>需要设置定时任务的设备id</td>
</tr>
<tr>
<td>raw</td>
<td>string</td>
<td>原始控制指令</td>
</tr>
<tr>
<td>attrs</td>
<td>object</td>
<td></td>
</tr>
<tr>
<td>date</td>
<td>string</td>
<td>一次性定时任务的执行时间</td>
</tr>
<tr>
<td>time</td>
<td>string</td>
<td>定时任务执行的时间，精确到分钟，格式xx:xx，如：02:30</td>
</tr>
<tr>
<td>repeat</td>
<td>string</td>
<td>是否重复，”none”,”mon”, “tue”, “wed”, “thu”, “fri”, “sat”, “sun”</td>
</tr>
<tr>
<td>days</td>
<td>Array</td>
<td>重复的日期列表，如[1, 15]表示每月1日和15日重复</td>
</tr>
<tr>
<td>start_date</td>
<td>string</td>
<td>定时任务执行的开始日期，该天0点开始，格式xxxx-xx-xx，如2016-09-01</td>
</tr>
<tr>
<td>end_date</td>
<td>string</td>
<td>定时任务执行的结束日期，该天24点结束，格式xxxx-xx-xx，如2016-10-01</td>
</tr>
<tr>
<td>enabled</td>
<td>boolean</td>
<td>是否启用，若不启用则时间到也不触发，默认启用</td>
</tr>
<tr>
<td>remark</td>
<td>string</td>
<td>任务备注</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"remark"</span>: <span class="string">"备注"</span>,</span><br><span class="line">    <span class="attr">"repeat"</span>: <span class="string">"none"</span>,</span><br><span class="line">    <span class="attr">"end_date"</span>: <span class="string">"2017-09-26"</span>,</span><br><span class="line">    <span class="attr">"did"</span>: <span class="string">"LWHWrRAnzRbxtv9cyuNFSY"</span>,</span><br><span class="line">    <span class="attr">"created_at"</span>: <span class="string">"2017-09-26T06:36:47"</span>,</span><br><span class="line">    <span class="attr">"enabled"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"days"</span>: [],</span><br><span class="line">    <span class="attr">"product_key"</span>: <span class="string">"b6777e0a343b422b8c474254e016b4dc"</span>,</span><br><span class="line">    <span class="attr">"id"</span>: <span class="string">"59c9f57f8c7d50001963992c"</span>,</span><br><span class="line">    <span class="attr">"raw"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"attrs"</span>: &#123;</span><br><span class="line">      <span class="attr">"bool"</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"time"</span>: <span class="string">"15:00"</span>,</span><br><span class="line">    <span class="attr">"date"</span>: <span class="string">"2017-09-26"</span>,</span><br><span class="line">    <span class="attr">"scene_id"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"group_id"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"start_date"</span>: <span class="string">"2017-09-20"</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h2 id="创建定时任务-1"><a href="#创建定时任务-1" class="headerlink" title="创建定时任务"></a>创建定时任务</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/通用定时任务/post_app_common_did_scheduler" target="_blank" rel="noopener">调试接口</a></p>
<ul>
<li>did, group_id, scene_id 参数只需传其中一个，分别用于创建设备，设备分组，用户场景定时任务，</li>
<li>若同时传了多个，则按此优先级取第一个有效字符串；</li>
<li>针对场景任务，不需要传 raw 和 attrs 控制命令，传了会被忽略；</li>
<li>创建循环类型与<a href="#定时任务管理">定时任务管理</a>接口一致。</li>
</ul>
<h4 id="原始指令-raw-5"><a href="#原始指令-raw-5" class="headerlink" title="原始指令(raw):"></a>原始指令(raw):</h4><p>默认格式为 hex16 ，设置 binary_coding 参数可使用 base64 ，<br>如要发送 payload 为二进制 011000010110001001100011 ，每组byte换成16进制就是： 616263 ；</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"raw"</span>: <span class="number">616263</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="数据点方式-attrs-5"><a href="#数据点方式-attrs-5" class="headerlink" title="数据点方式(attrs):"></a>数据点方式(attrs):</h4><p>设备产品必须定义了数据点。如要设置扩展类型的字段 binary 为1234567(16进制)，需要补齐扩展型长度；<br>扩展型默认为hex16 ，设置 binary_coding 参数可使用 base64 。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"attrs"</span>: &#123;</span><br><span class="line">    <span class="attr">"boolean"</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"binary"</span>: <span class="string">"1234567000"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>请求地址及方式</p>
<pre><code>POST
https://api.gizwits.com/app/common_scheduler
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">需要设置定时任务的设备id</td>
</tr>
<tr>
<td style="text-align:left">group_id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">需要设置定时任务的设备分组id</td>
</tr>
<tr>
<td style="text-align:left">scene_id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">需要设置定时任务的场景id</td>
</tr>
<tr>
<td style="text-align:left">raw</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">原始控制指令</td>
</tr>
<tr>
<td style="text-align:left">attrs</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">一次性定时任务的执行时间</td>
</tr>
<tr>
<td style="text-align:left">time</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的时间，精确到分钟，格式xx:xx，如：02:30</td>
</tr>
<tr>
<td style="text-align:left">repeat</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">是否重复，”none”,”mon”, “tue”, “wed”, “thu”, “fri”, “sat”, “sun”</td>
</tr>
<tr>
<td style="text-align:left">days</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">重复的日期列表，如[1, 15]表示每月1日和15日重复</td>
</tr>
<tr>
<td style="text-align:left">start_date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的开始日期，该天0点开始，格式xxxx-xx-xx，如2016-09-01</td>
</tr>
<tr>
<td style="text-align:left">end_date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的结束日期，该天24点结束，格式xxxx-xx-xx，如2016-10-01</td>
</tr>
<tr>
<td style="text-align:left">enabled</td>
<td style="text-align:left">boolean</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">是否启用，若不启用则时间到也不触发，默认启用</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">任务备注</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>通用定时任务id</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"id"</span>: <span class="string">"59c9f57f8c7d50001963992c"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="修改定时任务-1"><a href="#修改定时任务-1" class="headerlink" title="修改定时任务"></a>修改定时任务</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/通用定时任务/put_app_common_did_scheduler_id" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>PUT
https://api.gizwits.com/app/common_scheduler/{id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">通用定时任务id</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">需要设置定时任务的设备id</td>
</tr>
<tr>
<td style="text-align:left">group_id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">需要设置定时任务的设备分组id</td>
</tr>
<tr>
<td style="text-align:left">scene_id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">需要设置定时任务的场景id</td>
</tr>
<tr>
<td style="text-align:left">raw</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">原始控制指令</td>
</tr>
<tr>
<td style="text-align:left">attrs</td>
<td style="text-align:left">object</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">一次性定时任务的执行时间</td>
</tr>
<tr>
<td style="text-align:left">time</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的时间，精确到分钟，格式xx:xx，如：02:30</td>
</tr>
<tr>
<td style="text-align:left">repeat</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">body</td>
<td style="text-align:left">是否重复，”none”,”mon”, “tue”, “wed”, “thu”, “fri”, “sat”, “sun”</td>
</tr>
<tr>
<td style="text-align:left">days</td>
<td style="text-align:left">Array</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">重复的日期列表，如[1, 15]表示每月1日和15日重复</td>
</tr>
<tr>
<td style="text-align:left">start_date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的开始日期，该天0点开始，格式xxxx-xx-xx，如2016-09-01</td>
</tr>
<tr>
<td style="text-align:left">end_date</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">定时任务执行的结束日期，该天24点结束，格式xxxx-xx-xx，如2016-10-01</td>
</tr>
<tr>
<td style="text-align:left">enabled</td>
<td style="text-align:left">boolean</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">是否启用，若不启用则时间到也不触发，默认启用</td>
</tr>
<tr>
<td style="text-align:left">remark</td>
<td style="text-align:left">string</td>
<td style="text-align:center">否</td>
<td style="text-align:left">body</td>
<td style="text-align:left">任务备注</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>string</td>
<td>通用定时任务id</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"id"</span>: <span class="string">"59c9f57f8c7d50001963992c"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="删除定时任务-1"><a href="#删除定时任务-1" class="headerlink" title="删除定时任务"></a>删除定时任务</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/通用定时任务/delete_app_common_did_scheduler_id" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>DELETE
https://api.gizwits.com/app/common_scheduler/{id}
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">需要设置定时任务的设备id</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">通用定时任务id</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<pre><code>无
</code></pre><h1 id="高级数据接口"><a href="#高级数据接口" class="headerlink" title="高级数据接口"></a>高级数据接口</h1><h2 id="获取设备聚合数据"><a href="#获取设备聚合数据" class="headerlink" title="获取设备聚合数据"></a>获取设备聚合数据</h2><p>该接口可以对设备上报的数值型数据点数据进行聚合，可以按小时/天/周/月对数据点数据进行求和/平均值/最大值/最小值进行聚合。</p>
<p>一次可以获取多个数据点的聚合数据。</p>
<p>要使用该接口，必须先请求开通该接口。请求通过的之后上报的数据才会进行聚合运算。</p>
<p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/高级数据接口//get_app_devdata_did_agg_data" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>PUT
https://api.gizwits.com/app/devdata/{did}/agg_data
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
<tr>
<td style="text-align:left">X-Gizwits-User-token</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">用户token</td>
</tr>
<tr>
<td style="text-align:left">did</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">path</td>
<td style="text-align:left">设备ID</td>
</tr>
<tr>
<td style="text-align:left">start_ts</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">开始时间，单位为毫秒</td>
</tr>
<tr>
<td style="text-align:left">end_ts</td>
<td style="text-align:left">integer</td>
<td style="text-align:center">否</td>
<td style="text-align:left">query</td>
<td style="text-align:left">结束时间，单位为毫秒</td>
</tr>
<tr>
<td style="text-align:left">attrs</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">数字类型数据点名称，多个数据点用逗号分隔</td>
</tr>
<tr>
<td style="text-align:left">aggregator</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">统计方式，sum：合计；avg：平均值；max：最大值；min：最少值</td>
</tr>
<tr>
<td style="text-align:left">unit</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">query</td>
<td style="text-align:left">汇总方式,hours：小时；day：天；weeks：周；months：月</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>aggregator</td>
<td>string</td>
<td>统计方式，sum：合计；avg：平均值；max：最大值；min：最少值</td>
</tr>
<tr>
<td>end_ts</td>
<td>integer</td>
<td>开始时间，单位为毫秒</td>
</tr>
<tr>
<td>start_ts</td>
<td>integer</td>
<td>结束时间，单位为毫秒</td>
</tr>
<tr>
<td>attrs</td>
<td>string</td>
<td>查询的数据点</td>
</tr>
<tr>
<td>unit</td>
<td>string</td>
<td>sum：合计；avg：平均值；max：最大值；min：最少值</td>
</tr>
<tr>
<td>datatime</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>uid</td>
<td>string</td>
<td>用户id</td>
</tr>
<tr>
<td>product_key</td>
<td>string</td>
<td>产品PK</td>
</tr>
<tr>
<td>attrs</td>
<td>object</td>
<td>数据点聚合结果</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"query"</span>: &#123;</span><br><span class="line">    <span class="attr">"aggregator"</span>: <span class="string">"sum"</span>,</span><br><span class="line">    <span class="attr">"end_ts"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"start_ts"</span>: <span class="number">1505318400000</span>,</span><br><span class="line">    <span class="attr">"attrs"</span>: <span class="string">"set_temp, alert_shutdown, room_temp"</span>,</span><br><span class="line">    <span class="attr">"unit"</span>: <span class="string">"HOURS"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"data"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">"datatime"</span>:<span class="string">""</span>,</span><br><span class="line">      <span class="attr">"uid"</span>:<span class="string">"c0a85d0773e24f15a6853f3148c80a33"</span>,</span><br><span class="line">      <span class="attr">"product_key"</span>:<span class="string">"42121342d79694a259232431b6f2ef46a"</span>,</span><br><span class="line">      <span class="attr">"attrs"</span>:&#123;</span><br><span class="line">        <span class="attr">"set_temp"</span>:<span class="string">"12"</span>,</span><br><span class="line">        <span class="attr">"alert_shutdown"</span>:<span class="string">"12"</span>,</span><br><span class="line">        <span class="attr">"room_temp"</span>:<span class="string">"12"</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="系统信息"><a href="#系统信息" class="headerlink" title="系统信息"></a>系统信息</h1><h2 id="查询-Open-API-版本"><a href="#查询-Open-API-版本" class="headerlink" title="查询 Open API 版本"></a><span id="get_status">查询 Open API 版本</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/系统信息/get_status" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/status
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">version</td>
<td style="text-align:left">string</td>
<td style="text-align:left">open API 版本号</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"status"</span>: &#123;</span><br><span class="line">    <span class="attr">"version"</span>: <span class="string">"2.15.1"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="获取-Open-API-所有的错误码"><a href="#获取-Open-API-所有的错误码" class="headerlink" title="获取 Open API 所有的错误码"></a><span id="get_errors">获取 Open API 所有的错误码</span></h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/系统信息/get_errors" target="_blank" rel="noopener">调试接口</a></p>
<p>请求地址及方式</p>
<pre><code>GET
https://api.gizwits.com/errors
</code></pre><p>请求参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:center">必填</th>
<th style="text-align:left">参数类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">X-Gizwits-Application-Id</td>
<td style="text-align:left">string</td>
<td style="text-align:center">是</td>
<td style="text-align:left">header</td>
<td style="text-align:left">appid</td>
</tr>
</tbody>
</table>
<p>响应参数</p>
<table>
<thead>
<tr>
<th style="text-align:left">参数</th>
<th style="text-align:left">类型</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">status</td>
<td style="text-align:left">string</td>
<td style="text-align:left">响应码</td>
</tr>
<tr>
<td style="text-align:left">error_code</td>
<td style="text-align:left">string</td>
<td style="text-align:left">错误码</td>
</tr>
<tr>
<td style="text-align:left">error_message</td>
<td style="text-align:left">string</td>
<td style="text-align:left">错误信息</td>
</tr>
</tbody>
</table>
<p>返回例子</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"status"</span>: <span class="number">404</span>,</span><br><span class="line">    <span class="attr">"error_message"</span>: <span class="string">"scene not found!"</span>,</span><br><span class="line">    <span class="attr">"error_code"</span>: <span class="number">9220</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">"status"</span>: <span class="number">400</span>,</span><br><span class="line">    <span class="attr">"error_message"</span>: <span class="string">"the scene does not belong to you!"</span>,</span><br><span class="line">    <span class="attr">"error_code"</span>: <span class="number">9221</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>详细错误信息可查看下表<a href="#error_message">Open API 错误码表</a></p>
<h2 id="附录：Open-API-错误码表"><a href="#附录：Open-API-错误码表" class="headerlink" title="附录：Open API 错误码表"></a><span id="error_message">附录：Open API 错误码表</span></h2><table>
<thead>
<tr>
<th style="text-align:left">错误码</th>
<th style="text-align:left">错误类别</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">9001</td>
<td style="text-align:left">GIZ_OPENAPI_MAC_ALREADY_REGISTERED</td>
<td>mac already registered!</td>
</tr>
<tr>
<td style="text-align:left">9002</td>
<td style="text-align:left">GIZ_OPENAPI_PRODUCT_KEY_INVALID</td>
<td>product_key invalid</td>
</tr>
<tr>
<td style="text-align:left">9003</td>
<td style="text-align:left">GIZ_OPENAPI_APPID_INVALID</td>
<td>appid invalid</td>
</tr>
<tr>
<td style="text-align:left">9004</td>
<td style="text-align:left">GIZ_OPENAPI_TOKEN_INVALID</td>
<td>token invalid</td>
</tr>
<tr>
<td style="text-align:left">9005</td>
<td style="text-align:left">GIZ_OPENAPI_USER_NOT_EXIST</td>
<td>user not exist</td>
</tr>
<tr>
<td style="text-align:left">9006</td>
<td style="text-align:left">GIZ_OPENAPI_TOKEN_EXPIRED</td>
<td>token expired</td>
</tr>
<tr>
<td style="text-align:left">9007</td>
<td style="text-align:left">GIZ_OPENAPI_M2M_ID_INVALID</td>
<td>m2m_id invalid</td>
</tr>
<tr>
<td style="text-align:left">9008</td>
<td style="text-align:left">GIZ_OPENAPI_SERVER_ERROR</td>
<td>server error</td>
</tr>
<tr>
<td style="text-align:left">9009</td>
<td style="text-align:left">GIZ_OPENAPI_CODE_EXPIRED</td>
<td>code expired</td>
</tr>
<tr>
<td style="text-align:left">9010</td>
<td style="text-align:left">GIZ_OPENAPI_CODE_INVALID</td>
<td>code invalid</td>
</tr>
<tr>
<td style="text-align:left">9011</td>
<td style="text-align:left">GIZ_OPENAPI_SANDBOX_SCALE_QUOTA_EXHAUSTED</td>
<td>sandbox scale quota exhausted!</td>
</tr>
<tr>
<td style="text-align:left">9012</td>
<td style="text-align:left">GIZ_OPENAPI_PRODUCTION_SCALE_QUOTA_EXHAUSTED</td>
<td>production scale quota exhausted!</td>
</tr>
<tr>
<td style="text-align:left">9013</td>
<td style="text-align:left">GIZ_OPENAPI_PRODUCT_HAS_NO_REQUEST_SCALE</td>
<td>product has no request scale!</td>
</tr>
<tr>
<td style="text-align:left">9014</td>
<td style="text-align:left">GIZ_OPENAPI_DEVICE_NOT_FOUND</td>
<td>device not found!</td>
</tr>
<tr>
<td style="text-align:left">9015</td>
<td style="text-align:left">GIZ_OPENAPI_FORM_INVALID</td>
<td>form invalid!</td>
</tr>
<tr>
<td style="text-align:left">9016</td>
<td style="text-align:left">GIZ_OPENAPI_DID_PASSCODE_INVALID</td>
<td>did or passcode invalid!</td>
</tr>
<tr>
<td style="text-align:left">9017</td>
<td style="text-align:left">GIZ_OPENAPI_DEVICE_NOT_BOUND</td>
<td>device not bound!</td>
</tr>
<tr>
<td style="text-align:left">9018</td>
<td style="text-align:left">GIZ_OPENAPI_PHONE_UNAVALIABLE</td>
<td>phone unavailable!</td>
</tr>
<tr>
<td style="text-align:left">9019</td>
<td style="text-align:left">GIZ_OPENAPI_USERNAME_UNAVALIABLE</td>
<td>username unavailable!</td>
</tr>
<tr>
<td style="text-align:left">9020</td>
<td style="text-align:left">GIZ_OPENAPI_USERNAME_PASSWORD_ERROR</td>
<td>username or password error!</td>
</tr>
<tr>
<td style="text-align:left">9021</td>
<td style="text-align:left">GIZ_OPENAPI_SEND_COMMAND_FAILED</td>
<td>send command failed!</td>
</tr>
<tr>
<td style="text-align:left">9022</td>
<td style="text-align:left">GIZ_OPENAPI_EMAIL_UNAVALIABLE</td>
<td>email unavailable!</td>
</tr>
<tr>
<td style="text-align:left">9023</td>
<td style="text-align:left">GIZ_OPENAPI_DEVICE_DISABLED</td>
<td>device is disabled!</td>
</tr>
<tr>
<td style="text-align:left">9024</td>
<td style="text-align:left">GIZ_OPENAPI_FAILED_NOTIFY_M2M</td>
<td>fail to notify m2m!</td>
</tr>
<tr>
<td style="text-align:left">9025</td>
<td style="text-align:left">GIZ_OPENAPI_ATTR_INVALID</td>
<td>attr invalid!</td>
</tr>
<tr>
<td style="text-align:left">9026</td>
<td style="text-align:left">GIZ_OPENAPI_USER_INVALID</td>
<td>user invalid!</td>
</tr>
<tr>
<td style="text-align:left">9027</td>
<td style="text-align:left">GIZ_OPENAPI_FIRMWARE_NOT_FOUND</td>
<td>firmware not found!</td>
</tr>
<tr>
<td style="text-align:left">9028</td>
<td style="text-align:left">GIZ_OPENAPI_JD_PRODUCT_NOT_FOUND</td>
<td>JD product info not found!</td>
</tr>
<tr>
<td style="text-align:left">9029</td>
<td style="text-align:left">GIZ_OPENAPI_DATAPOINT_DATA_NOT_FOUND</td>
<td>datapoint data not found!</td>
</tr>
<tr>
<td style="text-align:left">9030</td>
<td style="text-align:left">GIZ_OPENAPI_SCHEDULER_NOT_FOUND</td>
<td>scheduler not found!</td>
</tr>
<tr>
<td style="text-align:left">9031</td>
<td style="text-align:left">GIZ_OPENAPI_QQ_OAUTH_KEY_INVALID</td>
<td>qq oauth key invalid!</td>
</tr>
<tr>
<td style="text-align:left">9032</td>
<td style="text-align:left">GIZ_OPENAPI_OTA_SERVICE_OK_BUT_IN_IDLE</td>
<td>ota upgrade service OK, but in idle or disable!</td>
</tr>
<tr>
<td style="text-align:left">9033</td>
<td style="text-align:left">GIZ_OPENAPI_BT_FIRMWARE_UNVERIFIED</td>
<td>bt firmware unverified,except verify device!</td>
</tr>
<tr>
<td style="text-align:left">9034</td>
<td style="text-align:left">GIZ_OPENAPI_BT_FIRMWARE_NOTHING_TO_UPGRADE</td>
<td>bt firmware is OK, but nothing to upgrade!</td>
</tr>
<tr>
<td style="text-align:left">9035</td>
<td style="text-align:left">GIZ_OPENAPI_SAVE_KAIROSDB_ERROR</td>
<td>Save kairosdb error!</td>
</tr>
<tr>
<td style="text-align:left">9036</td>
<td style="text-align:left">GIZ_OPENAPI_EVENT_NOT_DEFINED</td>
<td>event not defined!</td>
</tr>
<tr>
<td style="text-align:left">9037</td>
<td style="text-align:left">GIZ_OPENAPI_SEND_SMS_FAILED</td>
<td>send sms failed!</td>
</tr>
<tr>
<td style="text-align:left">9038</td>
<td style="text-align:left">GIZ_OPENAPI_APPLICATION_AUTH_INVALID</td>
<td>X-Gizwits-Application-Auth invalid!</td>
</tr>
<tr>
<td style="text-align:left">9039</td>
<td style="text-align:left">GIZ_OPENAPI_NOT_ALLOWED_CALL_API</td>
<td>Not allowed to call deprecated API!</td>
</tr>
<tr>
<td style="text-align:left">9040</td>
<td style="text-align:left">GIZ_OPENAPI_BAD_QRCODE_CONTENT</td>
<td>bad qrcode content!</td>
</tr>
<tr>
<td style="text-align:left">9041</td>
<td style="text-align:left">GIZ_OPENAPI_REQUEST_THROTTLED</td>
<td>request was throttled</td>
</tr>
<tr>
<td style="text-align:left">9042</td>
<td style="text-align:left">GIZ_OPENAPI_DEVICE_OFFLINE</td>
<td>device offline!</td>
</tr>
<tr>
<td style="text-align:left">9043</td>
<td style="text-align:left">GIZ_OPENAPI_TIMESTAMP_INVALID</td>
<td>X-Gizwits-Timestamp invalid!</td>
</tr>
<tr>
<td style="text-align:left">9044</td>
<td style="text-align:left">GIZ_OPENAPI_SIGNATURE_INVALID</td>
<td>X-Gizwits-Signature invalid!</td>
</tr>
<tr>
<td style="text-align:left">9045</td>
<td style="text-align:left">GIZ_OPENAPI_DEPRECATED_API</td>
<td>API deprecated!</td>
</tr>
<tr>
<td style="text-align:left">9046</td>
<td style="text-align:left">GIZ_OPENAPI_REGISTER_IS_BUSY</td>
<td>Register already in progress!</td>
</tr>
<tr>
<td style="text-align:left">9077</td>
<td style="text-align:left">GIZ_OPENAPI</td>
<td>email already exists but not activate!</td>
</tr>
<tr>
<td style="text-align:left">9080</td>
<td style="text-align:left">GIZ_OPENAPI_CANNOT_SHARE_TO_SELF</td>
<td>can not share device to self!</td>
</tr>
<tr>
<td style="text-align:left">9081</td>
<td style="text-align:left">GIZ_OPENAPI_ONLY_OWNER_CAN_SHARE</td>
<td>guest or normal user can not share device!</td>
</tr>
<tr>
<td style="text-align:left">9082</td>
<td style="text-align:left">GIZ_OPENAPI_NOT_FOUND_GUEST</td>
<td>guest user not found!</td>
</tr>
<tr>
<td style="text-align:left">9083</td>
<td style="text-align:left">GIZ_OPENAPI_GUEST_ALREADY_BOUND</td>
<td>guest user alread bound!</td>
</tr>
<tr>
<td style="text-align:left">9084</td>
<td style="text-align:left">GIZ_OPENAPI_NOT_FOUND_SHARING_INFO</td>
<td>sharing record not found!</td>
</tr>
<tr>
<td style="text-align:left">9085</td>
<td style="text-align:left">GIZ_OPENAPI_NOT_FOUND_THE_MESSAGE</td>
<td>message record not found!</td>
</tr>
<tr>
<td style="text-align:left">9087</td>
<td style="text-align:left">GIZ_OPENAPI_SHARING_IS_WAITING_FOR_ACCEPT</td>
<td>sharing alread created,waiting for the guest to accept!</td>
</tr>
<tr>
<td style="text-align:left">9088</td>
<td style="text-align:left">GIZ_OPENAPI_SHARING_IS_EXPIRED</td>
<td>sharing record expired!</td>
</tr>
<tr>
<td style="text-align:left">9089</td>
<td style="text-align:left">GIZ_OPENAPI_SHARING_IS_COMPLETED</td>
<td>sharing record status is not unaccept!</td>
</tr>
<tr>
<td style="text-align:left">9090</td>
<td style="text-align:left">GIZ_OPENAPI_INVALID_SHARING_BECAUSE_UNBINDING</td>
<td>owner binding disabled!</td>
</tr>
<tr>
<td style="text-align:left">9092</td>
<td style="text-align:left">GIZ_OPENAPI_ONLY_OWNER_CAN_BIND</td>
<td>owner exist, guest can not bind!</td>
</tr>
<tr>
<td style="text-align:left">9093</td>
<td style="text-align:left">GIZ_OPENAPI_ONLY_OWNER_CAN_OPERATE</td>
<td>permission denied, you are not owner!</td>
</tr>
<tr>
<td style="text-align:left">9094</td>
<td style="text-align:left">GIZ_OPENAPI_SHARING_ALREADY_CANCELLED</td>
<td>sharing already canceled!</td>
</tr>
<tr>
<td style="text-align:left">9095</td>
<td style="text-align:left">GIZ_OPENAPI_OWNER_CANNOT_UNBIND_SELF</td>
<td>can not unbind self!</td>
</tr>
<tr>
<td style="text-align:left">9096</td>
<td style="text-align:left">GIZ_OPENAPI_ONLY_GUEST_CAN_CHECK_QRCODE</td>
<td>permission denied, you are not guest!</td>
</tr>
<tr>
<td style="text-align:left">9098</td>
<td style="text-align:left">GIZ_OPENAPI_MESSAGE_ALREADY_DELETED</td>
<td>notify delele binding failed!</td>
</tr>
<tr>
<td style="text-align:left">9099</td>
<td style="text-align:left">GIZ_OPENAPI_BINDING_NOTIFY_FAILED</td>
<td>notify delele binding failed!</td>
</tr>
<tr>
<td style="text-align:left">9100</td>
<td style="text-align:left">GIZ_OPENAPI_ONLY_SELF_CAN_MODIFY_ALIAS</td>
<td>permission denied, you are not owner or guest!</td>
</tr>
<tr>
<td style="text-align:left">9101</td>
<td style="text-align:left">GIZ_OPENAPI_ONLY_RECEIVER_CAN_MARK_MESSAGE</td>
<td>permission denied, you are not the receiver!</td>
</tr>
<tr>
<td style="text-align:left">9999</td>
<td style="text-align:left">GIZ_OPENAPI_RESERVED</td>
<td>reserved</td>
</tr>
</tbody>
</table>

    </div>
    
    <div class="widget-wrapper">
  <span class="widget">
    <div>
        <a id="share" target="_blank" title="分享">
          <span>分享</span>
        </a>
        <div class="social-share" data-initialized="true">
            <a href="#" class="social-share-icon icon-wechat"></a>
            <a href="#" class="social-share-icon icon-weibo"></a>
            <a href="#" class="social-share-icon icon-qq"></a>
            <a href="#" class="social-share-icon icon-qzone"></a>
            <a href="#" class="social-share-icon icon-douban"></a>
        </div>
    </div>
    <a href="http://y0.cn/docs" target="_blank" title="项目登记">
      <span>项目登记</span>
    </a>
    <a href="https://github.com/gizwits-docs/gizwits-docs/issues" target="_blank" title="问题反馈">
      <span>问题反馈</span>
    </a>
    <a href="#" title="返回顶部"><i class="fa fa-angle-up fa-2x" aria-hidden="true"></i></a>
  </span>
</div>
  </div>
</div>

    <div class="footer">
  <div class="container">
    <p>
      <span><a href="http://www.gizwits.com" target="_blank">机智云首页</a></span>
      <span><a href="http://www.gizwits.com/about-us" target="_blank">关于我们</a></span>
      <span><a href="http://www.gizwits.com/about-us#contact-us" target="_blank">联系我们</a></span>
      <span><a href="http://www.gizwits.com/join-us" target="_blank">加入我们</a></span>
    </p>
    <p>&#169;2011-2017; Gizwits IoT Technology Co., Ltd. 粤ICP备11090211号</p>
  </div>
</div>

    <script src="/js/spin.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.hashchange.min.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/scrollspy.js"></script>
<script src="/js/social-share.min.js"></script>
<script src="/js/documentation.js?v=d413cf8ceca4865c39c2dabcd3bc0077"></script>


<script type="text/javascript" src="http://webchat.7moor.com/javascripts/7moorInit.js?accessId=b01e0430-943a-11e6-8ad7-636675d9e71f&autoShow=true" async="async"></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3787e6b3b29a084fde41f22828d89b7d";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </body>
</html>