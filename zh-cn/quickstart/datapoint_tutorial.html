
<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta charset="utf-8">

  <title>定义数据点教程 - 机智云</title>

  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta name="Description" content="定义数据点教程-机智云">
  <meta name="keywords" content="定义数据点教程 docs 文档中心 Gizwits">

  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">
  <script src="/js/redirect.js"></script>

  <link rel="stylesheet" href="/css/pure.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/documentation.css?v=0a4338f8b84af6c1b67f4465b8b6739f">
  <link rel="stylesheet" href="/css/share.min.css">
</head>
  <body>
    <div class="header">
  <div class="container pure-g">
    <span class="brand pure-u-5-24">

      <a href="http://www.gizwits.com" class="logo">
        <img src="/images/logo.png" alt="logo"> 
      </a>
      <a class="text" href="/">文档中心</a>
    </span>
    
    <div class="mobile-header"v>
      <span class="title">机智云 文档中心</span>
      <i class="fa fa-caret-square-o-down fa-lg" aria-hidden="true"></i>
    </div>
    
    <span class="menu pure-u-16-24">
      <span class="header-search-btn" id="header-search-btn">
        <i class="fa fa-search"></i>
      </span>
      <ul class="levelA-wrapper">
        
      </ul>
    </span>
  
    <span class="pure-u-3-24 lang-switch-wrapper">
      
      <i class="fa fa-globe" aria-hidden="true"></i> 
      
      <a href="http://docsen.gizwits.com/hc/" class="lang-switch">English</a>
      
    </span>
  </div>

  <div class="header-search-panel" id="header-search-panel">
    <span class="header-search-close" id="header-search-close"><i class="fa fa-times" aria-hidden="true"></i></span>
    <div class="header-search-input-wrap" id="header-search-input-wrap">
      <input type="text" class="header-search-input" id="header-search-input" placeholder="请输入关键字">
      <span class="header-search-input-icon"><i class="fa fa-search"></i></span>
    </div>

    <div class="header-search-trend" id="header-search-trend">
      <div class="header-search-trend-title">热搜词</div>
      <div class="header-search-trend-items clearfix">
        
        <div class="header-search-trend-item" data-word="APP">APP</div>
        
        <div class="header-search-trend-item" data-word="SDK">SDK</div>
        
        <div class="header-search-trend-item" data-word="Android">Android</div>
        
        <div class="header-search-trend-item" data-word="ios">ios</div>
        
        <div class="header-search-trend-item" data-word="WIFI">WIFI</div>
        
      </div>  
    </div>

    <div class="header-search-result hidden" id="header-search-result">
      <div class="header-search-result-head">
        搜索结果 &gt; <span id="header-search-keyword"></span>
      </div>
      <div class="header-search-result-items" id="header-search-result-items">
      </div>
    </div>
  </div>
</div>
    <div class="body">

  <div class="container clearfix">
    <div class="navigation">
      <div class="navigation-inner">
        <div class="nav-title">目录</div>
        <div class="nav"></div>
      </div>
    </div>
    <div class="markdown-body" data-spy="scroll" data-target=".navigation">
      <div class="heading">
        <div class="title">定义数据点教程</div>
        <!--<a class="edit-link" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> 文档编辑</a>-->
      </div>
      <h1 id="一、概述"><a href="#一、概述" class="headerlink" title="一、概述"></a>一、概述</h1><p>数据点即设备产品的功能的抽象，用于描述产品功能及其参数。创建数据点后，设备与云端通讯的数据格式即可确定，设备、机智云可以相互识别设备与机智云互联互通的数据。</p>
<p><img src="/assets/zh-cn/quickstart/dev/new6.png" alt="数据点概图"></p>
<h1 id="二、数据点详解"><a href="#二、数据点详解" class="headerlink" title="二、数据点详解"></a>二、数据点详解</h1><p>数据点定义基本内容可分为显示名称，标识名，读写类型，数据类型及备注。概图如下：</p>
<p><img src="/assets/zh-cn/quickstart/dev/image7.png" alt=""></p>
<h2 id="2-1-显示名称"><a href="#2-1-显示名称" class="headerlink" title="2.1 显示名称"></a>2.1 显示名称</h2><p>  自定义数据点的显示名称，如：开关、温度等。</p>
<h2 id="2-2-标识名"><a href="#2-2-标识名" class="headerlink" title="2.2 标识名"></a>2.2 标识名</h2><p>  用于应用层传输，客户端或业务云开发时需要使用。命名规则遵循标准的开发语言变量名命名规范，支持英文字母、数字和下划线，以英文字母开头。</p>
<h2 id="2-3-读写类型"><a href="#2-3-读写类型" class="headerlink" title="2.3 读写类型"></a>2.3 读写类型</h2><p>①　只读：表示该数据点非控制，数据只支持从设备上报。</p>
<p>②　可写：表示该数据点可控制。设备端可上报该数据点数据；云端/客户端可对该数据点数据做出下发控制。</p>
<p>③　报警：表示该数据点非控制，数据只支持从设备上报，数据类型需为布尔值。</p>
<p>④　故障：表示该数据点非控制，数据只支持从设备上报，数据类型需为布尔值。云端会对设备上报的该数据点做统计，可在“运行状态”查看。</p>
<h2 id="2-4-数据类型"><a href="#2-4-数据类型" class="headerlink" title="2.4 数据类型"></a>2.4 数据类型</h2><p>①　布尔值：表示两个状态：0，或1。如开关状态等，建议使用布尔数据类型。例如GoKit开发板的“宠物屋”，“开启/关闭红色灯”该数据点。</p>
<p>②　枚举类型：可定义一个有限的取值集合。当定义的某个功能（元器件）有固定的若干个值。例如GoKit开发板的“宠物屋”，“设定LED组合颜色”该数据点的枚举定义值：“自定义,黄色,紫色,粉色”。</p>
<p>③　数值：填写数值范围，数值可为负数/小数，机智云自动将数值转换为正数。例如GoKit开发板的“宠物屋”，“设定电机转速”该数据点：电机有正反转、调速功能，数据点值可定义为：-5～5。</p>
<p>④　扩展：填写数据长度，数据内容由用户自定义。对于上述功能点无法满足的复杂功能可采用。机智云不建议使用此类型数据，设备上报该数据点的数据，机智云无法识别。</p>
<h2 id="2-5-备注"><a href="#2-5-备注" class="headerlink" title="2.5  备注"></a>2.5  备注</h2><p>选填，用一段文本描述当前数据点的功能及定义方法，对字符格式不做限制。只用于提高数据点的易读性，如果需要团队协作开发，建议规范填写。</p>
<h2 id="2-6-分辨率、增量换算"><a href="#2-6-分辨率、增量换算" class="headerlink" title="2.6 分辨率、增量换算"></a>2.6 分辨率、增量换算</h2><p>如以上提到，在定义数值型数据点的时候，取值范围可以使用包括小数、负数等非uint类型数值，熟悉嵌入式开发的开发者会知道，这些数值在设备端都是不被支持的。</p>
<p>机智云为了让设备功能定义更加简单直接、所见即所得，研究出来一套算法，用于将用户输入的数值转换成设备能够识别的uint类型，这套算法的核心公式是：y=kx+m。</p>
<p>y表示“显示值”，就是用户可见的最终数值，也是数据点定义时输入的值。包括Ymin(最小值) 和 Ymax(最大值)。</p>
<p>x表示“传输值”，就是实际指令间传输使用的数值，云端/客户端接收到的值。一定是uint格式。也包括 Xmin 和 Xmax。</p>
<p>k表示“分辨率”，就是用户输入的分辨率一值，确定了每个取值的步进。</p>
<p>m表示“取值偏移量”或“增量”，算法通过m值将y值偏移到满足x值uint格式的要求，m值默认等于Ymin，确保Xmin＝0 。</p>
<p>以下用一个电子温度计举例说明换算过程 数据点内容： 取值范围：-30（Ymin） ~ 50（Ymax），分辨率：0.1</p>
<p>根据公式：y=kx＋m，m默认等于Ymin -30<br>Xmin = (-30+30) / 0.1 = 0<br>Xmax = (50+30) / 0.1 = 800</p>
<h1 id="三、数据点创建步骤"><a href="#三、数据点创建步骤" class="headerlink" title="三、数据点创建步骤"></a>三、数据点创建步骤</h1><h2 id="3-1-分析硬件需求"><a href="#3-1-分析硬件需求" class="headerlink" title="3.1 分析硬件需求"></a>3.1 分析硬件需求</h2><p>这里以“智能灯”作为例子介绍数据点的定义。</p>
<p>“智能灯”的产品需求是：将RGB_LED灯的开关状态和调色功能同步到手机APP，可以使用APP远程控制灯。</p>
<h2 id="3-2-定义数据点"><a href="#3-2-定义数据点" class="headerlink" title="3.2 定义数据点"></a>3.2 定义数据点</h2><p><img src="/assets/zh-cn/quickstart/dev/table41.png" alt="设备数据点需求"></p>
<h2 id="3-3-创建数据点"><a href="#3-3-创建数据点" class="headerlink" title="3.3 创建数据点"></a>3.3 创建数据点</h2><p><img src="/assets/zh-cn/quickstart/dev/new7.png" alt="创建数据点-1"></p>
<p><img src="/assets/zh-cn/quickstart/dev/new8.png" alt="创建数据点-2"></p>
<p><img src="/assets/zh-cn/quickstart/dev/new9.png" alt="创建数据点-3"></p>
<h2 id="3-4-修改数据点"><a href="#3-4-修改数据点" class="headerlink" title="3.4 修改数据点"></a>3.4 修改数据点</h2><p><img src="/assets/zh-cn/quickstart/dev/new10.png" alt="修改数据点-1"></p>
<p><img src="/assets/zh-cn/quickstart/dev/new11.png" alt="修改数据点-2"></p>

    </div>

    <div class="widget-wrapper">
  <span class="widget">
    <div>
        <a id='share' target="_blank" title="分享">
          <span>分享</span>
        </a>
        <div class="social-share" data-initialized="true">
            <a href="#" class="social-share-icon icon-wechat"></a>
            <a href="#" class="social-share-icon icon-weibo"></a>
            <a href="#" class="social-share-icon icon-qq"></a>
            <a href="#" class="social-share-icon icon-qzone"></a>
            <a href="#" class="social-share-icon icon-douban"></a>
        </div>
    </div>
    <a href="http://y0.cn/docs" target="_blank" title="项目登记">
      <span>项目登记</span>
    </a>
    <a href="https://github.com/gizwits-docs/gizwits-docs/issues" target="_blank" title="问题反馈">
      <span>问题反馈</span>
    </a>
    <a href="#" title="返回顶部"><i class="fa fa-angle-up fa-2x" aria-hidden="true"></i></a>
  </span>
</div>
  </div>
</div>

    <div class="footer">
  <div class="container">
    <p>
      <span><a href="http://www.gizwits.com" target="_blank">机智云首页</a></span>
      <span><a href="http://www.gizwits.com/about-us" target="_blank">关于我们</a></span>
      <span><a href="http://www.gizwits.com/about-us#contact-us" target="_blank">联系我们</a></span>
      <span><a href="http://www.gizwits.com/join-us" target="_blank">加入我们</a></span>
    </p>
    <p>&#169;2011-2017; Gizwits IoT Technology Co., Ltd. 粤ICP备11090211号</p>
  </div>
</div>

    <script src="/js/spin.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.hashchange.min.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/scrollspy.js"></script>
<script src="/js/social-share.min.js"></script>
<script src="/js/documentation.js?v=60a6c645bea8e4303c7872b6c5b7a0c9"></script>


<script type="text/javascript" src="http://webchat.7moor.com/javascripts/7moorInit.js?accessId=b01e0430-943a-11e6-8ad7-636675d9e71f&autoShow=true" async='async'></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3787e6b3b29a084fde41f22828d89b7d";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </body>
</html>