
<!DOCTYPE html>
<html lang="zh-cn">
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <title>GN511使用说明 - 机智云</title>

  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta name="Description" content="GN511使用说明-机智云">
  <meta name="keywords" content="GN511使用说明 docs 文档中心 Gizwits">

  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">
  <script src="/js/redirect.js"></script>

  <link rel="stylesheet" href="/css/pure.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/documentation.css?v=db6111caa3d210b6cb1d2dac5119d7c5">
  <link rel="stylesheet" href="/css/share.min.css">
</head>
  <body>
    <div class="header">
  <div class="container pure-g">
    <span class="brand pure-u-5-24">
      <a href="http://www.gizwits.com" class="logo">
      
      <img src="/images/logo.png" alt="logo">
      
      </a>
      <a class="text" href="/">文档中心</a>
    </span>

    <div class="mobile-header" v="">
      <span class="title">机智云 文档中心</span>
      <i class="fa fa-caret-square-o-down fa-lg" aria-hidden="true"></i>
    </div>

    <span class="menu pure-u-16-24">
      <span class="header-search-btn" id="header-search-btn">
        <i class="fa fa-search"></i>
      </span>
      <ul class="levelA-wrapper">
        
      </ul>
    </span>

    <span class="pure-u-3-24 lang-switch-wrapper">

      <i class="fa fa-globe" aria-hidden="true"></i>
      
      <a href="/en-us/overview/overview.html" class="lang-switch">English</a>
      
    </span>
  </div>

  <div class="header-search-panel" id="header-search-panel">
    <span class="header-search-close" id="header-search-close"><i class="fa fa-times" aria-hidden="true"></i></span>
    <div class="header-search-input-wrap" id="header-search-input-wrap">
      <input type="text" class="header-search-input" id="header-search-input" placeholder="请输入关键字">
      <span class="header-search-input-icon"><i class="fa fa-search"></i></span>
    </div>

    <div class="header-search-trend" id="header-search-trend">
      <div class="header-search-trend-title">热搜词</div>
      <div class="header-search-trend-items clearfix">
        
        <div class="header-search-trend-item" data-word="APP">APP</div>
        
        <div class="header-search-trend-item" data-word="SDK">SDK</div>
        
        <div class="header-search-trend-item" data-word="Android">Android</div>
        
        <div class="header-search-trend-item" data-word="ios">ios</div>
        
        <div class="header-search-trend-item" data-word="WIFI">WIFI</div>
        
      </div>
    </div>

    <div class="header-search-result hidden" id="header-search-result">
      <div class="header-search-result-head">
        搜索结果 &gt; <span id="header-search-keyword"></span>
      </div>
      <div class="header-search-result-items" id="header-search-result-items">
      </div>
    </div>
  </div>
</div>

    <div class="body">

  <div class="container clearfix">
    <div class="navigation">
      <div class="navigation-inner">
        <div class="nav-title">目录</div>
        <div class="nav"></div>
      </div>
    </div>
    <div class="markdown-body" data-spy="scroll" data-target=".navigation">
      <div class="heading">
        <div class="title">GN511使用说明</div>
        <a class="edit-link" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> 文档编辑</a>
      </div>
      <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><h4 id="GN511工业级DTU产品是一款高性能、低功耗、多频段物联网无线数传单元，秉承机智云工业级DTU研发经验，硬件设计上采用支持NB-IoT的N256无线通讯模块，具备5-24V宽压电源、贴片eSIM、485串口、232串口、硬件看门狗等必要功能，主板通过串口通讯可快速实现与云端的通讯连接。同时GN511集成STM32-MCU，用户可方便地实现协议转换、扩展等功能。"><a href="#GN511工业级DTU产品是一款高性能、低功耗、多频段物联网无线数传单元，秉承机智云工业级DTU研发经验，硬件设计上采用支持NB-IoT的N256无线通讯模块，具备5-24V宽压电源、贴片eSIM、485串口、232串口、硬件看门狗等必要功能，主板通过串口通讯可快速实现与云端的通讯连接。同时GN511集成STM32-MCU，用户可方便地实现协议转换、扩展等功能。" class="headerlink" title="GN511工业级DTU产品是一款高性能、低功耗、多频段物联网无线数传单元，秉承机智云工业级DTU研发经验，硬件设计上采用支持NB-IoT的N256无线通讯模块，具备5-24V宽压电源、贴片eSIM、485串口、232串口、硬件看门狗等必要功能，主板通过串口通讯可快速实现与云端的通讯连接。同时GN511集成STM32 MCU，用户可方便地实现协议转换、扩展等功能。"></a>GN511工业级DTU产品是一款高性能、低功耗、多频段物联网无线数传单元，秉承机智云工业级DTU研发经验，硬件设计上采用支持NB-IoT的N256无线通讯模块，具备5-24V宽压电源、贴片eSIM、485串口、232串口、硬件看门狗等必要功能，主板通过串口通讯可快速实现与云端的通讯连接。同时GN511集成STM32 MCU，用户可方便地实现协议转换、扩展等功能。</h4><h4 id="本文主要介绍GN511如何快速接入机智云，以及实现简单的透传功能。"><a href="#本文主要介绍GN511如何快速接入机智云，以及实现简单的透传功能。" class="headerlink" title="本文主要介绍GN511如何快速接入机智云，以及实现简单的透传功能。"></a>本文主要介绍GN511如何快速接入机智云，以及实现简单的透传功能。</h4><h1 id="操作流程"><a href="#操作流程" class="headerlink" title="操作流程"></a>操作流程</h1><h2 id="1-在机智云创建新产品，定义数据点，添加设备"><a href="#1-在机智云创建新产品，定义数据点，添加设备" class="headerlink" title="1. 在机智云创建新产品，定义数据点，添加设备"></a>1. 在机智云创建新产品，定义数据点，添加设备</h2><h4 id="1-1-创建新产品"><a href="#1-1-创建新产品" class="headerlink" title="1.1 创建新产品"></a>1.1 创建新产品</h4><p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_1.png" alt="name"></p>
<p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_2.png" alt="name"></p>
<h4 id="1-2-定义数据点"><a href="#1-2-定义数据点" class="headerlink" title="1.2 定义数据点"></a>1.2 定义数据点</h4><p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_3.png" alt="name"></p>
<p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_4.png" alt="name"></p>
<p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_5.png" alt="name"></p>
<h4 id="1-3-添加设备"><a href="#1-3-添加设备" class="headerlink" title="1.3 添加设备"></a>1.3 添加设备</h4><p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_6.png" alt="name"></p>
<p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_7.png" alt="name"></p>
<h2 id="2-下载自动生成mcu代码，烧写程序到GN511的mcu中"><a href="#2-下载自动生成mcu代码，烧写程序到GN511的mcu中" class="headerlink" title="2. 下载自动生成mcu代码，烧写程序到GN511的mcu中"></a>2. 下载自动生成mcu代码，烧写程序到GN511的mcu中</h2><h4 id="2-1-下载自动生成代码"><a href="#2-1-下载自动生成代码" class="headerlink" title="2.1 下载自动生成代码"></a>2.1 下载自动生成代码</h4><p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_8.png" alt="name"></p>
<h4 id="2-2-下载代码完成后，我们可以先尝试将编译好的程序通过-CON3-的-SW-调试接口烧写到mcu当中。"><a href="#2-2-下载代码完成后，我们可以先尝试将编译好的程序通过-CON3-的-SW-调试接口烧写到mcu当中。" class="headerlink" title="2.2 下载代码完成后，我们可以先尝试将编译好的程序通过 CON3 的 SW 调试接口烧写到mcu当中。"></a>2.2 下载代码完成后，我们可以先尝试将编译好的程序通过 CON3 的 SW 调试接口烧写到mcu当中。</h4><p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_9.png" alt="name"></p>
<h2 id="3-修改mcu程序，使得mcu可以正常运行"><a href="#3-修改mcu程序，使得mcu可以正常运行" class="headerlink" title="3. 修改mcu程序，使得mcu可以正常运行"></a>3. 修改mcu程序，使得mcu可以正常运行</h2><h4 id="MCU-无外部晶振，必须使用内部时钟-HSI。"><a href="#MCU-无外部晶振，必须使用内部时钟-HSI。" class="headerlink" title="MCU 无外部晶振，必须使用内部时钟 HSI。"></a>MCU 无外部晶振，必须使用内部时钟 HSI。</h4><h4 id="STM32-的部分-IO-口默认主功能是-JLINK-的功能管脚，需要将关闭-JTAG-DP，启动SW-DP-才可以控制该-IO-口，例如本硬件中用到的-PB3-和-PB4"><a href="#STM32-的部分-IO-口默认主功能是-JLINK-的功能管脚，需要将关闭-JTAG-DP，启动SW-DP-才可以控制该-IO-口，例如本硬件中用到的-PB3-和-PB4" class="headerlink" title="STM32 的部分 IO 口默认主功能是 JLINK 的功能管脚，需要将关闭 JTAG-DP，启动SW-DP 才可以控制该 IO 口，例如本硬件中用到的 PB3 和 PB4."></a>STM32 的部分 IO 口默认主功能是 JLINK 的功能管脚，需要将关闭 JTAG-DP，启动SW-DP 才可以控制该 IO 口，例如本硬件中用到的 PB3 和 PB4.</h4><h5 id="注：寄存器控制配置方式"><a href="#注：寄存器控制配置方式" class="headerlink" title="注：寄存器控制配置方式:"></a>注：寄存器控制配置方式:</h5><p>RCC-&gt;APB2ENR|=0x1D; //使能 ABC IO 口时钟 开启辅助时钟 </p>
<p>AFIO-&gt;MAPR |= 0x02000000; //关闭 JTAG-DP，启动 SW-DP</p>
<p>程序修改步骤，略，本文最后有参考代码</p>
<h2 id="4-mcu控制N256的上电和掉电、开机和关机"><a href="#4-mcu控制N256的上电和掉电、开机和关机" class="headerlink" title="4. mcu控制N256的上电和掉电、开机和关机"></a>4. mcu控制N256的上电和掉电、开机和关机</h2><h4 id="4-1-N256-上电"><a href="#4-1-N256-上电" class="headerlink" title="4.1 N256 上电"></a>4.1 N256 上电</h4><h4 id="N256-默认不得电，需要通过-MCU-的-PB0-NB-PWR-来控制得电。"><a href="#N256-默认不得电，需要通过-MCU-的-PB0-NB-PWR-来控制得电。" class="headerlink" title="N256 默认不得电，需要通过 MCU 的 PB0(NB_PWR)来控制得电。"></a>N256 默认不得电，需要通过 MCU 的 PB0(NB_PWR)来控制得电。</h4><p> i. PB0(NB_PWR)=1，N256 上电。 </p>
<p> ii. PB0(NB_PWR)=0，N256 掉电。</p>
<h4 id="4-2-N256-开机"><a href="#4-2-N256-开机" class="headerlink" title="4.2 N256 开机"></a>4.2 N256 开机</h4><h6 id="a-MCU-需要先通过-PB0-NB-PWR-1-给-N256-上电。"><a href="#a-MCU-需要先通过-PB0-NB-PWR-1-给-N256-上电。" class="headerlink" title="a) MCU 需要先通过 PB0(NB_PWR)=1 给 N256 上电。"></a>a) MCU 需要先通过 PB0(NB_PWR)=1 给 N256 上电。</h6><h6 id="b-等-N256-电压稳定后-MCU-再通过-PB1-NB-PKEY-来控制-N256-开机或关机。"><a href="#b-等-N256-电压稳定后-MCU-再通过-PB1-NB-PKEY-来控制-N256-开机或关机。" class="headerlink" title="b) 等 N256 电压稳定后 MCU 再通过 PB1(NB_PKEY)来控制 N256 开机或关机。"></a>b) 等 N256 电压稳定后 MCU 再通过 PB1(NB_PKEY)来控制 N256 开机或关机。</h6><h6 id="c-PB1-NB-PKEY-的电平逻辑和-N256-的-PWRKEY-的电平逻辑是非门"><a href="#c-PB1-NB-PKEY-的电平逻辑和-N256-的-PWRKEY-的电平逻辑是非门" class="headerlink" title="c) PB1(NB_PKEY)的电平逻辑和 N256 的 PWRKEY 的电平逻辑是非门"></a>c) PB1(NB_PKEY)的电平逻辑和 N256 的 PWRKEY 的电平逻辑是非门</h6><p> i. PB1(NB_PKEY)=1，N256 PWRKEY=0. </p>
<p> ii. PB1(NB_PKEY)=0，N256 PWRKEY=1. </p>
<h6 id="d-在拉低管脚-PWRKEY-之前，保证-VBAT-电压稳定。建议-VBAT-上电到管脚-PWRKEY-拉低之间的时间-T1-为-100ms-左右。"><a href="#d-在拉低管脚-PWRKEY-之前，保证-VBAT-电压稳定。建议-VBAT-上电到管脚-PWRKEY-拉低之间的时间-T1-为-100ms-左右。" class="headerlink" title="d) 在拉低管脚 PWRKEY 之前，保证 VBAT 电压稳定。建议 VBAT 上电到管脚 PWRKEY 拉低之间的时间 T1 为 100ms 左右。"></a>d) 在拉低管脚 PWRKEY 之前，保证 VBAT 电压稳定。建议 VBAT 上电到管脚 PWRKEY 拉低之间的时间 T1 为 100ms 左右。</h6><h4 id="N256-开机后，可以通过查看模组日志或者输入-AT-命令（如AT-CGSN-1）查看响应，判断模块是否已经开机成功，若成功可以释放-PWRKEY-引脚，反之，则模块开机失败。"><a href="#N256-开机后，可以通过查看模组日志或者输入-AT-命令（如AT-CGSN-1）查看响应，判断模块是否已经开机成功，若成功可以释放-PWRKEY-引脚，反之，则模块开机失败。" class="headerlink" title="N256 开机后，可以通过查看模组日志或者输入 AT 命令（如AT+CGSN=1）查看响应，判断模块是否已经开机成功，若成功可以释放 PWRKEY 引脚，反之，则模块开机失败。"></a>N256 开机后，可以通过查看模组日志或者输入 AT 命令（如AT+CGSN=1）查看响应，判断模块是否已经开机成功，若成功可以释放 PWRKEY 引脚，反之，则模块开机失败。</h4><h4 id="注：使用GN511的COM1查看模组日志"><a href="#注：使用GN511的COM1查看模组日志" class="headerlink" title="注：使用GN511的COM1查看模组日志"></a>注：使用GN511的COM1查看模组日志</h4><h4 id="模组日志截图"><a href="#模组日志截图" class="headerlink" title="模组日志截图"></a>模组日志截图</h4><p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_10.png" alt="name"></p>
<h2 id="5-GN511上线，机智云IOE-DEMO-APP绑定设备"><a href="#5-GN511上线，机智云IOE-DEMO-APP绑定设备" class="headerlink" title="5. GN511上线，机智云IOE DEMO APP绑定设备"></a>5. GN511上线，机智云IOE DEMO APP绑定设备</h2><h4 id="当模组正常开机十多秒以后，模组会自动连接上机智云平台，此时我们可以使用机智云APP扫描二维码的方式绑定GN511，使用机智云串口助手的小工具生成设备绑定二维码"><a href="#当模组正常开机十多秒以后，模组会自动连接上机智云平台，此时我们可以使用机智云APP扫描二维码的方式绑定GN511，使用机智云串口助手的小工具生成设备绑定二维码" class="headerlink" title="当模组正常开机十多秒以后，模组会自动连接上机智云平台，此时我们可以使用机智云APP扫描二维码的方式绑定GN511，使用机智云串口助手的小工具生成设备绑定二维码"></a>当模组正常开机十多秒以后，模组会自动连接上机智云平台，此时我们可以使用机智云APP扫描二维码的方式绑定GN511，使用机智云串口助手的小工具生成设备绑定二维码</h4><p> 串口助手下载地址：<a href="https://download.gizwits.com/zh-cn/p/98/119" target="_blank" rel="noopener">https://download.gizwits.com/zh-cn/p/98/119</a></p>
<p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_11.png" alt="name"></p>
<h4 id="生成设备绑定二维码后，我们可以下载机智云IOE-DEMO-APP扫码绑定设备"><a href="#生成设备绑定二维码后，我们可以下载机智云IOE-DEMO-APP扫码绑定设备" class="headerlink" title="生成设备绑定二维码后，我们可以下载机智云IOE DEMO APP扫码绑定设备"></a>生成设备绑定二维码后，我们可以下载机智云IOE DEMO APP扫码绑定设备</h4><p>APP下载地址：<a href="https://download.gizwits.com/zh-cn/p/98/99" target="_blank" rel="noopener">https://download.gizwits.com/zh-cn/p/98/99</a></p>
<p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_12.png" alt="name"></p>
<h2 id="6-控制设备，下发透传数据，实现简单透传功能，机智云接入完毕"><a href="#6-控制设备，下发透传数据，实现简单透传功能，机智云接入完毕" class="headerlink" title="6. 控制设备，下发透传数据，实现简单透传功能，机智云接入完毕"></a>6. 控制设备，下发透传数据，实现简单透传功能，机智云接入完毕</h2><h4 id="APP端下发透传数据，然后我们用GN511的485将该透传数据输出，本程序使用了485-1打印mcu日志，485-2输出透传数据"><a href="#APP端下发透传数据，然后我们用GN511的485将该透传数据输出，本程序使用了485-1打印mcu日志，485-2输出透传数据" class="headerlink" title="APP端下发透传数据，然后我们用GN511的485将该透传数据输出，本程序使用了485-1打印mcu日志，485-2输出透传数据"></a>APP端下发透传数据，然后我们用GN511的485将该透传数据输出，本程序使用了485-1打印mcu日志，485-2输出透传数据</h4><p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_13.png" alt="name"></p>
<h4 id="GN511透传数据接收情况"><a href="#GN511透传数据接收情况" class="headerlink" title="GN511透传数据接收情况"></a>GN511透传数据接收情况</h4><p> <img src="/assets/zh-cn/deviceDev/debug/GN511/GN511_use_14.png" alt="name"></p>
<h2 id="7-参考资料下载"><a href="#7-参考资料下载" class="headerlink" title="7. 参考资料下载"></a>7. 参考资料下载</h2><h4 id="参考代码下载地址：链接：https-pan-baidu-com-s-1QoSs4I2sHkpLZFUhYoCzfw"><a href="#参考代码下载地址：链接：https-pan-baidu-com-s-1QoSs4I2sHkpLZFUhYoCzfw" class="headerlink" title="参考代码下载地址：链接：https://pan.baidu.com/s/1QoSs4I2sHkpLZFUhYoCzfw"></a>参考代码下载地址：链接：<a href="https://pan.baidu.com/s/1QoSs4I2sHkpLZFUhYoCzfw" target="_blank" rel="noopener">https://pan.baidu.com/s/1QoSs4I2sHkpLZFUhYoCzfw</a></h4><p>提取码：p6vx </p>
<h4 id="《GN511硬件IO说明书-V1-5》链接：https-pan-baidu-com-s-1FbwuWueLlPV1PCDkU1RXww"><a href="#《GN511硬件IO说明书-V1-5》链接：https-pan-baidu-com-s-1FbwuWueLlPV1PCDkU1RXww" class="headerlink" title="《GN511硬件IO说明书 V1.5》链接：https://pan.baidu.com/s/1FbwuWueLlPV1PCDkU1RXww"></a>《GN511硬件IO说明书 V1.5》链接：<a href="https://pan.baidu.com/s/1FbwuWueLlPV1PCDkU1RXww" target="_blank" rel="noopener">https://pan.baidu.com/s/1FbwuWueLlPV1PCDkU1RXww</a></h4><p>提取码：pn0l </p>

    </div>
    
    <div class="widget-wrapper">
  <span class="widget">
    <div>
        <a id="share" target="_blank" title="分享">
          <span>分享</span>
        </a>
        <div class="social-share" data-initialized="true">
            <a href="#" class="social-share-icon icon-wechat"></a>
            <a href="#" class="social-share-icon icon-weibo"></a>
            <a href="#" class="social-share-icon icon-qq"></a>
            <a href="#" class="social-share-icon icon-qzone"></a>
            <a href="#" class="social-share-icon icon-douban"></a>
        </div>
    </div>
    <a href="http://y0.cn/docs" target="_blank" title="项目登记">
      <span>项目登记</span>
    </a>
    <a href="https://github.com/gizwits-docs/gizwits-docs/issues" target="_blank" title="问题反馈">
      <span>问题反馈</span>
    </a>
    <a href="#" title="返回顶部"><i class="fa fa-angle-up fa-2x" aria-hidden="true"></i></a>
  </span>
</div>
  </div>
</div>

    <div class="footer">
  <div class="container">
    <p>
      <span><a href="http://www.gizwits.com" target="_blank">机智云首页</a></span>
      <span><a href="http://www.gizwits.com/about-us" target="_blank">关于我们</a></span>
      <span><a href="http://www.gizwits.com/about-us#contact-us" target="_blank">联系我们</a></span>
      <span><a href="http://www.gizwits.com/join-us" target="_blank">加入我们</a></span>
    </p>
    <p>&#169;2011-2017; Gizwits IoT Technology Co., Ltd. 粤ICP备11090211号</p>
  </div>
</div>

    <script src="/js/spin.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.hashchange.min.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/scrollspy.js"></script>
<script src="/js/social-share.min.js"></script>
<script src="/js/documentation.js?v=d413cf8ceca4865c39c2dabcd3bc0077"></script>


<script type="text/javascript" src="http://webchat.7moor.com/javascripts/7moorInit.js?accessId=b01e0430-943a-11e6-8ad7-636675d9e71f&autoShow=true" async="async"></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3787e6b3b29a084fde41f22828d89b7d";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </body>
</html>