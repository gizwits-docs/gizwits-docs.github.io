
<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta charset="utf-8">

  <title>D3 Engine使用教程 - 机智云</title>

  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta name="Description" content="D3 Engine使用教程-机智云">
  <meta name="keywords" content="D3 Engine使用教程 docs 文档中心 Gizwits">

  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">
  <script src="/js/redirect.js"></script>

  <link rel="stylesheet" href="/css/pure.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/documentation.css?v=0a4338f8b84af6c1b67f4465b8b6739f">
  <link rel="stylesheet" href="/css/share.min.css">
</head>
  <body>
    <div class="header">
  <div class="container pure-g">
    <span class="brand pure-u-5-24">

      <a href="http://www.gizwits.com" class="logo">
        <img src="/images/logo.png" alt="logo"> 
      </a>
      <a class="text" href="/">文档中心</a>
    </span>
    
    <div class="mobile-header"v>
      <span class="title">机智云 文档中心</span>
      <i class="fa fa-caret-square-o-down fa-lg" aria-hidden="true"></i>
    </div>
    
    <span class="menu pure-u-16-24">
      <span class="header-search-btn" id="header-search-btn">
        <i class="fa fa-search"></i>
      </span>
      <ul class="levelA-wrapper">
        
      </ul>
    </span>
  
    <span class="pure-u-3-24 lang-switch-wrapper">
      
      <i class="fa fa-globe" aria-hidden="true"></i> 
      
      <a href="http://docsen.gizwits.com/hc/" class="lang-switch">English</a>
      
    </span>
  </div>

  <div class="header-search-panel" id="header-search-panel">
    <span class="header-search-close" id="header-search-close"><i class="fa fa-times" aria-hidden="true"></i></span>
    <div class="header-search-input-wrap" id="header-search-input-wrap">
      <input type="text" class="header-search-input" id="header-search-input" placeholder="请输入关键字">
      <span class="header-search-input-icon"><i class="fa fa-search"></i></span>
    </div>

    <div class="header-search-trend" id="header-search-trend">
      <div class="header-search-trend-title">热搜词</div>
      <div class="header-search-trend-items clearfix">
        
        <div class="header-search-trend-item" data-word="APP">APP</div>
        
        <div class="header-search-trend-item" data-word="SDK">SDK</div>
        
        <div class="header-search-trend-item" data-word="Android">Android</div>
        
        <div class="header-search-trend-item" data-word="ios">ios</div>
        
        <div class="header-search-trend-item" data-word="WIFI">WIFI</div>
        
      </div>  
    </div>

    <div class="header-search-result hidden" id="header-search-result">
      <div class="header-search-result-head">
        搜索结果 &gt; <span id="header-search-keyword"></span>
      </div>
      <div class="header-search-result-items" id="header-search-result-items">
      </div>
    </div>
  </div>
</div>
    <div class="body">

  <div class="container clearfix">
    <div class="navigation">
      <div class="navigation-inner">
        <div class="nav-title">目录</div>
        <div class="nav"></div>
      </div>
    </div>
    <div class="markdown-body" data-spy="scroll" data-target=".navigation">
      <div class="heading">
        <div class="title">D3 Engine使用教程</div>
        <!--<a class="edit-link" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> 文档编辑</a>-->
      </div>
      <h1 id="D3-Engine简介"><a href="#D3-Engine简介" class="headerlink" title="D3 Engine简介"></a>D3 Engine简介</h1><p><strong>申请条件</strong></p>
<p>机智云企业开发者，购买了GDCS服务包的企业客户。</p>
<p> <strong>功能介绍</strong></p>
<p>D3 Engine，全称 Dynamic Data Director Engine。</p>
<p>D3 Engine是机智云为开发者提供的傻瓜式的数据处理、开发引擎。D3 可以灵活定义数据的输入，能将设备、用户数据与外部第三方数据进行有机整合，还可以支持脚本解析与自定义数据输入，满足不同开发者的数据处理需要。主要特点如下：</p>
<p>1）多样的数据源：支持自定义多种数据源，第三方公共数据甚至您的ERP系统的数据输入。<br>2）强大的规则处理：基于决策树算法支持灵活多重条件组合。<br>3）灵活的输出：除了App推送、邮件、短信等服务，还可以支持回调服务以及存储服务；存储服务通过数据平台的计算与开放API服务对各类应用提供数据服务，降低各类应用的开发成本以及面对海量数据的性能处理风险</p>
<h1 id="D3-Engine申请流程"><a href="#D3-Engine申请流程" class="headerlink" title="D3 Engine申请流程"></a>D3 Engine申请流程</h1><p>第一步：登录机智云【开发者中心】，打开需要申请开通D3 Engine的产品(仅限机智云企业开发者)；<br>第二步：点击【添加服务】，进入到【添加服务】页面，找到【D3 Engine】；</p>
<p><img src="/assets/zh-cn/UserManual/D3/image5.png" alt="Alt text"></p>
<p>第三步：打开D3 Engine，点击【开通服务】按钮，等待机智云审核；</p>
<p><img src="/assets/zh-cn/UserManual/D3/image6.png" alt="Alt text"></p>
<p>第四步：待机智云审核通过后，在服务列表即可看到D3 Engine；点击【D3 Engine】即可开始体验。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image7.png" alt="Alt text"></p>
<h1 id="D3-Engine使用说明"><a href="#D3-Engine使用说明" class="headerlink" title="D3 Engine使用说明"></a>D3 Engine使用说明</h1><h2 id="1-项目列表"><a href="#1-项目列表" class="headerlink" title="1.项目列表"></a>1.项目列表</h2><p>进入D3 Engine，默认进入此产品的项目列表页面。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image8.png" alt="Alt text"></p>
<p>项目列表为空时，页面显示如上图。</p>
<p>【新建项目】：点击后跳转至新建项目页面。<br>【APP推送配置】：点击后跳转至APP推送配置页面。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image9.png" alt="Alt text"></p>
<p>项目列表不为空时，页面显示如上图。本页面显示该产品所创建的所有项目(不包含通过调用接口创建的项目)。显示字段为项目ID、项目名称、动作类型、备注、是否开启等。</p>
<p>【新建项目】：点击此按钮跳转至新建项目页面，可为该产品创建新项目；<br>【编辑】：点击后进入当前项目页面可进行修改；<br>【删除】：点击此按钮可将当前项目删除。<br>【是否开启】：项目是否开启按钮。项目创建成功后默认开启。点击关闭后该项目将不会被触发。</p>
<h2 id="2-配置"><a href="#2-配置" class="headerlink" title="2.配置"></a>2.配置</h2><p>进入D3 Engine，默认进入此产品的【项目列表】页面，点击【配置】进入APP推送配置页面。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image10.png" alt="Alt text"></p>
<p>当前产品无绑定的应用时，页面显示如上图。</p>
<p>【应用配置】：点击后跳转至应用配置页面，可创建新应用。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image11.png" alt="Alt text"></p>
<p>当前产品有绑定的应用时，页面显示如上图，列出该产品绑定的所有应用。<br>iOS和Android类型支持配置推送，微信暂不支持。</p>
<p>【编辑推送平台】：点击后跳转至APP绑定第三方推送的配置界面。</p>
<h2 id="3-编辑推送平台"><a href="#3-编辑推送平台" class="headerlink" title="3.编辑推送平台"></a>3.编辑推送平台</h2><p>此页面可以为APP绑定百度推送或者极光推送。</p>
<p>应用平台：创建应用时所选的类型iOS、Android、微信(暂不支持配置推送)<br>推送平台：目前仅支持百度推送和极光推送两种方式<br>推送Key和Secret：从百度推送或极光推送平台申请的Key和Secret<br>证书类型：生产和开发两种证书类型。iOS应用须选择证书类型(且应根据所选证书类型上传对应证书至百度或极光推送平台上)，Android应用无需证书</p>
<p><img src="/assets/zh-cn/UserManual/D3/image12.png" alt="Alt text"></p>
<p>输入百度推送API Key、Secret Key或者极光推送App Key、Master Key绑定成功后效果如下图：</p>
<p><img src="/assets/zh-cn/UserManual/D3/image13.png" alt="Alt text"></p>
<p>再次点击编辑推送平台，可进行解绑及修改操作。</p>
<h2 id="4-新建-编辑项目"><a href="#4-新建-编辑项目" class="headerlink" title="4.新建/编辑项目"></a>4.新建/编辑项目</h2><p>【返回】：点击此按钮，返回至项目列表页；<br>【保存】：点击对当前所编辑的项目进行保存(无法保存时会有出错提示)；<br>【左侧节点】：项目组成部分，不同类型的节点，使用拖拽的方式拖至中间空白区域。分为三类：输入、处理方法、触发动作；<br>【中间区域】：项目编辑区域，可拖拽页面左侧节点至此部分进行项目创建和修改等操作；<br>【右下角三个图标】：可对页面进行缩小、恢复默认及放大的操作(仅针对项目编辑区域有效)；</p>
<p><img src="/assets/zh-cn/UserManual/D3/image14.png" alt="Alt text"></p>
<h2 id="5-输入节点"><a href="#5-输入节点" class="headerlink" title="5.输入节点"></a>5.输入节点</h2><p><strong>设备数据</strong></p>
<p>使用接入机智云的设备的数据作为输入。当有报警或故障数据点时，设备报警或设备故障选项才会显示。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image15.png" alt="Alt text"></p>
<p><strong>自定义数据</strong><br>使用自定义的JSON格式的数据作为输入。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image16.png" alt="Alt text"></p>
<p><img src="/assets/zh-cn/UserManual/D3/image17.png" alt="Alt text"></p>
<p>Schema：描述JSON字符串内部包含的字段结构。可以使用以下工具生成:<a href="http://jsonschema.net/#/" target="_blank" rel="external">http://jsonschema.net/#/</a><br>数据标识名：用于引用此请求返回的JSON标识。<br>更新间隔：不小于5s，请求的缓存过期时间。D3会将自定义数据缓存起来，每经过一个更新间隔会重新获取数据。</p>
<h2 id="6-处理方法节点"><a href="#6-处理方法节点" class="headerlink" title="6.处理方法节点"></a>6.处理方法节点</h2><p><strong>逻辑规则</strong></p>
<p>添加一个逻辑条件。比较参数可以是数据点值也可以是自定义的变量值。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image18.png" alt="Alt text"></p>
<p><strong>四则运算</strong></p>
<p>添加一个由四则运算表达式指定的中间变量。此处只能针对数值类型的数据点进行四则表达式运算。变量标识请不要使用中文。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image19.png" alt="Alt text"></p>
<h2 id="7-触发动作节点"><a href="#7-触发动作节点" class="headerlink" title="7.触发动作节点"></a>7.触发动作节点</h2><p><strong>APP推送</strong></p>
<p>规则触发成功时，与设备绑定的APP用户将收到一条推送消息。<br>此处可以编辑推送消息的标题、推送内容(可从参数中选择自动替换的变量)、选择推送应用及消息类型，可以自定义推送的时间段。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image20.png" alt="Alt text"></p>
<p><img src="/assets/zh-cn/UserManual/D3/image21.png" alt="Alt text"></p>
<p><strong>HTTP请求</strong></p>
<p>规则触发成功时，向指定的API发送一个请求。在此节点中输入要请求API的详细参数。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image22.png" alt="Alt text"></p>
<p><strong>邮件</strong></p>
<p>规则触发成功时，指定的邮箱将收到一封推送邮件。此节点定义邮件主题、邮件内容及收件人信息。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image23.png" alt="Alt text"></p>
<p><strong>短信推送</strong></p>
<p>规则触发成功时，与设备绑定的APP用户的手机号码将收到一条短信消息。Apikey和短信模板ID可以从云片获取，此处会进行校验。展开属性可自定义消息接收时间。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image24.png" alt="Alt text"></p>
<p><img src="/assets/zh-cn/UserManual/D3/image25.png" alt="Alt text"></p>
<p><strong>控制设备</strong></p>
<p>规则触发成功时，该设备改变自己的状态。控制内容中以JSON格式填入，支持Raw和KV两种格式。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image26.png" alt="Alt text"></p>
<h2 id="8-举例说明"><a href="#8-举例说明" class="headerlink" title="8.举例说明"></a>8.举例说明</h2><p>产品名称：空气净化器<br>数据点：<br>空气质量（air_quality）    枚举型    优秀,良好,一般,污染<br>温度（temperture）    数值型    -128~128<br>消耗品1（consumable1）    数值型    0~100<br>消耗品2（consumable2）    数值型    0~100</p>
<p><strong>例1：设备上线时，推送消息给app用户同时推送邮件给xxxx@126.com邮箱</strong></p>
<p>第一步：打开【空气净化器】产品的新建项目页面。<br>第二步：拖动【设备数据】节点到项目编辑区域。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image27.png" alt="Alt text"></p>
<p>第三步：双击【设备数据】节点进行编辑，点击【确定】即保存。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image28.png" alt="Alt text"></p>
<p>第四步：拖动【APP推送】节点到项目编辑区域。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image29.png" alt="Alt text"></p>
<p>第五步：双击【APP推送】节点进行编辑(定义推送标题、内容、时间段等参数，可参考触发动作节点<em>APP推送节点说明)，点击【确定】即保存。<br>第六步：拖动【邮件】节点到项目编辑区域，并双击进行编辑(定义推送人、推送内容、推送标题等参数，可参考触发动作节点</em>邮件推送节点说明)，点击【确定】即保存<br>第七步：将三个节点连结起来。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image30.png" alt="Alt text"></p>
<p>第八步：点击右上角【保存】按钮，项目创建成功。</p>
<p><strong>例2：空气质量等于一般且消耗品1和消耗品2的平均值小于30时，推送消息给app用户</strong></p>
<p>第一步：拖动【设备数据】节点到项目编辑区域。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image27.png" alt="Alt text"></p>
<p>第二步：双击进行编辑，选择设备上报状态，点击【确定】即保存。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image31.png" alt="Alt text"></p>
<p>第三步：拖动【逻辑规则】节点到项目编辑区域。<br>第四步：双击【逻辑规则】节点进行编辑，点击【确定】即保存。<br>进入【逻辑规则】编辑框，比较参数1选择数据点值(空气质量)，比较符号选择等于，比较参数2选择值且从下拉列表中选择具体值(一般)，点击【确定】保存。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image32.png" alt="Alt text"></p>
<p>第五步：拖动【四则运算】节点到项目编辑区域<br>第六步：双击【四则运算】节点进行编辑，点击【确定】即保存<br>此步骤定义一个中间变量Avg = (消耗品1+消耗品2)/2<br>【算述表达式】中公式输入步骤：点击运算符中的左括号(，从【参数】下拉列中选择“消耗品1”点击添加，点击运算符中的+，从【参数】下拉列表中选择“消耗品2”点击添加，点击运算符中的右括号)，点击运算符中的除号/，输入数字2<br>在【变量标识】中给变量起个名称(例如Avg)</p>
<p><img src="/assets/zh-cn/UserManual/D3/image33.png" alt="Alt text"></p>
<p>第七步：再拖动一个【逻辑运算】节点到项目编辑区域，并双击进行编辑，点击【确定】即保存。<br>进入【逻辑规则】编辑框，比较参数1选择上一步定义的中间变量(Avg)，中间比较符号选择小于，比较参数2选择值且输入数字(30)，点击【确定】保存。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image34.png" alt="Alt text"></p>
<p>第八步：拖动【APP推送】节点到项目编辑区域，并双击进行编辑，点击【确定】保存。【APP推送】节点设置请参考触发动作节点_APP推送节点说明。<br>第九步：将五个节点连接起来。</p>
<p><img src="/assets/zh-cn/UserManual/D3/image35.png" alt="Alt text"></p>
<p>第十步：点击右上角【保存】按钮，项目创建成功。</p>

    </div>

    <div class="widget-wrapper">
  <span class="widget">
    <div>
        <a id='share' target="_blank" title="分享">
          <span>分享</span>
        </a>
        <div class="social-share" data-initialized="true">
            <a href="#" class="social-share-icon icon-wechat"></a>
            <a href="#" class="social-share-icon icon-weibo"></a>
            <a href="#" class="social-share-icon icon-qq"></a>
            <a href="#" class="social-share-icon icon-qzone"></a>
            <a href="#" class="social-share-icon icon-douban"></a>
        </div>
    </div>
    <a href="http://y0.cn/docs" target="_blank" title="项目登记">
      <span>项目登记</span>
    </a>
    <a href="https://github.com/gizwits-docs/gizwits-docs/issues" target="_blank" title="问题反馈">
      <span>问题反馈</span>
    </a>
    <a href="#" title="返回顶部"><i class="fa fa-angle-up fa-2x" aria-hidden="true"></i></a>
  </span>
</div>
  </div>
</div>

    <div class="footer">
  <div class="container">
    <p>
      <span><a href="http://www.gizwits.com" target="_blank">机智云首页</a></span>
      <span><a href="http://www.gizwits.com/about-us" target="_blank">关于我们</a></span>
      <span><a href="http://www.gizwits.com/about-us#contact-us" target="_blank">联系我们</a></span>
      <span><a href="http://www.gizwits.com/join-us" target="_blank">加入我们</a></span>
    </p>
    <p>&#169;2011-2017; Gizwits IoT Technology Co., Ltd. 粤ICP备11090211号</p>
  </div>
</div>

    <script src="/js/spin.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.hashchange.min.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/scrollspy.js"></script>
<script src="/js/social-share.min.js"></script>
<script src="/js/documentation.js?v=60a6c645bea8e4303c7872b6c5b7a0c9"></script>


<script type="text/javascript" src="http://webchat.7moor.com/javascripts/7moorInit.js?accessId=b01e0430-943a-11e6-8ad7-636675d9e71f&autoShow=true" async='async'></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3787e6b3b29a084fde41f22828d89b7d";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </body>
</html>