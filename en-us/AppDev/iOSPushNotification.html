
<!DOCTYPE html>
<html lang="en-us">
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <title>Guide to push notification integration for iOS App - Gizwits</title>

  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta name="Description" content="Guide to push notification integration for iOS App-Gizwits">
  <meta name="keywords" content="Guide to push notification integration for iOS App docs 文档中心 Gizwits">

  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">
  <script src="/js/redirect.js"></script>

  <link rel="stylesheet" href="/css/pure.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/documentation.css?v=db6111caa3d210b6cb1d2dac5119d7c5">
  <link rel="stylesheet" href="/css/share.min.css">
</head>
  <body>
    <div class="header">
  <div class="container pure-g">
    <span class="brand pure-u-5-24">
      <a href="http://www.gizwits.com" class="logo">
      
      <img src="/images/logo_en.png" alt="logo">
      
      </a>
      <a class="text" href="/">Docs</a>
    </span>

    <div class="mobile-header" v="">
      <span class="title">Gizwits Docs</span>
      <i class="fa fa-caret-square-o-down fa-lg" aria-hidden="true"></i>
    </div>

    <span class="menu pure-u-16-24">
      <span class="header-search-btn" id="header-search-btn">
        <i class="fa fa-search"></i>
      </span>
      <ul class="levelA-wrapper">
        
          
            <li class="levelA"><a href="/en-us/overview/overview.html">Overview</a></li>
          
        
          
            <li class="levelA">
              Quick Start &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/quickstart/GizwitsQuickStart.html">Gizwits Quick Start within 5 mins</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/quickstart/glossary.html">Glossary</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              App Dev Guide &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppDevGetStarted.html">Get Started with APP Development</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppCodeAutoGenerator.html">Gizwits App Code Auto-Generator</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      APP Frame Guide &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSFramework.html">Gizwits App Framework for iOS</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSPushNotification.html">iOS Push Notification</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSAuthReSkin.html">iOS Authentication and Re-Skin</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSDevQuickStart.html">iOS APP Development Instruction</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidFramework.html">Gizwits App Framework for Android</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidPushNotification.html">Android Push Notification</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidAuthReSkin.html">Android Authentication and Re-Skin</a></li>
                        
                          <li class="levelC"><a href="/en-us/quickstart/AndroidAppFrame.html">Quick start of Android App development</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/APICloudFrame.html">API Cloud Frame</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/VideoTutorial.html">Video tutorial of the App open source framework</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      App SDK Guide &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSSDKA2.html">iOS SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidSDKA2.html">Android SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/APICloudWifiSDK.html">APICloud SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/SDKTransparentTransmission.html">Data transparent transmission of SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/SDKLogCapture.html">SDK debug log capture</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/sdk_error.html">SDK error codes</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/WechatDev/WeChatDev.html">WeChat SDK Guide</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/WechatDev/WechatDevIntro.html">WeChat Dev Intro</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      More Guide &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/cloud/SharingSDK.html">Gizwits Device Sharing</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/third-party.html">Application process for third-party authentication</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppDevFAQ.html">App Dev FAQ</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              DeviceDev &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/DeviceDev/DeviceDevIntro.html">Get started with device connection</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      Gizwits Cloud access &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/quickstart/UseMCU.html">MCU scheme</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/UseSOC.html">ESP8266-SoC scheme</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/module_source/module_source.html">Module Documents</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      GAgent Documents &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/gagent_info.html">Detailed annotation of GAgent</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/DebugTool.html">Firmware downloading on modules</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/HF-LPB100.html">HF-LPB100</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/HF-LPT120.html">HF-LPT120</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/MXCHIP.html">MXCHIP</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/ESP8266.html">ESP8266</a></li>
                        
                      </ul>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              Cloud API &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/cloud/OpenAPI.html">Open API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/ent_dev.html">Enterprise Application Development</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/enterprise_api.html">Enterprise API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/NotificationAPI.html">Notification API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/WebsocketAPI.html">WebsocketAPI</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      API Tutorial &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseOpenAPI.html">Using Open API to control virtual device with Postman</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseSNoti.html">Real-time data synchronization demo for SNoti service</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseWebsocket.html">Control device using WebSocket</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/DataAPI.html">Aggregation API Guide</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/LinkageAPI.html">Device Linkage API Tutorial</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/devgroup_API.html">Device Grouping API Tutorial</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseQRCode.html">Generating device QR code for App binding</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/CloudFAQ.html">Cloud FAQ</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              User Manual &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/UserManual/ST_IoT.html">Gizwits and ST Make IoT Development Easy</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/DeviceDev/ST/ICUBEGIZWITS.html">Getting Started with I-CUBE-GiZWITS</a></li>
                  
                
              </ul>
            </li>
          
        
      </ul>
    </span>

    <span class="pure-u-3-24 lang-switch-wrapper">

      <i class="fa fa-globe" aria-hidden="true"></i>
      
      <a href="/zh-cn/overview/overview.html" class="lang-switch" data-lang="zh-cn">中文</a>
      
    </span>
  </div>

  <div class="header-search-panel" id="header-search-panel">
    <span class="header-search-close" id="header-search-close"><i class="fa fa-times" aria-hidden="true"></i></span>
    <div class="header-search-input-wrap" id="header-search-input-wrap">
      <input type="text" class="header-search-input" id="header-search-input" placeholder="请输入关键字">
      <span class="header-search-input-icon"><i class="fa fa-search"></i></span>
    </div>

    <div class="header-search-trend" id="header-search-trend">
      <div class="header-search-trend-title">热搜词</div>
      <div class="header-search-trend-items clearfix">
        
        <div class="header-search-trend-item" data-word="APP">APP</div>
        
        <div class="header-search-trend-item" data-word="SDK">SDK</div>
        
        <div class="header-search-trend-item" data-word="Android">Android</div>
        
        <div class="header-search-trend-item" data-word="ios">ios</div>
        
        <div class="header-search-trend-item" data-word="WIFI">WIFI</div>
        
      </div>
    </div>

    <div class="header-search-result hidden" id="header-search-result">
      <div class="header-search-result-head">
        搜索结果 &gt; <span id="header-search-keyword"></span>
      </div>
      <div class="header-search-result-items" id="header-search-result-items">
      </div>
    </div>
  </div>
</div>

    <div class="body">

  <div class="container clearfix">
    <div class="navigation">
      <div class="navigation-inner">
        <div class="nav-title">Content</div>
        <div class="nav"></div>
      </div>
    </div>
    <div class="markdown-body" data-spy="scroll" data-target=".navigation">
      <div class="heading">
        <div class="title">Guide to push notification integration for iOS App</div>
        <a class="edit-link" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> Edit</a>
      </div>
      <h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>The Gizwits App Framework (hereinafter referred as Framework) integrates Baidu push notification and Jiguang push notification, which is intended for rapid development with few modifciation. This document describes how to integreate push notification based on the Framework. For more information on the Framework, please refer to the Quick Start documentation.</p>
<h1 id="Quick-integration-with-Jiguang-push-notification"><a href="#Quick-integration-with-Jiguang-push-notification" class="headerlink" title="Quick integration with Jiguang push notification"></a>Quick integration with Jiguang push notification</h1><h2 id="1-Get-Jiguang-AppKey-and-Master-Secret"><a href="#1-Get-Jiguang-AppKey-and-Master-Secret" class="headerlink" title="1. Get Jiguang AppKey and Master Secret"></a>1. Get Jiguang AppKey and Master Secret</h2><h3 id="1-1-Create-a-Jiguang-application"><a href="#1-1-Create-a-Jiguang-application" class="headerlink" title="1.1 Create a Jiguang application"></a>1.1 Create a Jiguang application</h3><p>Click <a href="https://www.jiguang.cn/app/form" target="_blank" rel="noopener">https://www.jiguang.cn/app/form</a> to create a Jiguang application.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/11.png" alt="Creating a Jiguang Application"></p>
<p>As shown in the figure, you need to upload the Apple Developer Certificate, including the development certificate and the production certificate and their passwords.</p>
<h3 id="1-2-Get-Apple-certificate"><a href="#1-2-Get-Apple-certificate" class="headerlink" title="1.2 Get Apple certificate"></a>1.2 Get Apple certificate</h3><p>Log in to the Apple Developer Center: <a href="https://developer.apple.com" target="_blank" rel="noopener">https://developer.apple.com</a>, request and download the cer certificate, double-click the certificate to open it from the Keychain, select the certificate, choose “login” and “My Certificates”, right-click the certificate, export p12 certificate.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/12.png" alt="iOS Push Notification"></p>
<p>Click “Export” will pop up the following dialog box, set the certificate name and save path.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/13.png" alt="iOS Push Notification"></p>
<p>Click “Save”. When prompted for a password, set the certificate password.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/14.png" alt="iOS Push Notification"></p>
<h3 id="1-3-Import-Certificate-to-Jiguang"><a href="#1-3-Import-Certificate-to-Jiguang" class="headerlink" title="1.3 Import Certificate to Jiguang"></a>1.3 Import Certificate to Jiguang</h3><p>After successfully importing the certificate as shown below, it will show “verified”.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/15.png" alt="iOS Push Notification"></p>
<p>At this point, the Jiguang application has been created and the AppKey and Master Secret generated by the application can be used normally.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/16.png" alt="iOS Push Notification"></p>
<h2 id="2-Use-third-party-push-notification-in-the-Gizwits-cloud"><a href="#2-Use-third-party-push-notification-in-the-Gizwits-cloud" class="headerlink" title="2. Use third-party push notification in the Gizwits cloud"></a>2. Use third-party push notification in the Gizwits cloud</h2><h3 id="2-1-Request-to-use-D3-Engine"><a href="#2-1-Request-to-use-D3-Engine" class="headerlink" title="2.1 Request to use D3 Engine"></a>2.1 Request to use D3 Engine</h3><p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/17.png" alt="iOS Push Notification"></p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/18.png" alt="iOS Push Notification"></p>
<p>The use of D3 Engine requires the verification of Gizwits. After your request has been submitted, you need to contact the Gizwits FAE for assistant.</p>
<h3 id="2-2-Use-Jiguang-push-notification-in-Gizwits-cloud"><a href="#2-2-Use-Jiguang-push-notification-in-Gizwits-cloud" class="headerlink" title="2.2 Use Jiguang push notification in Gizwits cloud"></a>2.2 Use Jiguang push notification in Gizwits cloud</h3><p>After the verification passes, you can see the D3 Engine under the Services column, click “Configuration” -&gt; “Edit Push Notification Platform”.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/19.png" alt="iOS Push Notification"></p>
<p>Enter the App Key and Master Secret you got from Jiguang as the following figure and select the certificate type.</p>
<p>Note: When selecting “Development” for the certificate type, only in the development environment your App is able to receive notifications.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/20.png" alt="iOS Push Notification"></p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/21.png" alt="iOS Push Notification"></p>
<h3 id="2-3-Create-a-push-notification-rule-using-D3-Engine"><a href="#2-3-Create-a-push-notification-rule-using-D3-Engine" class="headerlink" title="2.3 Create a push notification rule using D3 Engine"></a>2.3 Create a push notification rule using D3 Engine</h3><p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/22.png" alt="iOS Push Notification"></p>
<p>Choose Project List -&gt; New Project. The following shows how to create a rule that will push a notification message to the App after your device comes online.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/23.png" alt="iOS Push Notification"></p>
<p>Drag the “Device Data” box to the right and double click it.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/24.png" alt="iOS Push Notification"></p>
<p>Set the trigger mode to “Device comes online” and click OK.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/25.png" alt="iOS Push Notification"></p>
<p>Double-click “Push for App” and set the notification content.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/26.png" alt="iOS Push Notification"></p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/27.png" alt="iOS Push Notification"></p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/28.png" alt="iOS Push Notification"></p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/29.png" alt="iOS Push Notification"></p>
<h2 id="3-Update-UIConfig-json"><a href="#3-Update-UIConfig-json" class="headerlink" title="3. Update UIConfig.json"></a>3. Update UIConfig.json</h2><p>Set jpush_app_key, and set push_type to 1, indicating that Jiguang push notification is selected. Then enter the values of app_id, app_secret, and product_key of the Gizwits application that is bound to Jiguang push notification.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/30.png" alt="iOS Push Notification"></p>
<h2 id="4-Configure-push-notification-in-XCode"><a href="#4-Configure-push-notification-in-XCode" class="headerlink" title="4. Configure push notification in XCode"></a>4. Configure push notification in XCode</h2><p>Open the project, select Targets -&gt; Capabilities, and turn on the Push Notifications button, which enables the project remote push functionality.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/31.png" alt="iOS Push Notification"></p>
<p>After the button is turned on, an .entitlements file is automatically generated, as shown below, where the value in the red box indicates the push environment. Development indicates the development environment, and distribution indicates the production environment. When the value is set to development, push notification only takes effect in the development environment. When it is distribution, push notification takes effect only in the production environment.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/32.png" alt="iOS Push Notification"></p>
<h2 id="5-Start-the-virtual-device"><a href="#5-Start-the-virtual-device" class="headerlink" title="5. Start the virtual device"></a>5. Start the virtual device</h2><p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/33.png" alt="iOS Push Notification"></p>
<h2 id="6-Run-the-App"><a href="#6-Run-the-App" class="headerlink" title="6. Run the App"></a>6. Run the App</h2><p>Through the above steps, the App is equipped with Jiguang push notification function. After being deployed to a mobile phone, register a user and login in, then bind the cloud virtual device by scanning its QR code.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/34.png" alt="iOS Push Notification"></p>
<h2 id="7-Test-push-notification"><a href="#7-Test-push-notification" class="headerlink" title="7. Test push notification"></a>7. Test push notification</h2><p>Restart the virtual device to see whether your phone receives a push message.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/35.png" alt="iOS Push Notification"></p>
<h2 id="8-Customize-the-push-notification-sound-of-Jiguang"><a href="#8-Customize-the-push-notification-sound-of-Jiguang" class="headerlink" title="8. Customize the push notification sound of Jiguang"></a>8. Customize the push notification sound of Jiguang</h2><p>The D3 Engine supports setting the push notification sound for each rule. Generally it needs to update two places.</p>
<h3 id="8-1-Configure-push-notification-sound"><a href="#8-1-Configure-push-notification-sound" class="headerlink" title="8.1 Configure push notification sound"></a>8.1 Configure push notification sound</h3><p>Open a push notification rule as follows:</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/36.png" alt="iOS Push Notification"></p>
<p>Select the push for App box (which is in red box above):</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/37.png" alt="iOS Push Notification"></p>
<p>Click “Show JSON sample”:</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/38.png" alt="iOS Push Notification"></p>
<p>The sample detail is as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;baidu&quot;: &#123;</span><br><span class="line">    &quot;aps&quot;: &#123;</span><br><span class="line">      &quot;badge&quot;: 0,</span><br><span class="line">      &quot;sound&quot;: &quot;default&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;notification_builder_id&quot;: 0,</span><br><span class="line">    &quot;notification_basic_style&quot;: 0</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;jiguang&quot;: &#123;</span><br><span class="line">    &quot;ios&quot;: &#123;</span><br><span class="line">      &quot;sound&quot;: &quot;sound.caf&quot;,</span><br><span class="line">      &quot;badge&quot;: 1</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;android&quot;: &#123;</span><br><span class="line">      &quot;builder_id&quot;: 0,</span><br><span class="line">      &quot;alert_type&quot;: 1,</span><br><span class="line">      &quot;style&quot;: 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Here we use Jiguang push notification. If the sound name is pushMusic.caf, the Advanced Parameter field need to be set in as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;jiguang&quot;: &#123;</span><br><span class="line">    &quot;ios&quot;: &#123;</span><br><span class="line">      &quot;sound&quot;: &quot;pushMusic.caf&quot;,</span><br><span class="line">      &quot;badge&quot;: 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>See below:</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/39.png" alt="iOS Push Notification"></p>
<p>Click “OK” to save and complete the settings.</p>
<p>Note: The “badge” parameter is for the content of App Badge. When it is set to 1, the App that receives push notifications displays 1. But in general, the App that receives multiple push notifications will automatically accumulate the Badge number. If “badge” parameter is set to 1, no matter how many notifications are pushed, the Badge number will always be 1.</p>
<p>If you want the App to accumulate the number of received messages, remove “badge”: 1. That means if it is not set, it will do the cumulative operation by default.</p>
<p>8.2 Import push notification sound file to project</p>
<p>After D3 Engine successfully configures the custom push notification sound, whenever a notification message is sent to the App, the system will first go to the App to find out whether there is a sound file with the relevant name. If there is, then the sound is played. If not, then play the default system sound.</p>
<p>The audio format of the push notification sound includes aiff, wav, and caf, and the playback time must be within 30 seconds. The file must also be placed in the mainBundle directory of the App. If any one of the above conditions is not met, the system will play the default notification sound instead.</p>
<p>Import an audio file to the project as follows:</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/40.png" alt="iOS Push Notification"></p>
<p>At this point, the configuration of push notification sound is completed. The App will play the audio after receiving a notification message.</p>
<h1 id="Quick-integration-with-Baidu-push-notification"><a href="#Quick-integration-with-Baidu-push-notification" class="headerlink" title="Quick integration with Baidu push notification"></a>Quick integration with Baidu push notification</h1><h2 id="1-Get-Baidu-API-KEY"><a href="#1-Get-Baidu-API-KEY" class="headerlink" title="1. Get Baidu API KEY"></a>1. Get Baidu API KEY</h2><h3 id="1-1-Create-a-Baidu-application"><a href="#1-1-Create-a-Baidu-application" class="headerlink" title="1.1 Create a Baidu application"></a>1.1 Create a Baidu application</h3><p>Go to Baidu cloud push notification platform: <a href="http://push.baidu.com" target="_blank" rel="noopener">http://push.baidu.com</a>, create an application and configure required certificates.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/41.png" alt="iOS Push Notification"></p>
<p>As shown above, you need to upload the development certificate and production certificate in the pem format.</p>
<h3 id="1-2-Get-Apple-Certification"><a href="#1-2-Get-Apple-Certification" class="headerlink" title="1.2 Get Apple Certification"></a>1.2 Get Apple Certification</h3><p>The process of applying for the cer certificate and its exporting is described in section 1.2 of “Quick integrated with Jiguang push notification”. The following figure shows how to export the pem certificate from the p12 certificate.</p>
<p>Open a Terminal and enter the following command to export the pem certificate.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -in &lt;p12 certificate name&gt; -out &lt;pem certificate name&gt; -nodes</span><br></pre></td></tr></table></figure>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/42.png" alt="iOS Push Notification"></p>
<h3 id="1-3-Import-certificate-to-Baidu-Push-notification"><a href="#1-3-Import-certificate-to-Baidu-Push-notification" class="headerlink" title="1.3 Import certificate to Baidu Push notification"></a>1.3 Import certificate to Baidu Push notification</h3><p>Upload the pem certificate to the figure in “1.1 Create a Baidu application”. After that, “Verified” will be displayed, and the API KEY and SECRET KEY of Baidu push notification will be generated.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/43.png" alt="iOS Push Notification"></p>
<h2 id="2-Use-third-party-authentication-in-Gizwits-cloud"><a href="#2-Use-third-party-authentication-in-Gizwits-cloud" class="headerlink" title="2. Use third-party authentication in Gizwits cloud"></a>2. Use third-party authentication in Gizwits cloud</h2><h3 id="2-1-Request-to-use-D3-Engine-1"><a href="#2-1-Request-to-use-D3-Engine-1" class="headerlink" title="2.1 Request to use D3 Engine"></a>2.1 Request to use D3 Engine</h3><p>For this step, refer to section 2.1 of Quick integration with Jiguang push notification.</p>
<h3 id="2-2-Use-Baidu-push-notification-in-Gizwits-IoT-Cloud"><a href="#2-2-Use-Baidu-push-notification-in-Gizwits-IoT-Cloud" class="headerlink" title="2.2 Use Baidu push notification in Gizwits IoT Cloud"></a>2.2 Use Baidu push notification in Gizwits IoT Cloud</h3><p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/44.png" alt="iOS Push Notification"></p>
<p>Type the API Key and Secret Key you obtained from Baidu as the following figure and select the certificate type.</p>
<p>Note: When selecting “Development” for the certificate type, only in the development environment your App is able to receive notifications.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/45.png" alt="iOS Push Notification"></p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/46.png" alt="iOS Push Notification"></p>
<h3 id="2-3-Create-a-push-notification-rule-using-D3-Engine-1"><a href="#2-3-Create-a-push-notification-rule-using-D3-Engine-1" class="headerlink" title="2.3 Create a push notification rule using D3 Engine"></a>2.3 Create a push notification rule using D3 Engine</h3><p>For this step, refer to section 2.3 of Quick integration with Jiguang push notification.</p>
<h2 id="3-Update-UIConfig-json-1"><a href="#3-Update-UIConfig-json-1" class="headerlink" title="3. Update UIConfig.json"></a>3. Update UIConfig.json</h2><p>Set bpush_app_key, and set push_type to 1, indicating that Baidu push notification is selected. Then enter the values of app_id, app_secret, and product_key of the Gizwits application that is bound to Baidu push notification.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/47.png" alt="iOS Push Notification"></p>
<p>Note: Configuration of XCode push notification is also required here. For details, see “4 Configure push notification in XCode “ in “Quick integration with Jiguang push notification”.</p>
<h2 id="4-Modify-the-App-launch-interface-for-Baidu-push-notification"><a href="#4-Modify-the-App-launch-interface-for-Baidu-push-notification" class="headerlink" title="4. Modify the App launch interface for Baidu push notification"></a>4. Modify the App launch interface for Baidu push notification</h2><p>The App launch interface for Baidu push notification has a pushMode parameter, there are two optional values BPushModeDevelopment and BPushModeProduction.</p>
<p>BPushModeDevelopment: Set Baidu push notification in development environment</p>
<p>When the environment set above matches the current running environment of the App, the push notification will take effect. </p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/48.png" alt="iOS Push Notification"></p>
<h2 id="5-Start-the-virtual-device-1"><a href="#5-Start-the-virtual-device-1" class="headerlink" title="5. Start the virtual device"></a>5. Start the virtual device</h2><p>This step can refer to section 5 of Quick integration with Jiguang push notification.</p>
<h2 id="6-Run-the-App-1"><a href="#6-Run-the-App-1" class="headerlink" title="6. Run the App"></a>6. Run the App</h2><p>Through the above steps, the App is equipped with Baidu push notification function. After being deployed to a mobile phone, register a user and login in, then bind the cloud virtual device by scanning its QR code. </p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/49.png" alt="iOS Push Notification"></p>
<h2 id="7-Test-push-notification-1"><a href="#7-Test-push-notification-1" class="headerlink" title="7. Test push notification"></a>7. Test push notification</h2><p>Restart the virtual device to see whether your phone receives a push message.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/50.png" alt="iOS Push Notification"></p>
<h2 id="8-Customize-the-push-notification-sound-of-Baidu"><a href="#8-Customize-the-push-notification-sound-of-Baidu" class="headerlink" title="8. Customize the push notification sound of Baidu"></a>8. Customize the push notification sound of Baidu</h2><h3 id="8-1-Configure-push-notification-sound-1"><a href="#8-1-Configure-push-notification-sound-1" class="headerlink" title="8.1 Configure push notification sound"></a>8.1 Configure push notification sound</h3><p>Go to the page of push notification sound configuration as follows. How to navigate to this page, please refer to the section “8.1 Configure push notification sound” of “Quick integration with Jiguang push notification”.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/51.png" alt="iOS Push Notification"></p>
<p>The sample detail is as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;baidu&quot;: &#123;</span><br><span class="line">    &quot;aps&quot;: &#123;</span><br><span class="line">      &quot;badge&quot;: 0,</span><br><span class="line">      &quot;sound&quot;: &quot;default&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;notification_builder_id&quot;: 0,</span><br><span class="line">    &quot;notification_basic_style&quot;: 0</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;jiguang&quot;: &#123;</span><br><span class="line">    &quot;ios&quot;: &#123;</span><br><span class="line">      &quot;sound&quot;: &quot;sound.caf&quot;,</span><br><span class="line">      &quot;badge&quot;: 1</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;android&quot;: &#123;</span><br><span class="line">      &quot;builder_id&quot;: 0,</span><br><span class="line">      &quot;alert_type&quot;: 1,</span><br><span class="line">      &quot;style&quot;: 1</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Here we use Baidu push notification. If the sound name is pushMusic.caf, the Advanced Parameter field need to be set in as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;baidu&quot;: &#123;</span><br><span class="line">    &quot;aps&quot;: &#123;</span><br><span class="line">      &quot;badge&quot;: 0,</span><br><span class="line">      &quot;sound&quot;: &quot;pushMusic.caf&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The setting is completed as follows:</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/52.png" alt="iOS Push Notification"></p>
<p>Click “OK” to save and complete the settings.</p>
<h3 id="8-2-Import-push-notification-sound-file-to-project"><a href="#8-2-Import-push-notification-sound-file-to-project" class="headerlink" title="8.2 Import push notification sound file to project"></a>8.2 Import push notification sound file to project</h3><p>Please refer to section “8.2 Import push notification sound file to project” of “Quick integration with Jiguang push notification”.</p>
<h1 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h1><h2 id="1-Need-I-request-to-use-D3-Engine-for-push-notification"><a href="#1-Need-I-request-to-use-D3-Engine-for-push-notification" class="headerlink" title="1. Need I request to use D3 Engine for push notification?"></a>1. Need I request to use D3 Engine for push notification?</h2><p>Answer: Yes, D3 Engine currently is intended for enterprise developers. Therefore, only enterprise developers can request to use it.</p>
<h2 id="2-I-completed-the-above-steps-using-Jiguang-push-notification-but-cannot-receive-the-expected-push-notification"><a href="#2-I-completed-the-above-steps-using-Jiguang-push-notification-but-cannot-receive-the-expected-push-notification" class="headerlink" title="2. I completed the above steps using Jiguang push notification, but cannot receive the expected push notification."></a>2. I completed the above steps using Jiguang push notification, but cannot receive the expected push notification.</h2><p>Answer:</p>
<p>Step 1: Check whether the XCode push notification switch is enabled. For details, see 2.4 Configure push notification in XCode.</p>
<p>Step 2: Check whether the key value of the project .entitlements file matches the current test environment. Distribution represents the production environment,Development represents the development environment.</p>
<p>Step 3: Determine if the Bundle ID of the project is the same as the Bundle ID of the certificate.</p>
<p>Note: If using Baidu push notification, you also need to check whether the pushMode value of the App launch interface is consistent with the current test environment. For details, see “4. Modify the App launch interface for Baidu push notification” in Quick integration with Baidu push notification.</p>
<p>If after the above three steps, it still cannot be pushed, you need to verify the problem on the push notification platform.</p>
<p>Step 4: Log in to the Jiguang/Baidu push notification platform, and test whether the push notification from the platform can reach the App.</p>
<p>For the case of being unable to push from the platform:</p>
<p>1) Check whether the certificate has expired. Consider replacing the certificate.</p>
<p>For the case of being able to push from the platform:</p>
<p>1) Confirm whether the push environment set on Gizwits D3 Engine is consistent with the current test environment, as shown in the “Certificate Type” below.</p>
<p>2) Confirm whether the push notification APPID and Secret bound to the Gizwits application match those used in the App, as shown below.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/53.png" alt="iOS Push Notification"></p>
<p>3) If it still fails, insert a breakpoint in the following figure. Then print the result value, and determine the specific error code. Diagnose and fix the issue according to the error code hints.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/54.png" alt="iOS Push Notification"></p>
<p>Usually result is wrong, it needs to confirm further from the code shown in the figure below.</p>
<p><img src="../../../assets/en-us/AppDev/AppFrame/ios/push/55.png" alt="iOS Push Notification"></p>
<h2 id="3-How-to-set-the-App-Badge-value-for-Jiguang-push-notification"><a href="#3-How-to-set-the-App-Badge-value-for-Jiguang-push-notification" class="headerlink" title="3. How to set the App Badge value for Jiguang push notification"></a>3. How to set the App Badge value for Jiguang push notification</h2><p>Answer: [JPUSHService setBadge:0];</p>

    </div>
    
    <div class="widget-wrapper">
  <span class="widget">
    <div>
        <a id="share" target="_blank" title="Share">
          <span>Share</span>
        </a>
        <div class="social-share" data-initialized="true">
            <a href="#" class="social-share-icon icon-wechat"></a>
            <a href="#" class="social-share-icon icon-weibo"></a>
            <a href="#" class="social-share-icon icon-qq"></a>
            <a href="#" class="social-share-icon icon-qzone"></a>
            <a href="#" class="social-share-icon icon-douban"></a>
        </div>
    </div>
    <a href="http://y0.cn/docs" target="_blank" title="Register">
      <span>Register</span>
    </a>
    <a href="https://github.com/gizwits-docs/gizwits-docs/issues" target="_blank" title="Feed back">
      <span>Feed back</span>
    </a>
    <a href="#" title="Top"><i class="fa fa-angle-up fa-2x" aria-hidden="true"></i></a>
  </span>
</div>
  </div>
</div>

    <div class="footer">
  <div class="container">
    <p>
      <span><a href="http://www.gizwits.com" target="_blank">HOME</a></span>
      <span><a href="http://www.gizwits.com/about-us" target="_blank">ABOUT</a></span>
      <span><a href="http://www.gizwits.com/about-us#contact-us" target="_blank">CONTACT</a></span>
      <span><a href="http://www.gizwits.com/join-us" target="_blank">JOIN</a></span>
    </p>
    <p>&#169;2011-2017; Gizwits IoT Technology Co., Ltd. 粤ICP备11090211号</p>
  </div>
</div>

    <script src="/js/spin.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.hashchange.min.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/scrollspy.js"></script>
<script src="/js/social-share.min.js"></script>
<script src="/js/documentation.js?v=d413cf8ceca4865c39c2dabcd3bc0077"></script>


<script type="text/javascript" src="http://webchat.7moor.com/javascripts/7moorInit.js?accessId=b01e0430-943a-11e6-8ad7-636675d9e71f&autoShow=true" async="async"></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3787e6b3b29a084fde41f22828d89b7d";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </body>
</html>