
<!DOCTYPE html>
<html lang="en-us">
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <title>Aggregation API Guide - Gizwits</title>

  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta name="Description" content="Aggregation API Guide-Gizwits">
  <meta name="keywords" content="Aggregation API Guide docs 文档中心 Gizwits">

  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">
  <script src="/js/redirect.js"></script>

  <link rel="stylesheet" href="/css/pure.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/documentation.css?v=db6111caa3d210b6cb1d2dac5119d7c5">
  <link rel="stylesheet" href="/css/share.min.css">
</head>
  <body>
    <div class="header">
  <div class="container pure-g">
    <span class="brand pure-u-5-24">
      <a href="http://www.gizwits.com" class="logo">
      
      <img src="/images/logo_en.png" alt="logo">
      
      </a>
      <a class="text" href="/">Docs</a>
    </span>

    <div class="mobile-header" v="">
      <span class="title">Gizwits Docs</span>
      <i class="fa fa-caret-square-o-down fa-lg" aria-hidden="true"></i>
    </div>

    <span class="menu pure-u-16-24">
      <span class="header-search-btn" id="header-search-btn">
        <i class="fa fa-search"></i>
      </span>
      <ul class="levelA-wrapper">
        
          
            <li class="levelA"><a href="/en-us/overview/overview.html">Overview</a></li>
          
        
          
            <li class="levelA">
              Quick Start &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/quickstart/GizwitsQuickStart.html">Gizwits Quick Start within 5 mins</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/quickstart/glossary.html">Glossary</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              App Dev Guide &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppDevGetStarted.html">Get Started with APP Development</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppCodeAutoGenerator.html">App code auto-generator</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      APP Frame Guide &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSPushNotification.html">iOS Push Notification</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSAuthReSkin.html">iOS Auth Re Skin</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/iosframe.html">Quick start of iOS App development</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/androidframe.html">Android frame</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidPushNotification.html">Android Push Notification</a></li>
                        
                          <li class="levelC"><a href="/en-us/quickstart/AndroidAppFrame.html">Quick start of Android App development</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/APICloudFrame.html">API Cloud Frame</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/VideoTutorial.html">Video tutorial of the App open source framework</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      App SDK Guide &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSSDKA2.html">iOS SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidSDKA2.html">Android SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/APICloudWifiSDK.html">APICloud SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/SDKTransparentTransmission.html">Data transparent transmission of SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/SDKLogCapture.html">SDK debug log capture</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/sdk_error.html">SDK error codes</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/WechatDev/WeChatDev.html">WeChat SDK Guide</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/WechatDev/WechatDevIntro.html">WeChat Dev Intro</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      More Guide &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/cloud/SharingSDK.html">Gizwits Device Sharing</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/third-party.html">Application process for third-party authentication</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppDevFAQ.html">App Dev FAQ</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              DeviceDev &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/DeviceDev/DeviceDevIntro.html">Get started with device connection</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      Gizwits Cloud access &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/quickstart/UseMCU.html">MCU scheme</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/UseSOC.html">ESP8266-SoC scheme</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/module_source/module_source.html">Module Documents</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      GAgent Documents &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/gagent_info.html">Detailed annotation of GAgent</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/DebugTool.html">Firmware downloading on modules</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/HF-LPB100.html">HF-LPB100</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/HF-LPT120.html">HF-LPT120</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/MXCHIP.html">MXCHIP</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/ESP8266.html">ESP8266</a></li>
                        
                      </ul>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              Cloud API &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/cloud/OpenAPI.html">Open API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/ent_dev.html">Enterprise Application Development</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/enterprise_api.html">Enterprise API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/NotificationAPI.html">Notification API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/WebsocketAPI.html">WebsocketAPI</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      API Tutorial &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseOpenAPI.html">Using Open API to control virtual device with Postman</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseSNoti.html">Real-time data synchronization demo for SNoti service</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseWebsocket.html">Control device using WebSocket</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/DataAPI.html">Aggregation API Guide</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/LinkageAPI.html">Device Linkage API Tutorial</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/devgroup_API.html">Device Grouping API Tutorial</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseQRCode.html">Generating device QR code for App binding</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/CloudFAQ.html">Cloud FAQ</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              User Manual &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/UserManual/ST_IoT.html">Gizwits and ST Make IoT Development Easy</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/DeviceDev/ST/ICUBEGIZWITS.html">Getting Started with I-CUBE-GiZWITS</a></li>
                  
                
              </ul>
            </li>
          
        
      </ul>
    </span>

    <span class="pure-u-3-24 lang-switch-wrapper">

      <i class="fa fa-globe" aria-hidden="true"></i>
      
      <a href="/zh-cn/overview/overview.html" class="lang-switch" data-lang="zh-cn">中文</a>
      
    </span>
  </div>

  <div class="header-search-panel" id="header-search-panel">
    <span class="header-search-close" id="header-search-close"><i class="fa fa-times" aria-hidden="true"></i></span>
    <div class="header-search-input-wrap" id="header-search-input-wrap">
      <input type="text" class="header-search-input" id="header-search-input" placeholder="请输入关键字">
      <span class="header-search-input-icon"><i class="fa fa-search"></i></span>
    </div>

    <div class="header-search-trend" id="header-search-trend">
      <div class="header-search-trend-title">热搜词</div>
      <div class="header-search-trend-items clearfix">
        
        <div class="header-search-trend-item" data-word="APP">APP</div>
        
        <div class="header-search-trend-item" data-word="SDK">SDK</div>
        
        <div class="header-search-trend-item" data-word="Android">Android</div>
        
        <div class="header-search-trend-item" data-word="ios">ios</div>
        
        <div class="header-search-trend-item" data-word="WIFI">WIFI</div>
        
      </div>
    </div>

    <div class="header-search-result hidden" id="header-search-result">
      <div class="header-search-result-head">
        搜索结果 &gt; <span id="header-search-keyword"></span>
      </div>
      <div class="header-search-result-items" id="header-search-result-items">
      </div>
    </div>
  </div>
</div>

    <div class="body">

  <div class="container clearfix">
    <div class="navigation">
      <div class="navigation-inner">
        <div class="nav-title">Content</div>
        <div class="nav"></div>
      </div>
    </div>
    <div class="markdown-body" data-spy="scroll" data-target=".navigation">
      <div class="heading">
        <div class="title">Aggregation API Guide</div>
        <a class="edit-link" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> Edit</a>
      </div>
      <h1 id="1-Overview"><a href="#1-Overview" class="headerlink" title="1. Overview"></a>1. Overview</h1><p>Aggregation API can aggregate the numeric data point data reported by devices, which supports to calculate the sum/average/maximum/minimum values of data point data for the intervals in hours/days/weeks/months. You can get aggregated data for multiple data points at a time.</p>
<p>To use this API, you must first initiate the access request. Only after the request is approved, the data reported will be aggregated.</p>
<p>For example, for the water consumption data point of a smart water meter, Aggregation API can be used to get the water consumption statistics per household per month, per week, and per day, so that monthly, weekly, and daily reports are available.</p>
<h1 id="2-Walkthrough-for-Advanced-Data-API-of-OpenAPI"><a href="#2-Walkthrough-for-Advanced-Data-API-of-OpenAPI" class="headerlink" title="2. Walkthrough for Advanced Data API of OpenAPI"></a>2. Walkthrough for Advanced Data API of OpenAPI</h1><p>The Advanced Data API of OpenAPI is used to obtain device aggregation data.</p>
<p>After you have been granted the permission to use the aggregation API of OpenAPI, you can perform aggregation analysis of the numeric data point data reported by devices including calculating the sum/average/maximum/minimum values of data point data for the intervals in hours/days/weeks/months.</p>
<h2 id="2-1-Create-a-User"><a href="#2-1-Create-a-User" class="headerlink" title="2.1. Create a User"></a>2.1. Create a User</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_users" target="_blank" rel="noopener">http://swagger.gizwits.com/doc/index/openapi_apps#/用户管理/post_app_users</a></p>
<p>The following figure shows how to.</p>
<p><img src="../../../assets/en-us/UserManual/DataAPI/11.png" alt="Create a User"></p>
<h2 id="2-2-Anonymous-user-login"><a href="#2-2-Anonymous-user-login" class="headerlink" title="2.2. Anonymous user login"></a>2.2. Anonymous user login</h2><p>The API for anonymous user login is the same as creating an anonymous login user.</p>
<h2 id="2-3-Bind-device"><a href="#2-3-Bind-device" class="headerlink" title="2.3. Bind device"></a>2.3. Bind device</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/post_app_bind_mac" target="_blank" rel="noopener">http://swagger.gizwits.com/doc/index/openapi_apps#/绑定管理/post_app_bind_mac</a></p>
<p><img src="../../../assets/en-us/UserManual/DataAPI/12.png" alt="Bind device"></p>
<h2 id="2-4-Report-device-data"><a href="#2-4-Report-device-data" class="headerlink" title="2.4. Report device data"></a>2.4. Report device data</h2><p>Use the xpg tool provided by Gizwits to simulate a MCU reporting the current device data.</p>
<p>The usage of xpg is as follows:</p>
<p><a href="http://docs.gizwits.com/en-us/deviceDev/串口工具使用文档.html" target="_blank" rel="noopener">http://docs.gizwits.com/en-us/deviceDev/串口工具使用文档.html</a></p>
<p><img src="../../../assets/en-us/UserManual/DataAPI/13.png" alt="Report device data"></p>
<h2 id="2-5-Data-aggregation-query"><a href="#2-5-Data-aggregation-query" class="headerlink" title="2.5. Data aggregation query"></a>2.5. Data aggregation query</h2><p><a href="http://swagger.gizwits.com/doc/index/openapi_apps#/高级数据接口" target="_blank" rel="noopener">http://swagger.gizwits.com/doc/index/openapi_apps#/高级数据接口</a></p>
<p><img src="../../../assets/en-us/UserManual/DataAPI/14.png" alt="Data aggregation query"></p>
<p>Query result:</p>
<p><img src="../../../assets/en-us/UserManual/DataAPI/15.png" alt="Query result"></p>
<h1 id="3-Walkthrough-for-device-data-aggregation-API-of-Enterprise-API"><a href="#3-Walkthrough-for-device-data-aggregation-API-of-Enterprise-API" class="headerlink" title="3. Walkthrough for device data aggregation API of Enterprise API"></a>3. Walkthrough for device data aggregation API of Enterprise API</h1><p>The device data aggregation API only performs data aggregation query on a single device, which provides the aggregation operation for a Wi-Fi device numeric data point data in a certain period of time, including sum, average, maximum, and minimum.</p>
<p>Note: Before using Enterprise API, you must first contact Gizwits technical support to apply for the Enterprise API access and set the whitelist on the API configuration page. </p>
<h2 id="3-1-Enterprise-API-access-request"><a href="#3-1-Enterprise-API-access-request" class="headerlink" title="3.1. Enterprise API access request"></a>3.1. Enterprise API access request</h2><p>Apply for Enterprise API access:</p>
<p><a href="http://docs.gizwits.com/en-us/Cloud/ent_dev.html" target="_blank" rel="noopener">http://docs.gizwits.com/en-us/Cloud/ent_dev.html</a></p>
<h2 id="3-2-Set-IP-whitelist"><a href="#3-2-Set-IP-whitelist" class="headerlink" title="3.2. Set IP whitelist"></a>3.2. Set IP whitelist</h2><p><img src="../../../assets/en-us/UserManual/DataAPI/16.png" alt="Set IP whitelist"></p>
<p>The external IP of your current server is needed.</p>
<p><img src="../../../assets/en-us/UserManual/DataAPI/17.png" alt="Set IP whitelist"></p>
<h2 id="3-3-Apply-for-aggregation-API-access"><a href="#3-3-Apply-for-aggregation-API-access" class="headerlink" title="3.3. Apply for aggregation API access"></a>3.3. Apply for aggregation API access</h2><p>Contact the Gizwits technical personnel and apply for permission to use the device data aggregation API of Enterprise API.</p>
<h2 id="3-4-Get-a-token"><a href="#3-4-Get-a-token" class="headerlink" title="3.4. Get a token"></a>3.4. Get a token</h2><p>Request URL:</p>
<p><a href="http://enterpriseapi.gizwits.com/v1/products/447c947fff3245a18dfc709371c34e69/access_token" target="_blank" rel="noopener">http://enterpriseapi.gizwits.com/v1/products/447c947fff3245a18dfc709371c34e69/access_token</a></p>
<p>Body parameters:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;enterprise_id&quot;: &quot;string&quot;,</span><br><span class="line">&quot;enterprise_secret&quot;: &quot; string &quot;,</span><br><span class="line">&quot;product_secret&quot;: &quot; string &quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="../../../assets/en-us/UserManual/DataAPI/18.png" alt="Get a token"></p>
<p>Note: It is not possible to request directly on the swagger because the IP of the swagger service is not in your IP whitelist. If you haven’t set up a backend server yet, you can use the chrome browser plugin postman to make the request.</p>
<h2 id="3-5-Report-the-device-state"><a href="#3-5-Report-the-device-state" class="headerlink" title="3.5. Report the device state"></a>3.5. Report the device state</h2><p><img src="../../../assets/en-us/UserManual/DataAPI/19.png" alt="Report the device state"></p>
<h2 id="3-6-Invoke-data-aggregation-API-for-a-single-device"><a href="#3-6-Invoke-data-aggregation-API-for-a-single-device" class="headerlink" title="3.6. Invoke data aggregation API for a single device"></a>3.6. Invoke data aggregation API for a single device</h2><p>Request URL:</p>
<p><a href="http://enterpriseapi.gizwits.com/v1/products/cdfb1e7f2d31474ca10396de88491372/devices/Zb248887fhMVZ2V2Jhz2xfq/agg_data?start_ts=1485151200000&amp;end_ts=1485153000000&amp;attrs=t1%2Ct2%2Ct3%2Ct4&amp;aggregator=avg&amp;unit=HOURS" target="_blank" rel="noopener">http://enterpriseapi.gizwits.com/v1/products/cdfb1e7f2d31474ca10396de88491372/devices/Zb248887fhMVZ2V2Jhz2xfq/agg_data?start_ts=1485151200000&amp;end_ts=1485153000000&amp;attrs=t1%2Ct2%2Ct3%2Ct4&amp;aggregator=avg&amp;unit=HOURS</a></p>
<p>The parameter values of the URL are:</p>
<ul>
<li>product_key</li>
<li>did</li>
<li>start_ts</li>
<li>end_ts</li>
<li>attrs</li>
<li>aggregator</li>
<li>unit</li>
</ul>
<p>Header parameters:</p>
<ul>
<li>Authorize token “enter token here”</li>
<li>Content-Type application/json</li>
</ul>
<p><img src="../../../assets/en-us/UserManual/DataAPI/20.png" alt="Invoke data aggregation API for a single device"></p>
<h1 id="4-Other-support"><a href="#4-Other-support" class="headerlink" title="4. Other support"></a>4. Other support</h1><p>Device data aggregation API is for enterprise developers. If you want to apply, please contact us through the official website.</p>
<p>Website address: <a href="http://www.gizwits.com/about-us" target="_blank" rel="noopener">http://www.gizwits.com/about-us</a></p>
<p>Gizwits official QR code:</p>
<p><img src="../../../assets/en-us/UserManual/DataAPI/21.png" alt="Gizwits official QR code"></p>

    </div>
    
    <div class="widget-wrapper">
  <span class="widget">
    <div>
        <a id="share" target="_blank" title="Share">
          <span>Share</span>
        </a>
        <div class="social-share" data-initialized="true">
            <a href="#" class="social-share-icon icon-wechat"></a>
            <a href="#" class="social-share-icon icon-weibo"></a>
            <a href="#" class="social-share-icon icon-qq"></a>
            <a href="#" class="social-share-icon icon-qzone"></a>
            <a href="#" class="social-share-icon icon-douban"></a>
        </div>
    </div>
    <a href="http://y0.cn/docs" target="_blank" title="Register">
      <span>Register</span>
    </a>
    <a href="https://github.com/gizwits-docs/gizwits-docs/issues" target="_blank" title="Feed back">
      <span>Feed back</span>
    </a>
    <a href="#" title="Top"><i class="fa fa-angle-up fa-2x" aria-hidden="true"></i></a>
  </span>
</div>
  </div>
</div>

    <div class="footer">
  <div class="container">
    <p>
      <span><a href="http://www.gizwits.com" target="_blank">HOME</a></span>
      <span><a href="http://www.gizwits.com/about-us" target="_blank">ABOUT</a></span>
      <span><a href="http://www.gizwits.com/about-us#contact-us" target="_blank">CONTACT</a></span>
      <span><a href="http://www.gizwits.com/join-us" target="_blank">JOIN</a></span>
    </p>
    <p>&#169;2011-2017; Gizwits IoT Technology Co., Ltd. 粤ICP备11090211号</p>
  </div>
</div>

    <script src="/js/spin.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.hashchange.min.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/scrollspy.js"></script>
<script src="/js/social-share.min.js"></script>
<script src="/js/documentation.js?v=d413cf8ceca4865c39c2dabcd3bc0077"></script>


<script type="text/javascript" src="http://webchat.7moor.com/javascripts/7moorInit.js?accessId=b01e0430-943a-11e6-8ad7-636675d9e71f&autoShow=true" async="async"></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3787e6b3b29a084fde41f22828d89b7d";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </body>
</html>