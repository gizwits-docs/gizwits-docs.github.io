
<!DOCTYPE html>
<html lang="en-us">
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <title>SNoti API - Gizwits</title>

  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta name="Description" content="SNoti API-Gizwits">
  <meta name="keywords" content="SNoti API docs 文档中心 Gizwits">

  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">
  <script src="/js/redirect.js"></script>

  <link rel="stylesheet" href="/css/pure.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/documentation.css?v=db6111caa3d210b6cb1d2dac5119d7c5">
  <link rel="stylesheet" href="/css/share.min.css">
</head>
  <body>
    <div class="header">
  <div class="container pure-g">
    <span class="brand pure-u-5-24">
      <a href="http://www.gizwits.com" class="logo">
      
      <img src="/images/logo_en.png" alt="logo">
      
      </a>
      <a class="text" href="/">Docs</a>
    </span>

    <div class="mobile-header" v>
      <span class="title">Gizwits Docs</span>
      <i class="fa fa-caret-square-o-down fa-lg" aria-hidden="true"></i>
    </div>

    <span class="menu pure-u-16-24">
      <span class="header-search-btn" id="header-search-btn">
        <i class="fa fa-search"></i>
      </span>
      <ul class="levelA-wrapper">
        
          
            <li class="levelA"><a href="/en-us/overview/overview.html">Overview</a></li>
          
        
          
            <li class="levelA">
              Quick Start &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/quickstart/GizwitsQuickStart.html">Gizwits Quick Start within 5 mins</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/quickstart/glossary.html">Glossary</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              App Dev Guide &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppDevGetStarted.html">Get Started with APP Development</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppCodeAutoGenerator.html">Gizwits App Code Auto-Generator</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      APP Frame Guide &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSFramework.html">Gizwits App Framework for iOS</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSPushNotification.html">iOS Push Notification</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSAuthReSkin.html">iOS Authentication and Re-Skin</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSDevQuickStart.html">iOS APP Development Instruction</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidFramework.html">Gizwits App Framework for Android</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidPushNotification.html">Android Push Notification</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidAuthReSkin.html">Android Authentication and Re-Skin</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidDevQuickStart.html">Android APP Development Instruction</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/APICloudFramework.html">Gizwits App Framework for APICloud</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/VideoTutorials.html">How-to videos on Gizwits App Framework</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      App SDK Guide &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidSDKA2.html">Gizwits App SDK for Android</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSSDKA2.html">Gizwits App SDK for iOS</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/APICloudSDK.html">Gizwits App SDK for APICloud</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/TransparentTransmission.html">Data Transparent Transmission</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/SDKLogCapture.html">SDK Debug Log Capture</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/SDKErrorCodes.html">SDK Error Codes</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/WeChatDev.html">WeChat SDK Guide</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/WechatDevIntro.html">WeChat Dev Intro</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      More Guides &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/AppDev/DeviceSharing.html">Gizwits Device Sharing</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/ThirdpartyAuth.html">Set Up Third-party Authentication</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppDevFAQ.html">App Dev FAQ</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              DeviceDev &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/DeviceDev/DeviceDevGetStarted.html">Get Started with Device Development</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      Device Connection &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/MCUScheme.html">Standalone MCU Scheme</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/SoCScheme.html">SoC Scheme</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/DeviceDev/ModuleResources.html">Module Resources</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      GAgent Guides &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/GAgent.html">GAgent</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/Debug/DebugTool.html">Gizwits Serial Port Debugger</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/Debug/HF-LPB100.html">HF-LPB100</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/Debug/HF-LPT120.html">HF-LPT120</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/Debug/MXCHIP.html">MXCHIP</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/Debug/ESP8266.html">ESP8266</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/Debug/G510.html">G510</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/Debug/DebugLog.html">Debug Log Capture</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      Gizwits MCU Code Auto-generator &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/MCUCodeAutoGenerator.html">Gizwits MCU Code Auto-generator</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/PortingCommonPlatform.html">Porting Common Platform Edition of MCU SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/PortingUsingSTM32CubeMX.html">Porting Using STM32CubeMX</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/TailoringMCUCode.html">Tailoring MCU SDK to Resource-Limited Platform</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      GoKits &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/GoKit/Gokit3Intro.html">GoKit 3.X Instruction</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/GoKit/Gokit3Manual.html">GoKit 3.X Hardware Manual</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/GoKit/Gokit3SGetStarted.html">Gokit3(S) Development</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/GoKit/Gokit3SIntro.html">Gokit3(S) Instruction</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/GoKit/SetupGokit3SDevEnv.html">GoKit3(S) Dev Environment</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/GoKit/GokitSoCProgram.html">GoKit-SoC Program Exprience</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/GoKit/GokitMCUProgram.html">GoKit-MCU Program Experience</a></li>
                        
                      </ul>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              Cloud API &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/cloud/OpenAPI.html">Open API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/ent_dev.html">Enterprise Application Development</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/enterprise_api.html">Enterprise API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/NotificationAPI.html">SNoti API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/WebsocketAPI.html">WebsocketAPI</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      API Tutorial &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseOpenAPI.html">Using Open API to control virtual device with Postman</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseSNoti.html">Real-time data synchronization demo for SNoti service</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseWebsocket.html">Control device using WebSocket</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/DataAPI.html">Aggregation API Guide</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/LinkageAPI.html">Device Linkage API Tutorial</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/devgroup_API.html">Device Grouping API Tutorial</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseQRCode.html">Generating device QR code for App binding</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/CloudFAQ.html">Cloud FAQ</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              User Manual &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/UserManual/ST_IoT.html">Gizwits and ST Make IoT Development Easy</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/DeviceDev/ST/ICUBEGIZWITS.html">Getting Started with I-CUBE-GiZWITS</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/UserManual/PromoteProduct.html">Promote personal type product to enterprise type product</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      OTA &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/UserManual/GAgentOTA.html">GAgent OTA</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/MCUOTA.html">MCU OTA</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/DeviceDev/EolTest.html">End-of-line test</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/UserManual/D3.html">Gizwits D3 Engine</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/UserManual/ECE.html">Gizwits ECE fog computing</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      Voice control with smart speakers &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/UserManual/EchoIntegration.html">Integration with Amazon Echo</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/UseEcho.html">Control Gokit using Amazon Echo</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseGoogleHome.html">Control Gokit using Google Home</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/UserManual/DataAnalytics.html">Gizwits Real-time Big Data Analytics</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/UserManual/GlobalDeployment.html">Global Network of Gizwits</a></li>
                  
                
              </ul>
            </li>
          
        
      </ul>
    </span>

    <span class="pure-u-3-24 lang-switch-wrapper">

      <i class="fa fa-globe" aria-hidden="true"></i>
      
      <a href="/zh-cn/overview/overview.html" class="lang-switch" data-lang="zh-cn">中文</a>
      
    </span>
  </div>

  <div class="header-search-panel" id="header-search-panel">
    <span class="header-search-close" id="header-search-close"><i class="fa fa-times" aria-hidden="true"></i></span>
    <div class="header-search-input-wrap" id="header-search-input-wrap">
      <input type="text" class="header-search-input" id="header-search-input" placeholder="请输入关键字">
      <span class="header-search-input-icon"><i class="fa fa-search"></i></span>
    </div>

    <div class="header-search-trend" id="header-search-trend">
      <div class="header-search-trend-title">热搜词</div>
      <div class="header-search-trend-items clearfix">
        
        <div class="header-search-trend-item" data-word="APP">APP</div>
        
        <div class="header-search-trend-item" data-word="SDK">SDK</div>
        
        <div class="header-search-trend-item" data-word="Android">Android</div>
        
        <div class="header-search-trend-item" data-word="ios">ios</div>
        
        <div class="header-search-trend-item" data-word="WIFI">WIFI</div>
        
      </div>
    </div>

    <div class="header-search-result hidden" id="header-search-result">
      <div class="header-search-result-head">
        搜索结果 &gt; <span id="header-search-keyword"></span>
      </div>
      <div class="header-search-result-items" id="header-search-result-items">
      </div>
    </div>
  </div>
</div>

    <div class="body">

  <div class="container clearfix">
    <div class="navigation">
      <div class="navigation-inner">
        <div class="nav-title">Content</div>
        <div class="nav"></div>
      </div>
    </div>
    <div class="markdown-body" data-spy="scroll" data-target=".navigation">
      <div class="heading">
        <div class="title">SNoti API</div>
        <a class="edit-link" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> Edit</a>
      </div>
      <p>v2.1.9</p>
<h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>Enterprise users can ingest data from globally dispersed devices in real time through the secure data transmission channel provided by SNoti, which can be used to classify and organize device information, device status statistics, and device monitoring. SNoti enables you to send business instructions to control devices online in real time by remote control functions.</p>
<h1 id="Client-Samples-Open-Source-Community-Edition"><a href="#Client-Samples-Open-Source-Community-Edition" class="headerlink" title="Client Samples (Open Source Community Edition)"></a>Client Samples (Open Source Community Edition)</h1><p>The user can choose any version of the following language-specific clients as appropriate for secondary development, or as a reference based on this.</p>
<ol>
<li><p>Client sample for Java</p>
<ul>
<li>Code repository: <a href="https://github.com/Bestfeel/noti-netty-client" target="_blank" rel="noopener">https://github.com/Bestfeel/noti-netty-client</a></li>
</ul>
</li>
<li><p>Client sample for Ruby</p>
<ul>
<li>Code repository: <a href="https://github.com/AbelLai/gizwits_sac_rb" target="_blank" rel="noopener">https://github.com/AbelLai/gizwits_sac_rb</a></li>
</ul>
</li>
<li><p>Client sample for Python</p>
<ul>
<li>Code repository: <a href="https://github.com/wangzhenandy/snoti_client_python" target="_blank" rel="noopener">https://github.com/wangzhenandy/snoti_client_python</a></li>
</ul>
</li>
<li><p>Client demo for Java (Basic Edition)</p>
<ul>
<li>Code repository: <a href="https://github.com/gizwits/noti-java-demo/tree/v2.0.0" target="_blank" rel="noopener">https://github.com/gizwits/noti-java-demo/tree/v2.0.0</a></li>
</ul>
</li>
<li><p>Client demo for Java (Netty Framework Edition)</p>
<ul>
<li>Code repository: <a href="https://github.com/gizwits/noti-java-demo/tree/v2.0.0-netty" target="_blank" rel="noopener">https://github.com/gizwits/noti-java-demo/tree/v2.0.0-netty</a></li>
</ul>
</li>
</ol>
<h1 id="Request-to-access-SNoti-service"><a href="#Request-to-access-SNoti-service" class="headerlink" title="Request to access SNoti service"></a>Request to access SNoti service</h1><ol>
<li><p>The enterprise developer signs in to the developer center and chooses “Add service”, as shown below</p>
<p> <img src="../../../assets/en-us/cloud/添加SNoti服务.png" alt="Add service"></p>
</li>
<li><p>Click “SNoti service” pointed by the arrow in the figure above to go to the next step and request to access the service</p>
<p> <img src="../../../assets/en-us/cloud/开通SNoti服务.png" alt="SNoti service"></p>
</li>
<li><p>After successfully adding the SNoti service, click “Create credentials on the service page. The auth_id has permission to obtain all device messages and control devices under the product.</p>
<p> <img src="../../../assets/en-us/cloud/添加api.png" alt="Create credentials"></p>
</li>
</ol>
<h1 id="Terms"><a href="#Terms" class="headerlink" title="Terms"></a>Terms</h1><ol>
<li>auth_id &amp; auth_secret: Product authentication ID and secret. A product can have multiple auth_id. One auth_id corresponds to a unique product. When the SNoti client logs in, it verifies the validity of auth_id and auth_secret.</li>
<li>subkey: using message distribution mechanism, with ProductKey + subkey as the only primary key, messages among different primary keys do not affect each other (ie, the same ProductKey uses a different subkey, can generate a message copy); subkey (subscription key) is a custom character string, case sensitive, 1 to 32 characters in length, which can contain numbers, letters, and underscores (ie [a-zA-Z0-9]);</li>
<li>The 12 message types (event_type) of the product are:<ul>
<li>device.online: device comes online </li>
<li>device.offline: device goes offline</li>
<li>device.status.raw: device reports a custom transparent transmission business instruction</li>
<li>device.status.kv: device reports business instructions of data point type</li>
<li>device.attr_fault: device fault events</li>
<li>device.attr_alert: device alarm events</li>
<li>datapoints.changed: data point change events</li>
<li>center_control.sub_device_added: central controller adds child devices</li>
<li>center_control.sub_device_deleted: central controller deletes child devices</li>
<li>device.bind: device binding messages</li>
<li>device.unbind: device unbinding messages</li>
<li>device.reset: device reset messages</li>
<li>device.file.download: device file download messages</li>
</ul>
</li>
</ol>
<h1 id="Workflow"><a href="#Workflow" class="headerlink" title="Workflow"></a>Workflow</h1><p>Events are pushed through SSL protocol. The communication process is as follows:</p>
<ol>
<li>The client establishes an SSL connection with this API (Gizwits Platform). The client does not need to provide a certificate, just trust the server certificate;</li>
<li>The client sends a login instruction to complete the verification;</li>
<li>The server pushes messages to the client in several ways as following:<ul>
<li>Multiple client login connections with the same product_key + subkey, messages are pushed to each client in turn; </li>
<li>Clients with the same product_key but different subkeys can receive copies of the specified message type from devices under the product. Clients do not interfere with each other.</li>
<li>When the number of ack messages that the client has not sent out reaches the prefetch_count value of the client’s login settings, messages will not be pushed to the client but will be sent to other clients.</li>
<li>For those messages without returned ack messages, the server will stop resending and wait. Only if the client is disconnected, they will be resent to connected clients.</li>
<li>After all clients are disconnected, subsequent device messages are retained on the server and wait for the clients to receive them next time.</li>
</ul>
</li>
<li>Clients receive event messages in real time and sends ack messages to the server.</li>
<li>When the client does not send any message to the server within a certain time range, it needs to send a ping heartbeat request and the server responds to the pong heartbeat response.</li>
<li>The client can send remote control instructions to control the device. The SNoti service caches the M2M information corresponding to each product_key when the client logs in, which is used to send control instructions to the device. Note that when the product is officially released, it is necessary to restart SNoti clients to update the M2M information.</li>
</ol>
<h1 id="API-Specification"><a href="#API-Specification" class="headerlink" title="API Specification"></a>API Specification</h1><ul>
<li>Domain name: snoti.gizwits.com</li>
<li>SSL service Port: 2017</li>
</ul>
<p>The message payload is binary data, UTF-8 encoded. Please note that “\n” must be added as a message suffix after each message.</p>
<h2 id="1-Connection-and-login"><a href="#1-Connection-and-login" class="headerlink" title="1. Connection and login"></a>1. Connection and login</h2><p>After the client establishes an SSL connection with the Gizwits platform, the client sends the following string for authentication (login to the Gizwits platform):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;login_req&quot;,</span><br><span class="line">&quot;prefetch_count&quot;:&lt;uint&gt; (0 &lt; prefetch_count &lt;= 32767, indicates the maximum number of messages without ACKs. The default value is 50.)</span><br><span class="line">&quot;data&quot;: [&#123;</span><br><span class="line">“product_key&quot;: &lt;key string&gt;,</span><br><span class="line">&quot;auth_id&quot;: &lt;auth_id string&gt;,</span><br><span class="line">&quot;auth_secret&quot;: &lt;auth_secret string&gt;,</span><br><span class="line">&quot;subkey&quot;: &lt;subkey string&gt;,</span><br><span class="line">&quot;events&quot;:[&lt;event string&gt;,...] (One or more events)</span><br><span class="line">&#125;,...] (One or more products)</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<p>Request parameters:</p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cmd</td>
<td>Yes</td>
<td>Login type, must be login_req</td>
</tr>
<tr>
<td>prefetch_count</td>
<td>No</td>
<td>The default value is 50</td>
</tr>
<tr>
<td>data.product_key</td>
<td>Yes</td>
<td>Product ID</td>
</tr>
<tr>
<td>data.auth_id</td>
<td>Yes</td>
<td>Product authentication ID</td>
</tr>
<tr>
<td>data.auth_secret</td>
<td>Yes</td>
<td>Product authentication secret</td>
</tr>
<tr>
<td>data.subkey</td>
<td>Yes</td>
<td>Subscription key, a custom identifier for the client. It is case-sensitive with a length of 1 to 32 characters. It can contain numbers, letters, and underscores.</td>
</tr>
<tr>
<td>data.events</td>
<td>Yes</td>
<td>The message types received by clients, using a comma-separated list of strings, currently supporting device.attr_fault;device.attr_alert;device.online;device.offline device.status.raw;device.status.kv;datapoints.changed center_control .sub_device_added;center_control.sub_device_deleted device.bind;device.unbind;device.reset;device.file.download</td>
</tr>
</tbody>
</table>
<p>Response from Gizwits platform：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;login_res&quot;,</span><br><span class="line">&quot;data&quot;: &#123;</span><br><span class="line">&quot;result&quot;: true | false,</span><br><span class="line">&quot;msg&quot;: &quot;ok&quot; | &lt;error msg&gt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<p>If result is false, the login failed and the connection will be closed.</p>
<h2 id="2-Heartbeat"><a href="#2-Heartbeat" class="headerlink" title="2. Heartbeat"></a>2. Heartbeat</h2><p>After an SSL connection is established between the client and the Gizwits platform, it is necessary to periodically send data to the Gizwits platform to maintain the validity of the connection. If no data is sent to the Gizwits platform within 5 minutes, the following heartbeat data should be sent to the Gizwits platform:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;ping&quot;</span><br><span class="line">&#125;\n</span><br><span class="line">Response from Gizwits platform：</span><br><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;pong&quot;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<p>If you do not receive the reply of Gizwits platform in time, you can assume that the connection with Gizwits platform is closed and you need to reconnect.</p>
<h2 id="3-Device-control"><a href="#3-Device-control" class="headerlink" title="3. Device control"></a>3. Device control</h2><p>After the client establishes an SSL connection with the Gizwits platform, the client can send the following string to control the device:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;remote_control_req&quot;,</span><br><span class="line">&quot;msg_id&quot;: &lt;msg id string&gt;,</span><br><span class="line">&quot;data&quot;: [&#123;</span><br><span class="line">“cmd&quot;: &quot;write_attrs&quot; | &quot;write&quot; | &quot;write_v1&quot;,</span><br><span class="line">&quot;data&quot;: &#123;</span><br><span class="line">&quot;did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;attrs&quot;: &#123;</span><br><span class="line">&quot;name1&quot;: &lt;value1&gt;,(&quot;name1&quot; refers to the name of the data point, and &lt;value1&gt; refers to the value of the data point. The value can be true/false (bool), Unicode-encoded string such as \u62bd(enum), numbers, or byte arrays (eg [23,2,3] for extended types))</span><br><span class="line">&quot;name2&quot;: &lt;value2&gt;,</span><br><span class="line">… …</span><br><span class="line">&#125;(Only used with cmd &quot;write_attrs&quot;)</span><br><span class="line">OR</span><br><span class="line">&quot;raw&quot;: [&lt;byte&gt;, &lt;byte&gt;, &lt;byte&gt;, … ...](Only used with cmd &quot;write&quot; or &quot;write_v1&quot;)</span><br><span class="line">&#125;</span><br><span class="line">&#125;,...] (One or more instructions)</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<p>Request paramters:</p>
<table>
<thead>
<tr>
<th>Param</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>cmd</td>
<td>Yes</td>
<td>Used to control device, must be remote_control_req</td>
</tr>
<tr>
<td>msg_id</td>
<td>No</td>
<td>Identify this message and will be returned in response message</td>
</tr>
<tr>
<td>data</td>
<td>Yes</td>
<td>Control instruction, array type</td>
</tr>
<tr>
<td>data.cmd</td>
<td>Yes</td>
<td>For V4 product data point protocol format, fill in write_attrs; For V4 product custom protocol format, fill in write; For V1 product protocol format, fill in write_v1</td>
</tr>
<tr>
<td>data.source</td>
<td>Yes</td>
<td>Fixed value: noti</td>
</tr>
<tr>
<td>data.data.did</td>
<td>Yes</td>
<td>Device ID</td>
</tr>
<tr>
<td>data.data.mac</td>
<td>Yes</td>
<td>Device MAC address, length of 12 characters, case sensitive</td>
</tr>
<tr>
<td>data.data.product_key</td>
<td>Yes</td>
<td>ID of the product to which the device belongs</td>
</tr>
<tr>
<td>data.data.attrs / data.data.raw</td>
<td>Yes</td>
<td>For V4 product data point protocol format, choose data.data.attrs; For V4 product custom protocol format (refer to the business instructions transparent transmission of common data point protocol), choose data.data.raw; For V1 product protocol format, choose data.data. Raw </td>
</tr>
</tbody>
</table>
<p>Response from Gizwits platform：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;remote_control_res”,</span><br><span class="line">&quot;msg_id&quot;: &lt;msg id string&gt;,</span><br><span class="line">“result&quot;: &#123;</span><br><span class="line">&quot;succeed&quot;: [&quot;did1&quot;, &quot;did2&quot;, … …]</span><br><span class="line">&quot;failed&quot;: [</span><br><span class="line">&#123;&quot;did3&quot;: &lt;reason str&gt;&#125;</span><br><span class="line">&#123;&quot;did4&quot;: &lt;reason str&gt;&#125;</span><br><span class="line">… …</span><br><span class="line">]</span><br><span class="line">&#125;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<p>The value of msg_id is from the content of the msg_id field in the request message. If the field does not exist in the request message, this field will not appear in the reply message.</p>
<p>If the protocol itself incurs an error, Gizwits platform gives out an error response message. The message format is described below.</p>
<h2 id="4-Push-events"><a href="#4-Push-events" class="headerlink" title="4. Push events"></a>4. Push events</h2><h3 id="Data-point-change-event"><a href="#Data-point-change-event" class="headerlink" title="Data point change event"></a>Data point change event</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_push&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt;，(For ACK)</span><br><span class="line">&quot;event_type&quot;: &quot;datapoints_changed&quot;,</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;created_at&quot;：&lt;timestamp in seconds, float&gt;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<h3 id="Device-online-event"><a href="#Device-online-event" class="headerlink" title="Device online event"></a>Device online event</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_push&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt;，(For ACK)</span><br><span class="line">&quot;event_type&quot;: &quot;device_online&quot;,</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;group_id&quot;: &lt;group_id string&gt;,</span><br><span class="line">&quot;created_at&quot;：&lt;timestamp in seconds, float&gt;，</span><br><span class="line">&quot;ip&quot;: &lt;ip string&gt;,</span><br><span class="line">&quot;country&quot;: &lt;country string&gt;,</span><br><span class="line">&quot;region&quot;: &lt;region string&gt;,</span><br><span class="line">&quot;city&quot;: &lt;city string&gt;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<h3 id="Device-offline-event"><a href="#Device-offline-event" class="headerlink" title="Device offline event"></a>Device offline event</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_push&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt;，(For ACK)</span><br><span class="line">&quot;event_type&quot;: &quot;device_offline&quot;,</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;group_id&quot;: &lt;group_id string&gt;,</span><br><span class="line">&quot;created_at&quot;：&lt;timestamp in seconds, float&gt;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<h3 id="Fault-and-alarm-event"><a href="#Fault-and-alarm-event" class="headerlink" title="Fault and alarm event"></a>Fault and alarm event</h3><p>When there are fault and alarm events, Gizwits platform will push the following message to the client:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_push&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt;，(For ACK)</span><br><span class="line">&quot;event_type&quot;: &quot;attr_fault&quot; | &quot;attr_alert&quot;,</span><br><span class="line">&quot;event_id&quot;: &lt;uuid string&gt;, (The occurrence event and the recovery event of the fault or alarm of the same device share the same event id)</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;group_id&quot;: &lt;group_id string&gt;,</span><br><span class="line">&quot;created_at&quot;：&lt;timestamp in seconds, float&gt;,</span><br><span class="line">&quot;data&quot;: &#123;</span><br><span class="line">&quot;attr_name&quot;: &lt;data point identification of the fault or alarm&gt;,</span><br><span class="line">&quot;attr_displayname&quot;: &lt;data point display name of the fault or alarm&gt;</span><br><span class="line">&quot;value&quot;: 0 | 1 (0 means fault recovery or alarm cancellation, 1 means a fault or alarm occurred)</span><br><span class="line">&#125;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<h3 id="Device-state-event"><a href="#Device-state-event" class="headerlink" title="Device state event"></a>Device state event</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_push&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt;，(For ACK)</span><br><span class="line">&quot;event_type&quot;: &quot;device_status_raw&quot;,</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;group_id&quot;: &lt;group_id string&gt;,</span><br><span class="line">&quot;created_at&quot;：&lt;timestamp in seconds, float&gt;,</span><br><span class="line">&quot;data&quot;: &lt;base64 encoding string&gt; (base64 encoded string of raw data for device state)</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<p>If the product supports data point interpretation (Gizwits common data point protocol or custom data point protocol), the message format is:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_push&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt;，(For ACK)</span><br><span class="line">&quot;event_type&quot;: &quot;device_status_kv&quot;,</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;group_id&quot;: &lt;group_id string&gt;,</span><br><span class="line">&quot;created_at&quot;：&lt;timestamp in seconds, float&gt;,</span><br><span class="line">&quot;data&quot;: &#123;</span><br><span class="line">&lt;key1 string&gt;: &lt;value1&gt;,</span><br><span class="line">&lt;key2 string&gt;: &lt;value2&gt;,</span><br><span class="line">...</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Event-for-central-controller-adding-child-devices"><a href="#Event-for-central-controller-adding-child-devices" class="headerlink" title="Event for central controller adding child devices"></a>Event for central controller adding child devices</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_push&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt;，(For ACK)</span><br><span class="line">&quot;event_type&quot;: &quot;sub_device_added&quot;,</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;child_product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;child_did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;child_mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;child_passcode&quot;: &lt;str, AES encrypted, see below&gt;,</span><br><span class="line">&quot;created_at&quot;：&lt;timestamp in seconds, float&gt;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<ul>
<li>child_passcode uses AES encryption,</li>
<li>AES complement mode is pcks7padding</li>
<li>AES key is the md5 value of the central controller passcode (16 bytes)</li>
<li>AES mode is AES.MODE_ECB</li>
</ul>
<h3 id="Event-for-central-controller-deleting-child-devices"><a href="#Event-for-central-controller-deleting-child-devices" class="headerlink" title="Event for central controller deleting child devices"></a>Event for central controller deleting child devices</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_push&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt;，(For ACK)</span><br><span class="line">&quot;event_type&quot;: “sub_device_deleted”,</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;mac&quot;: &lt;mac string&gt;,</span><br><span class="line">            &quot;child_product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;child_did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;child_mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;created_at&quot;：&lt;timestamp in seconds, float&gt;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<h3 id="Device-binding-unbinding-event"><a href="#Device-binding-unbinding-event" class="headerlink" title="Device binding/unbinding event"></a>Device binding/unbinding event</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_push&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt;，(For ACK)</span><br><span class="line">&quot;event_type&quot;: &quot;device_bind&quot; | &quot;device_unbind&quot;,</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;app_id&quot;: &lt;app_id string&gt;,</span><br><span class="line">&quot;uid&quot;: &lt;uid string&gt;,</span><br><span class="line">&quot;group_id&quot;: &lt;group_id string&gt;,</span><br><span class="line">&quot;created_at&quot;：&lt;timestamp in seconds, float&gt;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<h3 id="Device-reset-event"><a href="#Device-reset-event" class="headerlink" title="Device reset event"></a>Device reset event</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_push&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt;，(For ACK)</span><br><span class="line">&quot;event_type&quot;: &quot;device_reset&quot;,</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;created_at&quot;：&lt;timestamp in seconds, float&gt;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<h3 id="Device-file-downloading-event"><a href="#Device-file-downloading-event" class="headerlink" title="Device file downloading event"></a>Device file downloading event</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_push&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt;，(For ACK)</span><br><span class="line">&quot;event_type&quot;: &quot;device_file_download&quot;,</span><br><span class="line">&quot;product_key&quot;: &lt;product_key string&gt;,</span><br><span class="line">&quot;did&quot;: &lt;did string&gt;,</span><br><span class="line">&quot;mac&quot;: &lt;mac string&gt;,</span><br><span class="line">&quot;download_url&quot;: &lt;download_url string&gt;,</span><br><span class="line">&quot;created_at&quot;：&lt;timestamp in seconds, float&gt;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<h3 id="Event-ACK"><a href="#Event-ACK" class="headerlink" title="Event ACK"></a>Event ACK</h3><p>Every time the client receives an event message, it needs to reply with the following ACK message:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;event_ack&quot;,</span><br><span class="line">&quot;delivery_id&quot;: &lt;delivery_id&gt; (According to the original data type)</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<p>If the Gizwits platform does not receive a response from the client, the event is repeatedly pushed until the Gizwits platform receives an ACK or it expires. In general, events are pushed in order of occurrence time. When prefetch_count &gt; 1, there may be retransmission due to an event without ACK and therefore the event does not arrive in chronological order. For example, the event of failure recovery or alarm cancellation is received first. Hence, client developers should compare the value of event_id and created_at when processing.</p>
<h2 id="5-Error-response"><a href="#5-Error-response" class="headerlink" title="5. Error response"></a>5. Error response</h2><p>Gizwits platform returns the following message when the message sent by the client is not recognized by Gizwits platform:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">&quot;cmd&quot;: &quot;invalid_msg&quot;</span><br><span class="line">“error_code”: &lt;code int&gt;</span><br><span class="line">&quot;msg&quot;: &lt;msg string&gt;</span><br><span class="line">&#125;\n</span><br></pre></td></tr></table></figure>
<p>The client developer should check whether the message sent by the client is correct (Note: If the client does not add “\n” at the end of the message, the server will consider that it has not received the complete message and continue to wait for more) .</p>
<h1 id="subkey-Management"><a href="#subkey-Management" class="headerlink" title="subkey Management"></a>subkey Management</h1><p>When in use, it is necessary to pay attention to what subkeys are currently used, and to clean up the subkeys that are no longer used as soon as possible to avoid unnecessary waste of resources. Acquisition and deletion of subkey are accomplished using HTTP API request.</p>
<ul>
<li>Domain name: snoti.gizwits.com</li>
<li>HTTP API port: 2018</li>
</ul>
<h2 id="1-Get-subkey"><a href="#1-Get-subkey" class="headerlink" title="1. Get subkey"></a>1. Get subkey</h2><p><a href="http://swagger.gizwits.com/doc/index/snoti_api_operator#!/product/get_v1_products_product_key_subkey" target="_blank" rel="noopener">http://swagger.gizwits.com/doc/index/snoti_api_operator#!/product/get_v1_products_product_key_subkey</a></p>
<h2 id="2-Delete-subkey"><a href="#2-Delete-subkey" class="headerlink" title="2. Delete subkey"></a>2. Delete subkey</h2><p><a href="http://swagger.gizwits.com/doc/index/snoti_api_operator#!/product/delete_v1_products_product_key_subkey" target="_blank" rel="noopener">http://swagger.gizwits.com/doc/index/snoti_api_operator#!/product/delete_v1_products_product_key_subkey</a></p>
<h1 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h1><h2 id="1-What-format-need-the-device-data-to-be-received-by-SNoti-client-follow"><a href="#1-What-format-need-the-device-data-to-be-received-by-SNoti-client-follow" class="headerlink" title="1. What format need the device data to be received by SNoti client follow?"></a>1. What format need the device data to be received by SNoti client follow?</h2><p>a. For devices not using data point protocol, the data with protocol command words 0x0091, 0x0093, 0x0094 can be transparently transmitted to SNoti client;</p>
<p>b. For devices using common data point protocol, the protocol command word shall accommodate 0x0091, 0x0093, and 0x0094. Besides, the first command word of business instructions shall accommodate one of the following:</p>
<ul>
<li>0x04, business instructions need to follow data point format</li>
<li>0x06, transparent transmission of business instructions</li>
</ul>
<h2 id="2-When-the-SNoti-client-controls-the-device-which-part-of-the-Gizwits-protocol-does-the-raw-instruction-sent-out-reside-in"><a href="#2-When-the-SNoti-client-controls-the-device-which-part-of-the-Gizwits-protocol-does-the-raw-instruction-sent-out-reside-in" class="headerlink" title="2. When the SNoti client controls the device, which part of the Gizwits protocol does the raw instruction sent out reside in?"></a>2. When the SNoti client controls the device, which part of the Gizwits protocol does the raw instruction sent out reside in?</h2><p>The Raw instruction refers to all instructions following the protocol command word 0x0090, excluding 0x0090. It is worth noting that the Raw instruction begins with 0x05 when using common data point transparent transmission.</p>
<h2 id="3-After-the-device-is-offline-the-SNoti-client-sends-instructions-to-the-device-When-the-device-comes-online-again-can-it-receive-those-instructions"><a href="#3-After-the-device-is-offline-the-SNoti-client-sends-instructions-to-the-device-When-the-device-comes-online-again-can-it-receive-those-instructions" class="headerlink" title="3. After the device is offline, the SNoti client sends instructions to the device. When the device comes online again, can it receive those instructions?"></a>3. After the device is offline, the SNoti client sends instructions to the device. When the device comes online again, can it receive those instructions?</h2><p>No.</p>
<h2 id="4-What-does-the-0-255-of-the-Raw-instruction-mean-Must-it-be-decimal-If-it-is-negative-how-to-deal-with"><a href="#4-What-does-the-0-255-of-the-Raw-instruction-mean-Must-it-be-decimal-If-it-is-negative-how-to-deal-with" class="headerlink" title="4. What does the [0-255] of the Raw instruction mean? Must it be decimal? If it is negative, how to deal with?"></a>4. What does the [0-255] of the Raw instruction mean? Must it be decimal? If it is negative, how to deal with?</h2><p>The integer range that a byte (1B) in the protocol can represent is: unsigned integer 0~255 or signed integer -128~127. In the SNoti protocol, an unsigned integer is used to represent a single byte. Some programming languages convert signed positive integer to unsigned integer with: result = bytes &amp; 0xff.</p>
<h2 id="5-Can-SNoti-be-used-in-the-project-with-a-central-controller"><a href="#5-Can-SNoti-be-used-in-the-project-with-a-central-controller" class="headerlink" title="5. Can SNoti be used in the project with a central controller?"></a>5. Can SNoti be used in the project with a central controller?</h2><p>a. SNoti does not distinguish whether the product type is a central controller, but only needs to apply for the product auth_id;</p>
<p>b. When you need to receive data of the central control gateway, use the auth_id corresponding to the central control gateway product;</p>
<p>c. When you need to receive data of the child device, use the auth_id corresponding to the child device product.</p>
<h2 id="6-Are-clients-with-different-subkeys-under-the-same-product-key-able-to-receive-message-pushed-by-SNoti"><a href="#6-Are-clients-with-different-subkeys-under-the-same-product-key-able-to-receive-message-pushed-by-SNoti" class="headerlink" title="6. Are clients with different subkeys under the same product_key able to receive message pushed by SNoti?"></a>6. Are clients with different subkeys under the same product_key able to receive message pushed by SNoti?</h2><p>Yes, different queues will be created for different subkeys which are independent of each other. Therefore, when data needs to be pushed to the clients, all clients of different subkeys can receive the push message, provided that the clients of the subkeys have set event listeners for the message when logging in. </p>

    </div>
    
    <div class="widget-wrapper">
  <span class="widget">
    <div>
        <a id="share" target="_blank" title="Share">
          <span>Share</span>
        </a>
        <div class="social-share" data-initialized="true">
            <a href="#" class="social-share-icon icon-wechat"></a>
            <a href="#" class="social-share-icon icon-weibo"></a>
            <a href="#" class="social-share-icon icon-qq"></a>
            <a href="#" class="social-share-icon icon-qzone"></a>
            <a href="#" class="social-share-icon icon-douban"></a>
        </div>
    </div>
    <a href="http://y0.cn/docs" target="_blank" title="Register">
      <span>Register</span>
    </a>
    <a href="https://github.com/gizwits-docs/gizwits-docs/issues" target="_blank" title="Feed back">
      <span>Feed back</span>
    </a>
    <a href="#" title="Top"><i class="fa fa-angle-up fa-2x" aria-hidden="true"></i></a>
  </span>
</div>
  </div>
</div>

    <div class="footer">
  <div class="container">
    <p>
      <span><a href="http://www.gizwits.com" target="_blank">HOME</a></span>
      <span><a href="http://www.gizwits.com/about-us" target="_blank">ABOUT</a></span>
      <span><a href="http://www.gizwits.com/about-us#contact-us" target="_blank">CONTACT</a></span>
      <span><a href="http://www.gizwits.com/join-us" target="_blank">JOIN</a></span>
    </p>
    <p>&#169;2011-2017; Gizwits IoT Technology Co., Ltd. 粤ICP备11090211号</p>
  </div>
</div>

    <script src="/js/spin.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.hashchange.min.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/scrollspy.js"></script>
<script src="/js/social-share.min.js"></script>
<script src="/js/documentation.js?v=d413cf8ceca4865c39c2dabcd3bc0077"></script>


<script type="text/javascript" src="http://webchat.7moor.com/javascripts/7moorInit.js?accessId=b01e0430-943a-11e6-8ad7-636675d9e71f&autoShow=true" async="async"></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3787e6b3b29a084fde41f22828d89b7d";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </body>
</html>