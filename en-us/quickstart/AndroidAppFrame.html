
<!DOCTYPE html>
<html lang="en-us">
  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <title>Quick start of Android App development - Gizwits</title>

  <meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <meta name="Description" content="Quick start of Android App development-Gizwits">
  <meta name="keywords" content="Quick start of Android App development docs 文档中心 Gizwits">

  <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon">
  <script src="/js/redirect.js"></script>

  <link rel="stylesheet" href="/css/pure.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/documentation.css?v=db6111caa3d210b6cb1d2dac5119d7c5">
  <link rel="stylesheet" href="/css/share.min.css">
</head>
  <body>
    <div class="header">
  <div class="container pure-g">
    <span class="brand pure-u-5-24">
      <a href="http://www.gizwits.com" class="logo">
      
      <img src="/images/logo_en.png" alt="logo">
      
      </a>
      <a class="text" href="/">Docs</a>
    </span>

    <div class="mobile-header" v="">
      <span class="title">Gizwits Docs</span>
      <i class="fa fa-caret-square-o-down fa-lg" aria-hidden="true"></i>
    </div>

    <span class="menu pure-u-16-24">
      <span class="header-search-btn" id="header-search-btn">
        <i class="fa fa-search"></i>
      </span>
      <ul class="levelA-wrapper">
        
          
            <li class="levelA"><a href="/en-us/overview/overview.html">Overview</a></li>
          
        
          
            <li class="levelA">
              Quick Start &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/quickstart/GizwitsQuickStart.html">Gizwits Quick Start within 5 mins</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/quickstart/glossary.html">Glossary</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              App Dev Guide &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppDevGetStarted.html">Get Started with APP Development</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppCodeAutoGenerator.html">App code auto-generator</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      APP Frame Guide &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSPushNotification.html">iOS Push Notification</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSAuthReSkin.html">iOS Auth Re Skin</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/iosframe.html">Quick start of iOS App development</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/androidframe.html">Android frame</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidPushNotification.html">Android Push Notification</a></li>
                        
                          <li class="levelC"><a href="/en-us/quickstart/AndroidAppFrame.html">Quick start of Android App development</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/APICloudFrame.html">API Cloud Frame</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/VideoTutorial.html">Video tutorial of the App open source framework</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB has-submenu">
                      App SDK Guide &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/AppDev/iOSSDKA2.html">iOS SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/AndroidSDKA2.html">Android SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/APICloudWifiSDK.html">APICloud SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/SDKTransparentTransmission.html">Data transparent transmission of SDK</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/SDKLogCapture.html">SDK debug log capture</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/sdk_error.html">SDK error codes</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/WechatDev/WeChatDev.html">WeChat SDK Guide</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/WechatDev/WechatDevIntro.html">WeChat Dev Intro</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      More Guide &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/cloud/SharingSDK.html">Gizwits Device Sharing</a></li>
                        
                          <li class="levelC"><a href="/en-us/AppDev/third-party.html">Application process for third-party authentication</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/AppDev/AppDevFAQ.html">App Dev FAQ</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              DeviceDev &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/DeviceDev/DeviceDevIntro.html">Get started with device connection</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      Gizwits Cloud access &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/quickstart/UseMCU.html">MCU scheme</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/UseSOC.html">ESP8266-SoC scheme</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/module_source/module_source.html">Module Documents</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      GAgent Documents &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/gagent_info.html">Detailed annotation of GAgent</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/DebugTool.html">Firmware downloading on modules</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/HF-LPB100.html">HF-LPB100</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/HF-LPT120.html">HF-LPT120</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/MXCHIP.html">MXCHIP</a></li>
                        
                          <li class="levelC"><a href="/en-us/DeviceDev/debug/ESP8266.html">ESP8266</a></li>
                        
                      </ul>
                    </li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              Cloud API &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/cloud/OpenAPI.html">Open API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/ent_dev.html">Enterprise Application Development</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/enterprise_api.html">Enterprise API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/NotificationAPI.html">Notification API</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/WebsocketAPI.html">WebsocketAPI</a></li>
                  
                
                  
                    <li class="levelB has-submenu">
                      API Tutorial &#9656;
                      <ul class="levelC-wrapper">
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseOpenAPI.html">Using Open API to control virtual device with Postman</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseSNoti.html">Real-time data synchronization demo for SNoti service</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseWebsocket.html">Control device using WebSocket</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/DataAPI.html">Aggregation API Guide</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/LinkageAPI.html">Device Linkage API Tutorial</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/devgroup_API.html">Device Grouping API Tutorial</a></li>
                        
                          <li class="levelC"><a href="/en-us/UserManual/UseQRCode.html">Generating device QR code for App binding</a></li>
                        
                      </ul>
                    </li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/cloud/CloudFAQ.html">Cloud FAQ</a></li>
                  
                
              </ul>
            </li>
          
        
          
            <li class="levelA">
              User Manual &#9662;
              <ul class="levelB-wrapper">
                
                  
                    <li class="levelB"><a href="/en-us/UserManual/ST_IoT.html">Gizwits and ST Make IoT Development Easy</a></li>
                  
                
                  
                    <li class="levelB"><a href="/en-us/DeviceDev/ST/ICUBEGIZWITS.html">Getting Started with I-CUBE-GiZWITS</a></li>
                  
                
              </ul>
            </li>
          
        
      </ul>
    </span>

    <span class="pure-u-3-24 lang-switch-wrapper">

      <i class="fa fa-globe" aria-hidden="true"></i>
      
      <a href="/zh-cn/overview/overview.html" class="lang-switch" data-lang="zh-cn">中文</a>
      
    </span>
  </div>

  <div class="header-search-panel" id="header-search-panel">
    <span class="header-search-close" id="header-search-close"><i class="fa fa-times" aria-hidden="true"></i></span>
    <div class="header-search-input-wrap" id="header-search-input-wrap">
      <input type="text" class="header-search-input" id="header-search-input" placeholder="请输入关键字">
      <span class="header-search-input-icon"><i class="fa fa-search"></i></span>
    </div>

    <div class="header-search-trend" id="header-search-trend">
      <div class="header-search-trend-title">热搜词</div>
      <div class="header-search-trend-items clearfix">
        
        <div class="header-search-trend-item" data-word="APP">APP</div>
        
        <div class="header-search-trend-item" data-word="SDK">SDK</div>
        
        <div class="header-search-trend-item" data-word="Android">Android</div>
        
        <div class="header-search-trend-item" data-word="ios">ios</div>
        
        <div class="header-search-trend-item" data-word="WIFI">WIFI</div>
        
      </div>
    </div>

    <div class="header-search-result hidden" id="header-search-result">
      <div class="header-search-result-head">
        搜索结果 &gt; <span id="header-search-keyword"></span>
      </div>
      <div class="header-search-result-items" id="header-search-result-items">
      </div>
    </div>
  </div>
</div>

    <div class="body">

  <div class="container clearfix">
    <div class="navigation">
      <div class="navigation-inner">
        <div class="nav-title">Content</div>
        <div class="nav"></div>
      </div>
    </div>
    <div class="markdown-body" data-spy="scroll" data-target=".navigation">
      <div class="heading">
        <div class="title">Quick start of Android App development</div>
        <a class="edit-link" target="_blank"><i class="fa fa-github" aria-hidden="true"></i> Edit</a>
      </div>
      <h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>This article mainly walks you through how to use the Gizwits Android App open source framework (hereinafter referred as Framework) for rapid App development and testing. Before reading this document, please go through App development preparation and guidance.</p>
<h1 id="Deploy-and-debug-the-Framework-in-10-minutes"><a href="#Deploy-and-debug-the-Framework-in-10-minutes" class="headerlink" title="Deploy and debug the Framework in 10 minutes"></a>Deploy and debug the Framework in 10 minutes</h1><h2 id="1-Download-the-Framework"><a href="#1-Download-the-Framework" class="headerlink" title="1. Download the Framework"></a>1. Download the Framework</h2><p>The Framework development environment: Eclipse</p>
<p>The Framework code repository:</p>
<p><a href="https://git.oschina.net/dantang/GizOpenSource_AppKit_Android" target="_blank" rel="noopener">https://git.oschina.net/dantang/GizOpenSource_AppKit_Android</a></p>
<p><img src="../../../assets/en-us/quickstart/android/11.png" alt="Android App development"></p>
<h2 id="2-Import-project-to-Eclipse"><a href="#2-Import-project-to-Eclipse" class="headerlink" title="2. Import project to Eclipse"></a>2. Import project to Eclipse</h2><p>The following error may occur during the import process.</p>
<p><img src="../../../assets/en-us/quickstart/android/12.png" alt="Android App development"></p>
<p>In this case, you need to change the target version in project.properties to the Android SDK version corresponding to eclipse.</p>
<p><img src="../../../assets/en-us/quickstart/android/13.png" alt="Android App development"></p>
<h2 id="3-The-Framework-directory-structure"><a href="#3-The-Framework-directory-structure" class="headerlink" title="3. The Framework directory structure"></a>3. The Framework directory structure</h2><p>Set the Package Presentation to Hierarchical as shown below.</p>
<p><img src="../../../assets/en-us/quickstart/android/14.png" alt="Android App development"></p>
<p>At this point, you can clearly see the directory structure of the entire project. As shown in the figure, the Framework separates each module as a Package to work independently for ensuring maximum decoupling between Packages. During the development, if you want to remove a function, such as a third-party authentication, you can directly delete the “ThirdAccountModule” package directly and it will not affect other packages.</p>
<p><img src="../../../assets/en-us/quickstart/android/15.png" alt="Android App development"></p>
<h2 id="4-Modify-the-UIConfig-json"><a href="#4-Modify-the-UIConfig-json" class="headerlink" title="4. Modify the UIConfig.json"></a>4. Modify the UIConfig.json</h2><p>As shown in the above figure, the UIConfig.json file under the assets directory is a global configuration file. Here you can set the configuration information of the project.</p>
<ul>
<li>app_id: Gizwits app id</li>
<li>app_secret: Gizwits app secret</li>
<li>product_key: Gizwits product key  </li>
<li>wifi_type_select: Whether the Wi-Fi module selection function is enabled</li>
<li>tencent_app_id:qq authentication app id </li>
<li>wechat_app_id: Wechat authentication app id</li>
<li>wechat_app_secret: Wechat authentication app secret </li>
<li>push_type: Push notification type [0: Off, 1: Jiguang, 2: Baidu]</li>
<li>bpush_app_key: Baidu push notification app key</li>
<li>openAPI_URL: Domain name and port, in the format of “api.gizwits.com:80”. Defaults to 80 if unspecified.</li>
<li>site_URL: Domain name and port, in the format: “site.gizwits.com:80”. Defaults to 80 if unspecified.</li>
<li>push_URL: Push notification service domain name and port, in the format: “push.gizwits.com:80”. Defaults to 80 if unspecified.</li>
<li>buttonColor: Button color</li>
<li>buttonTextColor: Button text color</li>
<li>navigationBarColor: Navigation bar color</li>
<li>navigationBarTextColor: Navigation bar text color</li>
<li>configProgressViewColor: Configuration progress view color</li>
<li>addDeviceTitle: Navigation bar text of Adding device page</li>
<li>qq: QQ login button on the login page [true: display, false: hidden]</li>
<li>wechat: Wechat login button on the login page [true: display, flase: hide]</li>
<li>anonymousLogin: Skip button on the login page [true: display, flase: hide]</li>
</ul>
<p>Find the Product Key, App ID and App Secret on Gizwits Platform Console, and fill in the corresponding fields in the json file, as shown below:</p>
<p><img src="../../../assets/en-us/quickstart/android/16.png" alt="Android App development"></p>
<h2 id="5-App-deployment"><a href="#5-App-deployment" class="headerlink" title="5. App deployment"></a>5. App deployment</h2><p>After typing the Product Key, App ID, and App Secret correctly, the project can be deployed and executed.</p>
<p><img src="../../../assets/en-us/quickstart/android/17.png" alt="Android App development"></p>
<p><img src="../../../assets/en-us/quickstart/android/18.png" alt="Android App development"></p>
<h2 id="6-Register-a-new-user"><a href="#6-Register-a-new-user" class="headerlink" title="6. Register a new user"></a>6. Register a new user</h2><p><img src="../../../assets/en-us/quickstart/android/19.png" alt="Android App development"></p>
<h2 id="7-Log-in-the-App"><a href="#7-Log-in-the-App" class="headerlink" title="7. Log in the App"></a>7. Log in the App</h2><p>After the successful registration, the use will automatically log in and navigate to My Devices page.</p>
<p><img src="../../../assets/en-us/quickstart/android/20.png" alt="Android App development"></p>
<h2 id="8-Start-the-virtual-device-and-display-its-QR-code"><a href="#8-Start-the-virtual-device-and-display-its-QR-code" class="headerlink" title="8. Start the virtual device and display its QR code"></a>8. Start the virtual device and display its QR code</h2><p>Choose the “Virtual Device” of the corresponding product in left navigation pane of the developer center.</p>
<p>Virtual Device: The Gizwits Platform automatically generates a simulation device that simulates the behavior of reporting data by real devices. Developers can use the virtual device provided by Gizwits for App development when the development of physical devices has not been completed yet.</p>
<p><img src="../../../assets/en-us/quickstart/android/21.png" alt="Android App development"></p>
<p><img src="../../../assets/en-us/quickstart/android/22.png" alt="Android App development"></p>
<h2 id="9-Scan-QR-code-to-bind-the-device"><a href="#9-Scan-QR-code-to-bind-the-device" class="headerlink" title="9. Scan QR code to bind the device"></a>9. Scan QR code to bind the device</h2><p>Choose the menu in the upper right corner and click Scan QR code to bind device.</p>
<p><img src="../../../assets/en-us/quickstart/android/23.png" alt="Android App development"></p>
<p><img src="../../../assets/en-us/quickstart/android/24.png" alt="Android App development"></p>
<p>After scanning successfully, it will navigate to the “My Devices” page. At this time, the “virtual device” that was just scanned will appear on the page.</p>
<p><img src="../../../assets/en-us/quickstart/android/25.png" alt="Android App development"></p>
<h2 id="10-Click-on-“Smart-Lamp”-to-access-the-device-control-page"><a href="#10-Click-on-“Smart-Lamp”-to-access-the-device-control-page" class="headerlink" title="10. Click on “Smart Lamp” to access the device control page"></a>10. Click on “Smart Lamp” to access the device control page</h2><p><img src="../../../assets/en-us/quickstart/android/26.png" alt="Android App development"></p>
<p>After navigating to the control page, you will find that it is a blank page. In order to develop App quickly, the Gizwits open source framework has encapsulated user login, device discovery, device connection, and other functions into various standard modules, leaving only control pages for you to build on your own demand, which saves your time. The next section will illustrate how to develop a simple and attractive control page quickly.</p>
<h1 id="Rapid-development-of-device-control-pages"><a href="#Rapid-development-of-device-control-pages" class="headerlink" title="Rapid development of device control pages"></a>Rapid development of device control pages</h1><h2 id="1-Code-preview"><a href="#1-Code-preview" class="headerlink" title="1. Code preview"></a>1. Code preview</h2><p>Open DeviceModule -&gt; GosDeviceController. You can see that the entire control page is very simple, in which only one UILabel displays the device MAC address.</p>
<p><img src="../../../assets/en-us/quickstart/android/27.png" alt="Android App development"></p>
<h2 id="2-UI-design"><a href="#2-UI-design" class="headerlink" title="2. UI design"></a>2. UI design</h2><p>According to the created product “Smart Lamp”, the expected UI effect is as follows:</p>
<p><img src="../../../assets/en-us/quickstart/android/28.png" alt="Android App development"></p>
<p>Click the lamp icon on the left page, then the App issues an instruction to control the light switch. The two icons are swapped for each other when tapped.</p>
<h2 id="3-Page-layout"><a href="#3-Page-layout" class="headerlink" title="3. Page layout"></a>3. Page layout</h2><h3 id="3-1-Import-pictures"><a href="#3-1-Import-pictures" class="headerlink" title="3.1 Import pictures"></a>3.1 Import pictures</h3><p><img src="../../../assets/en-us/quickstart/android/29.png" alt="Android App development"></p>
<p>Copy the switch pictures that swap the states of the smart lamp to drawable directory, as shown in the following figure:</p>
<p><img src="../../../assets/en-us/quickstart/android/30.png" alt="Android App development"></p>
<h3 id="3-2-Add-a-Button-control"><a href="#3-2-Add-a-Button-control" class="headerlink" title="3.2 Add a Button control"></a>3.2 Add a Button control</h3><p>1) Open the layout file “activity_gos_device_control.xml” corresponding to the control page.</p>
<p><img src="../../../assets/en-us/quickstart/android/31.png" alt="Android App development"></p>
<p>2) Add a Button control</p>
<p>As shown in the figure, remove the extra controls from the control page and add a Button control.</p>
<p><img src="../../../assets/en-us/quickstart/android/32.png" alt="Android App development"></p>
<p>3) Use the selector to control the Button background</p>
<p>Create a new selector file in the drawable folder, as shown in the figure:</p>
<p><img src="../../../assets/en-us/quickstart/android/33.png" alt="Android App development"></p>
<p>Add the background switch code in btn_light_onoff_selector.xml:</p>
<p><img src="../../../assets/en-us/quickstart/android/34.png" alt="Android App development"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- background image for the button&apos;s selected state --&gt;</span><br><span class="line">    &lt;item android:drawable=&quot;@drawable/light_on&quot; android:state_selected=&quot;true&quot;/&gt;</span><br><span class="line">    &lt;!-- background image for the button&apos;s unseleted state --&gt;</span><br><span class="line">    &lt;item android:drawable=&quot;@drawable/light_off&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/selector&gt;</span><br></pre></td></tr></table></figure>
<p>4) Set the background of the Button control to btn_light_onoff_selector, the code is as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:gravity=&quot;center&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot; &gt;</span><br><span class="line"></span><br><span class="line">    &lt;Button</span><br><span class="line">        android:id=&quot;@+id/btn_light_onoff&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot; </span><br><span class="line">        android:background=&quot;@drawable/btn_light_onoff_selector&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>
<p>At this point the entire page layout is ready.</p>
<h2 id="4-Implementation-of-the-control-page"><a href="#4-Implementation-of-the-control-page" class="headerlink" title="4. Implementation of the control page"></a>4. Implementation of the control page</h2><h3 id="4-1-Create-the-control-page"><a href="#4-1-Create-the-control-page" class="headerlink" title="4.1 Create the control page"></a>4.1 Create the control page</h3><p>The figure below shows the data point created for the product in the Gizwits cloud.</p>
<p><img src="../../../assets/en-us/quickstart/android/35.png" alt="Android App development"></p>
<p>The reference code for the entire GosDeviceControlActivity is as follows:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line">package com.gizwits.opensource.appkit.ControlModule;</span><br><span class="line"></span><br><span class="line">import java.util.concurrent.ConcurrentHashMap;</span><br><span class="line">import com.gizwits.gizwifisdk.api.GizWifiDevice;</span><br><span class="line">import com.gizwits.gizwifisdk.enumration.GizWifiErrorCode;</span><br><span class="line">import com.gizwits.gizwifisdk.listener.GizWifiDeviceListener;</span><br><span class="line">import com.gizwits.opensource.appkit.CommonModule.GosBaseActivity;</span><br><span class="line">import com.gizwits.opensource.appkit.R;</span><br><span class="line">import android.app.ActionBar;</span><br><span class="line">import android.content.Intent;</span><br><span class="line">import android.os.Bundle;</span><br><span class="line">import android.util.Log;</span><br><span class="line">import android.view.MenuItem;</span><br><span class="line">import android.view.View;</span><br><span class="line">import android.view.View.OnClickListener;</span><br><span class="line">import android.widget.Button;</span><br><span class="line"></span><br><span class="line">public class GosDeviceControlActivity extends GosBaseActivity &#123;</span><br><span class="line">	/** Smart lamp */</span><br><span class="line">	private GizWifiDevice device;</span><br><span class="line">	/** Navigation bar */</span><br><span class="line">	ActionBar actionBar;</span><br><span class="line">	/** The data point name created in the Gizwits cloud */</span><br><span class="line">	public static final String LIGHT_SWITCH = &quot;switch&quot;;</span><br><span class="line">	/** The smart lamp switch Button */</span><br><span class="line">	private Button btnLightSwitch;</span><br><span class="line">	/** Device listener */</span><br><span class="line">	private GizWifiDeviceListener deviceListener = new GizWifiDeviceListener() &#123;</span><br><span class="line">		// Callback for receiving data</span><br><span class="line">		public void didReceiveData(GizWifiErrorCode result, GizWifiDevice device,</span><br><span class="line">				ConcurrentHashMap&lt;String, Object&gt; dataMap, int sn) &#123;</span><br><span class="line">			// the defined device data points with boolean, numeric, or enumration data</span><br><span class="line">			if (dataMap.get(&quot;data&quot;) != null) &#123;</span><br><span class="line">				ConcurrentHashMap&lt;String, Object&gt; map = (ConcurrentHashMap&lt;String, Object&gt;) dataMap.get(&quot;data&quot;);				</span><br><span class="line">				// Get the value reported from the device in the map by the name.</span><br><span class="line">				if (map.get(LIGHT_SWITCH) != null) &#123;</span><br><span class="line">					boolean status = (Boolean) map.get(LIGHT_SWITCH);					</span><br><span class="line">					// Change the button icon according to the value reported by the device</span><br><span class="line">					btnLightSwitch.setSelected(status);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">		super.onCreate(savedInstanceState);</span><br><span class="line">		setContentView(R.layout.activity_gos_device_control);</span><br><span class="line">		initDevice();</span><br><span class="line">		// Set ActionBar</span><br><span class="line">		setActionBar(true, true, device.getProductName());</span><br><span class="line">		initView();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	protected void onDestroy() &#123;</span><br><span class="line">		super.onDestroy();</span><br><span class="line">		// Exit the control page and take an unsubscribe action on the device</span><br><span class="line">		device.setSubscribe(false);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Description:Initialize the control</span><br><span class="line">	 */</span><br><span class="line">	private void initView() &#123;</span><br><span class="line">		btnLightSwitch = (Button) findViewById(R.id.btn_light_onoff);</span><br><span class="line">		btnLightSwitch.setOnClickListener(new OnClickListener() &#123;</span><br><span class="line">			@Override</span><br><span class="line">			public void onClick(View v) &#123;</span><br><span class="line">				controlLight();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Description:Initialize the device</span><br><span class="line">	 */</span><br><span class="line">	private void initDevice() &#123;</span><br><span class="line">		Intent intent = getIntent();</span><br><span class="line">		device = (GizWifiDevice) intent.getParcelableExtra(&quot;GizWifiDevice&quot;);</span><br><span class="line">		device.setListener(deviceListener);</span><br><span class="line">		Log.i(&quot;Apptest&quot;, device.getDid());</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	public boolean onOptionsItemSelected(MenuItem item) &#123;</span><br><span class="line">		switch (item.getItemId()) &#123;</span><br><span class="line">		case android.R.id.home:</span><br><span class="line">			this.finish();</span><br><span class="line">			break;</span><br><span class="line">		&#125;</span><br><span class="line">		return super.onOptionsItemSelected(item);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Description::Control the smart lamp</span><br><span class="line">	 */</span><br><span class="line">	private void controlLight() &#123;</span><br><span class="line">		if (btnLightSwitch.isSelected()) &#123;</span><br><span class="line">			// issue a command</span><br><span class="line">			sendCommand(false);</span><br><span class="line">			// change the Button state</span><br><span class="line">			btnLightSwitch.setSelected(false);</span><br><span class="line">		&#125; else &#123;</span><br><span class="line">			sendCommand(true);</span><br><span class="line">			btnLightSwitch.setSelected(true);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	/**</span><br><span class="line">	 * Description:the method that issues a command</span><br><span class="line">	 * </span><br><span class="line">	 * @param onOff</span><br><span class="line">	 *            true for turning on the lamp, false for turning off the lamp</span><br><span class="line">	 */</span><br><span class="line">	private void sendCommand(boolean onOff) &#123;</span><br><span class="line">		int sn = 5;</span><br><span class="line">		ConcurrentHashMap&lt;String, Object&gt; command = new ConcurrentHashMap&lt;String, Object&gt;();</span><br><span class="line">		// The key in the map is the data point name created in the Gizwits cloud, and the value is the data to be transmitted.</span><br><span class="line">		command.put(LIGHT_SWITCH, onOff);</span><br><span class="line">		// call the write method to issue a command</span><br><span class="line">		device.write(command, sn);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-Deployment-and-debugging"><a href="#4-2-Deployment-and-debugging" class="headerlink" title="4.2 Deployment and debugging"></a>4.2 Deployment and debugging</h3><p>After completing the above code, you can deploy it to your phone for testing.</p>
<p><strong>The App issues a command</strong></p>
<p>After the App is deployed on the mobile phone, it goes to the control page as shown below:</p>
<p><img src="../../../assets/en-us/quickstart/android/36.png" alt="Android App development"></p>
<p>Click the light icon in the App, the App will issue a command, and the light icon changes its state from off to on.</p>
<p><img src="../../../assets/en-us/quickstart/android/37.png" alt="Android App development"></p>
<p>At this point, you can see the command sent by the App in the communication log of the cloud virtual device, as shown in the following figure:</p>
<p><img src="../../../assets/en-us/quickstart/android/38.png" alt="Android App development"></p>
<p><strong>The device reports data</strong></p>
<p>As shown in the figure of the virtual device, change the value of the switch to “0” and click the Push button below. At this time, you can see that there is a record in the communication log “The virtual device reports data”, indicating that the device successfully reports the data.</p>
<p><img src="../../../assets/en-us/quickstart/android/39.png" alt="Android App development"></p>
<p>At this time, the light icon on the control page of the App immediately changes its state to off, indicating that the App successfully received the reported data from the device.</p>
<p><img src="../../../assets/en-us/quickstart/android/40.png" alt="Android App development"></p>
<h1 id="See-Also"><a href="#See-Also" class="headerlink" title="See Also"></a>See Also</h1><p>See “Introduction to App code auto-generator” to understand what functions the automatically generated App code has;</p>
<p>See “App open source framework” to understand</p>
<ul>
<li>Guide of App open source framework for iOS</li>
<li>Guide of iOS App push notification integration</li>
<li>Guide of iOS App third-party authentication and re-skin</li>
<li>Quick start of iOS App development</li>
<li>Guide of App open source framework for Android</li>
<li>Guide of Android App push notification integration</li>
<li>Guide of Android App third-party authentication and re-skin</li>
<li>Guide of APICloud open source framework</li>
</ul>
<p>See “App Development SDK” to develop the IoT App (many user cases of design details can be found here)</p>
<ul>
<li>Guide of iOS SDK 2.0 integration</li>
<li>Guide of Android SDK 2.0 integration</li>
<li>Guide of APICloud SDK</li>
<li>Explanation of SDK data transparent transmission</li>
<li>Guide of SDK debug log capture</li>
<li>SDK error codes</li>
</ul>
<p>More application development guides</p>
<ul>
<li>Application development FAQ</li>
<li>Device sharing guide</li>
<li>Application process for third-party authentication platform </li>
</ul>

    </div>
    
    <div class="widget-wrapper">
  <span class="widget">
    <div>
        <a id="share" target="_blank" title="Share">
          <span>Share</span>
        </a>
        <div class="social-share" data-initialized="true">
            <a href="#" class="social-share-icon icon-wechat"></a>
            <a href="#" class="social-share-icon icon-weibo"></a>
            <a href="#" class="social-share-icon icon-qq"></a>
            <a href="#" class="social-share-icon icon-qzone"></a>
            <a href="#" class="social-share-icon icon-douban"></a>
        </div>
    </div>
    <a href="http://y0.cn/docs" target="_blank" title="Register">
      <span>Register</span>
    </a>
    <a href="https://github.com/gizwits-docs/gizwits-docs/issues" target="_blank" title="Feed back">
      <span>Feed back</span>
    </a>
    <a href="#" title="Top"><i class="fa fa-angle-up fa-2x" aria-hidden="true"></i></a>
  </span>
</div>
  </div>
</div>

    <div class="footer">
  <div class="container">
    <p>
      <span><a href="http://www.gizwits.com" target="_blank">HOME</a></span>
      <span><a href="http://www.gizwits.com/about-us" target="_blank">ABOUT</a></span>
      <span><a href="http://www.gizwits.com/about-us#contact-us" target="_blank">CONTACT</a></span>
      <span><a href="http://www.gizwits.com/join-us" target="_blank">JOIN</a></span>
    </p>
    <p>&#169;2011-2017; Gizwits IoT Technology Co., Ltd. 粤ICP备11090211号</p>
  </div>
</div>

    <script src="/js/spin.min.js"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.hashchange.min.js"></script>
<script src="/js/clipboard.min.js"></script>
<script src="/js/scrollspy.js"></script>
<script src="/js/social-share.min.js"></script>
<script src="/js/documentation.js?v=d413cf8ceca4865c39c2dabcd3bc0077"></script>


<script type="text/javascript" src="http://webchat.7moor.com/javascripts/7moorInit.js?accessId=b01e0430-943a-11e6-8ad7-636675d9e71f&autoShow=true" async="async"></script>


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3787e6b3b29a084fde41f22828d89b7d";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>
  </body>
</html>